(this["webpackJsonp@project/inventory-management-system"]=this["webpackJsonp@project/inventory-management-system"]||[]).push([[52],{638:function(e,t,s){"use strict";s.d(t,"c",(function(){return l})),s.d(t,"b",(function(){return i})),s.d(t,"e",(function(){return m})),s.d(t,"a",(function(){return p})),s.d(t,"g",(function(){return j})),s.d(t,"f",(function(){return h})),s.d(t,"d",(function(){return u})),s.d(t,"h",(function(){return b}));var a=s(1),r=s(16),c=s(152),n=s(62);var d=new class{getOrders(e,t,s,a){return n.a.get("/orders/status/"+e,{headers:Object(c.a)(),params:{query:t,page:s,limit:a}})}getPaymentTransactions(e,t,s){return n.a.get("/orders/payments",{headers:Object(c.a)(),params:{query:e,page:t,limit:s}})}updateOrderPaymentStatus(e,t){return n.a.put("/orders/"+e+"/paid/"+t,{},{headers:Object(c.a)()})}placeOrderDetails(e){return n.a.post("/orders/checkout",{customerAddressId:e.addressId,paymentId:e.paymentMethodId,cartItems:e.items,shippingFeeId:e.shippingFee},{headers:Object(c.a)()})}getOrderByOrderId(e){return n.a.get("/orders/"+e,{headers:Object(c.a)()})}updateOrderStatus(e,t,s,a){return n.a.put("/orders/"+e+"/status/"+t,{},{headers:Object(c.a)(),params:{trackingNumber:s,trackingUrl:a}})}validateCart(e){return n.a.post("/orders/validate",e,{headers:Object(c.a)()})}};const o=(e,t)=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),a=e.response&&e.response.data&&e.response.data.code||e.toString();t({type:r.g,payload:{status:a,data:{message:s}}})},l=(e,t,s,r)=>async c=>d.getOrders(e,t,s,r).then((e=>(c({type:a.GET_ORDERS,payload:{status:200,action:"GET_ORDERS",data:{orders:e.data,orderStatusCount:e.data.orderCounts}}}),Promise.resolve())),(e=>(o(e,c),Promise.reject()))),i=e=>async t=>{t({type:a.ORDER_ITEMS,payload:{status:200,action:"ORDERITEMS",data:{items:e}}})},m=e=>async t=>d.placeOrderDetails(e).then((e=>(t({type:a.PLACE_ORDER,payload:{status:200,action:"PLACE_ORDER",data:{}}}),t({type:r.g,payload:{status:200,data:{message:"Successfully Place your Order",order:e.data}}}),Promise.resolve())),(e=>(o(e,t),Promise.reject()))),p=e=>async t=>d.getOrderByOrderId(e).then((e=>(t({type:a.GET_ORDER_BY_ID,payload:{status:200,action:"GETORDERBYID",data:{order:e.data}}}),Promise.resolve())),(e=>(o(e,t),Promise.reject()))),j=(e,t,s,c)=>async n=>d.updateOrderStatus(e,t,s,c).then((s=>(n({type:a.UPDATE_ORDER_STATUS,payload:{status:200,action:a.UPDATE_ORDER_STATUS,data:{order:s.data}}}),n({type:r.g,payload:{status:200,data:{message:"Successfully updated order "+e+" status to "+t.toUpperCase(),order:s.data}}}),Promise.resolve())),(e=>(o(e,n),Promise.reject()))),h=(e,t)=>async s=>d.updateOrderPaymentStatus(e,t).then((e=>(s({type:a.UPDATE_PAYMENT_STATUS,payload:{status:200,action:a.UPDATE_PAYMENT_STATUS,data:{order:e.data}}}),s({type:r.g,payload:{status:200,data:{}}}),Promise.resolve())),(e=>(o(e,s),Promise.reject()))),u=(e,t,s)=>async r=>d.getPaymentTransactions(e,t,s).then((e=>(r({type:a.GET_PAYMENT_TRANSACTIONS,payload:{status:200,action:"GET_PAYMENT_TRANSACTIONS",data:{payments:e.data}}}),Promise.resolve())),(e=>(o(e,r),Promise.reject()))),b=e=>async t=>d.validateCart(e).then((e=>(t({type:a.VALIDATE_CART,payload:{status:200,action:a.VALIDATE_CART,data:e.data}}),e.data.error_messages.length>0&&t({type:r.g,payload:{status:400,data:{message:e.data.error_messages.join("\n")}}}),Promise.resolve())),(e=>(o(e,t),Promise.reject())))},700:function(e,t,s){"use strict";var a=s(0),r=s(568),c=s(1),n=s(575),d=s.n(n),o=s(26),l=s(7);class i extends a.Component{constructor(e){super(e),this.state={orderItem:this.props.item,canReview:this.props.canReview,orderId:this.props.orderId,comment:this.props.comment,rating:this.props.rating,submitted:this.props.submitted,canViewReview:this.props.canViewReview}}render(){let{orderItem:e,canReview:t,rating:s,comment:a,orderId:n,submitted:i,canViewReview:m}=this.state,p=i;m&&!t&&(i=!0);const j={fontSize:"14px",fontWeight:"400"};return console.log(e),Object(l.jsx)(r.bb,{className:"mb-3",children:Object(l.jsx)(r.i,{children:Object(l.jsx)(r.j,{children:Object(l.jsxs)("div",{className:"d-flex align-items-start",children:[Object(l.jsx)(r.M,{rounded:!0,src:e.product.fileImages.length>0?o.a.api.private.baseUrl+"/api/v1/products/getImages/bytesArrays/"+e.product.fileImages[0].path+e.product.fileImages[0].fileName:c.NO_IMAGE_BASE64,width:100,height:100}),Object(l.jsxs)("div",{className:"ms-2  w-100",children:[Object(l.jsxs)(r.bb,{className:"d-flex justify-content-between",children:[Object(l.jsx)(r.q,{sm:"12",lg:"3",md:"12",className:"ps-4 text-dark",children:e.product.productName}),Object(l.jsxs)(r.q,{sm:"12",lg:"3",md:"2",className:"text-dark d-flex flex-column align-items-center",children:[Object(l.jsx)("span",{style:j,className:"text-black-50",children:"Price"}),Object(l.jsxs)("span",{className:"pt-3",children:["\u20b1",e.product.productPrice.toFixed(2)]})]}),Object(l.jsxs)(r.q,{sm:"12",lg:"3",md:"2",className:"text-dark d-flex flex-column align-items-center",children:[Object(l.jsx)("span",{style:j,className:"text-black-50",children:"Quantity"}),Object(l.jsx)("span",{className:"pt-3",children:e.quantity})]}),Object(l.jsxs)(r.q,{sm:"12",lg:"3",md:"2",className:"text-dark d-flex flex-column align-items-center",children:[Object(l.jsx)("span",{style:j,className:"text-black-50",children:"Amount"}),Object(l.jsxs)("span",{className:"pt-3",children:["\u20b1",e.amount.toFixed(2)]})]})]}),(t||m&&p)&&Object(l.jsxs)("div",{children:[Object(l.jsx)(d.a,{count:5,value:s,size:24,isHalf:!1,edit:!i,onChange:t=>{this.props.handleOrderReview(n,e,t,a)}}),Object(l.jsx)("div",{className:"mb-!2",children:Object(l.jsx)("textarea",{disabled:i,onChange:t=>{this.props.handleOrderReview(n,e,s,t.target.value)},id:"exampleFormControlTextarea1",rows:"3",style:{width:"100%"},placeholder:"Please write a review.",children:a})})]})]})]})})})})}}t.a=i},821:function(e,t,s){"use strict";s.r(t),s.d(t,"OrderDetails",(function(){return x}));var a=s(0),r=s(568),c=s(48),n=s(573),d=s(638),o=s(580),l=s(607),i=s(700),m=s(651),p=s.n(m),j=s(1273),h=s.n(j),u=s(154),b=s(7);class x extends a.Component{constructor(...e){super(...e),this.state={message:"",order:[],orderId:"",customerAddress:[],hasError:!1},this.manageOrderResponse=(e,t)=>{if(e.orderResponse!==this.props.orderResponse){let{status:e,action:t,data:s}=this.props.orderResponse;200===e&&"GETORDERBYID"===t&&this.setState({order:s.order,customerAddress:s.order.customerAddress,orderId:s.order.orderId})}},this.downloadQRCode=()=>{let{orderId:e}=this.state.order;console.log(e);const t=document.getElementById("qrCodeEl").toDataURL("image/png").replace("image/png","image/octet-stream");let s=document.createElement("a");s.href=t,s.download="QR_Code"+e+".png",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}componentDidMount(){let e=this.props.location.state;this.props.getOrderByOrderId(e).catch((()=>{this.setState({hasError:!0})}))}componentDidUpdate(e,t){this.manageOrderResponse(e,t)}render(){let{order:e,message:t,hasError:s,customerAddress:a}=this.state;const{firstName:c,lastName:n,phoneNumber:d,street:m,barangay:j,province:x,region:O,city:g,postalCode:y}=a;let f=c&&c.charAt(0).toUpperCase()+c.slice(1),N=n&&n.charAt(0).toUpperCase()+n.slice(1),R=e&&e.orderId,v=this.props.userResponse.credentials.roles;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(r.f,{onClick:()=>o.a.goBack(),variant:"ghost",color:"secondary",className:"d-flex align-items-center",children:[Object(b.jsx)(l.b,{size:20}),Object(b.jsx)("span",{className:"ms-2",children:"back"})]}),t&&Object(b.jsx)("div",{className:"form-group d-flex justify-content-center align-items-center",children:Object(b.jsx)("div",{className:"alert alert-danger",role:"alert",children:t})}),s?Object(b.jsx)(b.Fragment,{}):Object(b.jsxs)("div",{className:"mb-4",children:[v.roleName===u.a.SUPER_ADMIN||v.roleName===u.a.ADMIN?Object(b.jsx)("div",{className:"d-flex align-items-end flex-row-reverse m-2  d-none d-lg-flex",children:Object(b.jsx)(p.a,{trigger:()=>Object(b.jsx)(r.f,{color:"info",className:"d-flex align-items-center",children:Object(b.jsx)(l.c,{size:20})}),content:()=>this.componentRef})}):Object(b.jsx)(b.Fragment,{}),Object(b.jsxs)("div",{ref:e=>this.componentRef=e,className:"ps-4 pe-4 pt-3",children:[Object(b.jsx)(r.i,{className:"border-envelope",children:Object(b.jsxs)(r.j,{children:[Object(b.jsx)("h5",{className:"text-black-50",children:"Customer Address"}),Object(b.jsxs)("h6",{children:[Object(b.jsx)("span",{className:"mb-2 text-black-50 me-2 font-style ",children:"Name:"}),f+" "+N]}),Object(b.jsxs)("h6",{children:[Object(b.jsx)("span",{className:"mb-2 text-black-50 me-2  font-style ",children:"Contact:"}),d]}),Object(b.jsxs)("h6",{children:[Object(b.jsx)("span",{className:"mb-2 text-black-50 me-2  font-style ",children:"Address:"}),"# "+m+", "+j+", "+g+", "+x+", "+O]})]})}),Object(b.jsxs)(r.i,{className:"mt-3",children:[Object(b.jsx)(r.m,{children:Object(b.jsxs)("span",{style:{fontSize:"14px",fontWeight:"400"},className:"text-black-50",children:["Order ID: ",e&&e.orderId]})}),Object(b.jsx)(r.j,{children:Object(b.jsx)(r.s,{children:e.orderItems&&e.orderItems.map(((e,t)=>Object(b.jsx)(i.a,{item:e},t)))})})]}),Object(b.jsxs)(r.i,{className:"mt-3",children:[Object(b.jsx)(r.m,{children:Object(b.jsx)("h5",{className:"text-black-50",children:"Summary Payment Details"})}),Object(b.jsxs)(r.j,{className:"d-flex justify-content-between",children:[Object(b.jsxs)("div",{className:"d-flex justify-content-center flex-column",children:[Object(b.jsx)("a",{onClick:this.downloadQRCode,style:{cursor:"pointer"},children:Object(b.jsx)(h.a,{id:"qrCodeEl",value:String(R),includeMargin:!0})}),Object(b.jsx)(r.f,{onClick:this.downloadQRCode,color:"link",children:"Download QR"})]}),Object(b.jsxs)("div",{className:"d-flex flex-column",children:[Object(b.jsxs)("div",{className:"font-style mt-2",children:[Object(b.jsx)("span",{className:"text-black-50 me-2",children:"Date of Ordered:"}),Object(b.jsx)("span",{className:"font-style",children:e.orderedAt})]}),Object(b.jsxs)("div",{className:"font-style mt-2",children:[Object(b.jsx)("span",{className:"text-black-50 me-2 font-style",children:"Payment Method:"}),Object(b.jsx)("span",{className:"font-style",children:e.paymentMethod&&e.paymentMethod.paymentMethod})]}),Object(b.jsxs)("div",{className:"font-style mt-2",children:[Object(b.jsx)("span",{className:"text-black-50 me-2 font-style",children:"Order Status:"}),Object(b.jsx)("span",{className:"text-danger",children:e.orderStatus})]}),Object(b.jsxs)("div",{className:"mt-2",children:[Object(b.jsx)("span",{className:" font-style text-black-50 me-2",children:"Total Amount"}),Object(b.jsxs)("span",{className:"font-style",children:["\u20b1",e.totalAmount&&e.totalAmount.toFixed(2)]})]})]})]})]})]})]})]})}}t.default=Object(c.b)((e=>({orderResponse:e.orderResponse,messageResponse:e.messageResponse,userResponse:e.userResponse})),{getOrderByOrderId:d.a,clearMessage:n.a})(x)}}]);
//# sourceMappingURL=52.7d48a24c.chunk.js.map