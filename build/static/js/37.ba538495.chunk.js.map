{"version":3,"sources":["components/modals/product/ProductEditorModal.js","../../src/utils.ts","../../src/constants.ts","../../src/index.tsx","../../src/validation.ts"],"names":["ProductEditorModal","Component","constructor","props","super","productDetail","productName","productPrice","productDescriptions","barcode","brandName","brandId","categoryName","categoryId","threshold","productId","onResetValue","this","setState","getCategories","catch","status","data","messageResponse","message","getBrands","failMessage","componentDidUpdate","prevProps","prevState","manageModalVisible","manageBrandsResponse","manageCategoryResponse","manageScannerResponse","brandResponse","action","brands","categoryResponse","categories","modalVisibleResponse","visible","icon","console","log","product","productDescription","brand","category","fileImages","id","inventory","name","editorState","EditorState","createWithContent","convertFromRaw","JSON","parse","createEmpty","getImages","clearMessage","productImage","removedImages","loadImage","image","fileName","state","reader","FileReader","onloadend","push","data_url","result","file","image_created","filename","readAsDataURL","handleVisibility","handleImageOnchange","imageList","addUpdateIndex","onEditorStateChange","getCurrentContent","handleOnChange","event","target","value","handleSubmit","preventDefault","loading","saveProduct","editProduct","productData","FormData","getThreshold","undefined","length","i","append","stringify","convertToRaw","then","successFully","setProductModal","updateProduct","scannerResponse","decoded","removeImage","bind","alert","productDetails","images","autoGenerateBarcode","componentDidMount","ProductApiService","getImage","path","response","error","error_message","toString","code","index","render","styleOption","fontWeight","fontSize","size","fullscreen","scrollable","onDismiss","className","onSubmit","role","color","dismissible","multiple","onChange","maxNumber","dataURLKey","onError","toastVisible","acceptType","onImageUpload","onImageRemove","isDragging","dragProps","style","backgroundColor","border","onClick","map","sm","md","lg","src","alt","width","type","placeholder","required","htmlFor","disabled","variant","setScanModal","wrapperClassName","editorClassName","toolbar","options","form","connect","credentials","userResponse","productResponse","productResponser","getDecodedBarcode"],"mappings":"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","file":"static/js/37.ba538495.chunk.js","sourcesContent":["import React, { Component } from \"react\"\nimport { connect } from \"react-redux\"\nimport {\n  CModal,\n  CModalHeader,\n  CModalTitle,\n  CModalBody,\n  CModalFooter,\n  CButton,\n  CContainer,\n  CRow,\n  CCol,\n  CAlert,\n  CFormFloating,\n  CFormControl,\n  CFormLabel,\n  CForm,\n  CSpinner,\n  CFormSelect,\n} from \"@coreui/react\"\n\n//icons\n// import * as FaIcons from 'react-icons/fa'\nimport { MdDelete } from \"react-icons/md\"\nimport * as BiIcons from \"react-icons/bi\"\n\n// npm packages\nimport ImageUploading from \"react-images-uploading\"\nimport { convertFromRaw, convertToRaw, EditorState } from \"draft-js\"\nimport { Editor } from \"react-draft-wysiwyg\"\n\n// action\nimport { saveProduct } from \"src/service/apiActions/productAction/productAction\"\nimport { setProductModal } from \"../../../service/apiActions/modalAction/modalAction\"\nimport { clearMessage } from \"src/service/apiActions/messageAction/messageAction\"\nimport { getImage } from \"src/service/apiActions/productAction/productAction\"\nimport { getCategories } from \"src/service/apiActions/categoryAction/categoryAction\"\nimport { getBrands } from \"src/service/apiActions/brandAction/brandAction\"\nimport { updateProduct } from \"src/service/apiActions/productAction/productAction\"\n//api\nimport ProductApiService from \"src/service/restAPI/ProductApiService\"\nimport ScanBarcodeModal from \"../scanBarcode/ScanBarcodeModal\"\nimport { setScanModal } from \"../../../service/apiActions/modalAction/modalAction\"\nimport { getDecodedBarcode } from \"src/service/apiActions/scannerAction/scannerAction\"\nexport class ProductEditorModal extends Component {\n  constructor(props) {\n    super(props)\n\n    this.removeImage = this.removeImage.bind(this)\n\n    this.state = {\n      visible: false,\n      alert: true,\n      loading: false,\n      successFully: false,\n      message: \"\",\n      status: \"\",\n      productDetails: this.productDetail,\n      action: \"\",\n      icon: \"\",\n      images: [],\n      productImage: [],\n      removedImages: [],\n\n      editorState: EditorState.createEmpty(),\n      autoGenerateBarcode: false,\n      brands: [],\n      categories: [],\n    }\n  }\n\n  productDetail = {\n    productName: \"\",\n    productPrice: 0,\n    productDescriptions: \"\",\n    barcode: \"\",\n    brandName: \"\",\n    brandId: \"\",\n    categoryName: \"\",\n    categoryId: \"\",\n    threshold: 0,\n    productId: \"\",\n  }\n  onResetValue = () => {\n    this.setState(() => this.productDetail)\n  }\n  componentDidMount() {\n    this.loadImage()\n    this.getBrands()\n    this.getCategories()\n  }\n  getCategories = () => {\n    this.props.getCategories().catch(() => {\n      let { status, data } = this.props.messageResponse\n      this.setState({\n        message: data.message,\n      })\n    })\n  }\n  getBrands = () => {\n    this.props.getBrands().catch(() => {\n      let failMessage = this.props.messageResponse\n      this.setState({\n        message: failMessage.data.message,\n      })\n    })\n  }\n\n  componentDidUpdate = (prevProps, prevState) => {\n    this.manageModalVisible(prevProps, prevState)\n    this.manageBrandsResponse(prevProps, prevState)\n    this.manageCategoryResponse(prevProps, prevState)\n    this.manageScannerResponse(prevProps, prevState)\n  }\n  manageBrandsResponse = (prevProps, prevState) => {\n    if (prevProps.brandResponse !== this.props.brandResponse) {\n      let { status, action, data } = this.props.brandResponse\n      if (status === 200 && action === \"GETBRANDS\") {\n        this.setState({\n          brands: data.brands,\n        })\n      }\n    }\n  }\n  manageCategoryResponse = (prevProps, prevState) => {\n    if (prevProps.categoryResponse !== this.props.categoryResponse) {\n      let { action, data, status } = this.props.categoryResponse\n      if (action === \"GET_CATEGORIES\" && status === 200) {\n        this.setState({\n          categories: data.categories,\n        })\n      }\n    }\n  }\n  manageModalVisible = (prevProps, prevState) => {\n    if (prevProps.modalVisibleResponse !== this.props.modalVisibleResponse) {\n      let { action, visible, icon } = this.props.modalVisibleResponse\n      console.log(this.props.modalVisibleResponse)\n      if (action === \"Add\") {\n        this.setState({\n          visible: visible,\n          action: action,\n          icon: icon,\n        })\n      } else if (action === \"Edit\") {\n        let { product, action, visible, icon } = this.props.modalVisibleResponse\n        console.log(product);\n        let {\n          productName,\n          productDescription,\n          barcode,\n          productPrice,\n          brand,\n          category,\n          fileImages,\n          id,\n        } = product.product\n        const { threshold } = product.inventory\n        this.setState({\n          visible: visible,\n          action: action,\n          icon: icon,\n          productName: productName,\n          productPrice: productPrice,\n          barcode: barcode,\n          brandName: brand && brand.brand,\n          categoryName: category && category.name,\n          productId: id,\n          threshold: threshold,\n          editorState: productDescription\n            ? EditorState.createWithContent(\n              convertFromRaw(JSON.parse(productDescription)),\n            )\n            : EditorState.createEmpty(),\n        })\n\n        this.getImages(fileImages)\n      } else if (action === \"close\") {\n        this.props.clearMessage()\n        this.setState({\n          visible: this.props.modalVisibleResponse.visible,\n          productName: \"\",\n          productPrice: \"\",\n          barcode: \"\",\n          brandName: \"\",\n          categoryName: \"\",\n          editorState: EditorState.createEmpty(),\n          productImage: [],\n          removedImages: [],\n          threshold: 0\n        })\n      }\n    }\n  }\n  async getImages(fileImages) {\n    for (let i = 0;i < fileImages.length;i++) {\n      ProductApiService.getImage(fileImages[i].path, fileImages[i].fileName)\n        .then((response) => {\n          this.loadImage(response.data, fileImages[i].fileName)\n        })\n        .catch((error) => {\n          const message =\n            (error.response &&\n              error.response.data &&\n              error.response.data.message) ||\n            error.message ||\n            error.error_message ||\n            error.toString()\n\n          const status =\n            (error.response &&\n              error.response.data &&\n              error.response.data.code) ||\n            error.status ||\n            error.toString()\n          this.setState({\n            status: status,\n            message: message,\n          })\n        })\n    }\n  }\n\n  loadImage = (image, fileName) => {\n    let { productImage } = this.state\n    if (!image) {\n      return\n    }\n    let reader = new FileReader()\n    reader.onloadend = () => {\n      productImage.push({\n        data_url: reader.result,\n        file: null,\n        image_created: true,\n        filename: fileName,\n      })\n      this.setState({\n        productImage: productImage,\n      })\n    }\n    if (image) {\n      reader.readAsDataURL(image)\n    }\n  }\n\n  handleVisibility = (state) => {\n    this.setState({\n      visible: false,\n    })\n  }\n\n  handleImageOnchange = (imageList, addUpdateIndex) => {\n    this.setState({\n      productImage: imageList,\n    })\n  }\n\n  onEditorStateChange = (editorState) => {\n    const rawState = editorState.getCurrentContent()\n    this.setState({\n      editorState,\n    })\n  }\n\n  handleOnChange = (event) => {\n    let name = event.target.name\n    this.setState({\n      [name]: event.target.value,\n    })\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault()\n\n    let { action } = this.state\n\n    this.setState({\n      loading: true,\n    })\n\n    if (action === \"Add\") {\n      this.saveProduct()\n    } else if (action === \"Edit\") {\n      this.editProduct()\n    } else {\n      this.setState({\n        visible: this.props.modalVisibleResponse.visible,\n      })\n    }\n  }\n\n  saveProduct = () => {\n    let {\n      productName,\n      productPrice,\n      productImage,\n      barcode,\n      editorState,\n      categoryName,\n      brandName,\n      threshold\n    } = this.state\n    let productData = new FormData()\n    const getThreshold = typeof threshold === undefined ? 0 : threshold;\n    this.setState({ threshold: getThreshold })\n    if (productImage.length > 0) {\n      for (let i = 0;i < productImage.length;i++) {\n        if (productImage[i].file) {\n          productData.append(\"productImages[]\", productImage[i].file)\n        }\n      }\n    } else {\n      productData.append(\"productImages[]\", productImage)\n    }\n\n    productData.append(\"barcode\", barcode)\n    productData.append(\"productName\", productName)\n    productData.append(\"productPrice\", productPrice)\n    productData.append(\"brandName\", brandName)\n    productData.append(\"categoryName\", categoryName)\n    productData.append(\"threshold\", getThreshold)\n    productData.append(\n      \"productDescription\",\n      JSON.stringify(convertToRaw(editorState.getCurrentContent())),\n    )\n    this.props\n      .saveProduct(productData)\n      .then(() => {\n        this.onResetValue()\n        const successMessage = this.props.messageResponse\n        if (successMessage.status === 200) {\n          this.setState({\n            loading: false,\n            successFully: true,\n            editorState: EditorState.createEmpty(),\n            productImage: [],\n\n          })\n        } else {\n          this.setState({\n            loading: false,\n            productImage: [],\n            successFully: false,\n            editorState: EditorState.createEmpty(),\n          })\n        }\n        this.props.setProductModal(false, \"close\")\n\n      })\n      .catch(() => {\n        this.onResetValue()\n        this.setState({\n          loading: false,\n          productImage: [],\n          editorState: EditorState.createEmpty(),\n        })\n      })\n  }\n\n  editProduct = () => {\n    let {\n      productName,\n      productPrice,\n      productImage,\n      barcode,\n      editorState,\n      categoryName,\n      brandName,\n      productId,\n      removedImages,\n      threshold\n    } = this.state\n    let productData = new FormData()\n    const getThreshold = typeof threshold === undefined ? 0 : threshold;\n    this.setState({ threshold: getThreshold })\n    if (productImage.length > 0) {\n      for (let i = 0;i < productImage.length;i++) {\n        if (productImage[i].file) {\n          productData.append(\"productImages[]\", productImage[i].file)\n        }\n      }\n    } else {\n      productData.append(\"productImages[]\", productImage)\n    }\n\n    productData.append(\"removedImages[]\", removedImages)\n    productData.append(\"barcode\", barcode)\n    productData.append(\"productName\", productName)\n    productData.append(\"productPrice\", productPrice)\n    productData.append(\"brandName\", brandName)\n    productData.append(\"threshold\", getThreshold)\n    productData.append(\"categoryName\", categoryName)\n    productData.append(\n      \"productDescription\",\n      JSON.stringify(convertToRaw(editorState.getCurrentContent())),\n    )\n    this.props\n      .updateProduct(productId, productData)\n      .then(() => {\n        const { status } = this.props.messageResponse\n        if (status === 200) {\n          this.setState({\n            loading: false,\n            successFully: true,\n          })\n        } else {\n          this.setState({\n            loading: false,\n            successFully: false,\n          })\n        }\n        this.props.setProductModal(false, \"close\")\n\n      })\n      .catch(() => {\n        let { status, data } = this.props.messageResponse\n        this.setState({\n          loading: false,\n        })\n      })\n  }\n\n  removeImage(index) {\n    let { productImage, removedImages } = this.state\n    if (productImage[index].filename) {\n      removedImages.push(productImage[index].filename)\n    }\n  }\n  manageScannerResponse = (prevProps, prevState) => {\n    if (prevProps.scannerResponse !== this.props.scannerResponse) {\n      let { action, decoded } = this.props.scannerResponse\n      console.log(this.props.scannerResponse)\n\n      if (action === \"inputBarcode\") {\n        this.setState({ barcode: decoded })\n      }\n    }\n  }\n  render() {\n    let {\n      visible,\n      alert,\n      productName,\n      productPrice,\n      productImage,\n      barcode,\n      editorState,\n      loading,\n      successFully,\n      message,\n      action,\n      icon,\n      categoryName,\n      categoryId,\n      brandName,\n      brandId,\n      threshold,\n      autoGenerateBarcode,\n      brands,\n      categories,\n    } = this.state\n    const styleOption = {\n      fontWeight: \"600\",\n      fontSize: \"16px\",\n    }\n    return (\n      <>\n        <ScanBarcodeModal />\n        <CModal size=\"xl\" visible={visible} fullscreen=\"lg\" scrollable>\n          <CModalHeader\n            onDismiss={() => {\n              this.props.setProductModal(false, \"close\")\n            }}\n            className=\"modal-header\"\n          >\n            <CModalTitle>{action} Product</CModalTitle>\n          </CModalHeader>\n          <CForm\n            onSubmit={this.handleSubmit}\n            className=\"modal-product-form\"\n            id=\"a-form\"\n          >\n            <CModalBody>\n              {message && (\n                <div className=\"form-group\">\n                  <div\n                    className={\n                      successFully\n                        ? \"alert alert-success\"\n                        : \"alert alert-danger\"\n                    }\n                    role=\"alert\"\n                  >\n                    {message}\n                  </div>\n                </div>\n              )}\n              <CAlert color=\"warning\" dismissible visible={alert}>\n                <strong>Maximum 10 images</strong>\n              </CAlert>\n              <ImageUploading\n                multiple\n                value={productImage}\n                onChange={this.handleImageOnchange}\n                maxNumber={10}\n                dataURLKey=\"data_url\"\n                onError={() =>\n                  this.setState({\n                    toastVisible: false,\n                  })\n                }\n                acceptType={[\"jpg\", \"gif\", \"png\"]}\n              >\n                {({\n                  imageList,\n                  onImageUpload,\n                  // onImageUpdate,\n                  onImageRemove,\n                  isDragging,\n                  dragProps,\n                }) => (\n                  // write your building UI\n                  <div className=\"upload__image-wrapper\">\n                    <CContainer className=\"upload-container\">\n                      <CButton\n                        color=\"secondary\"\n                        className=\"upload-btn\"\n                        style={\n                          isDragging\n                            ? {\n                                backgroundColor: \"#8E9293\",\n                                border: \"4px dashed #ffffff\",\n                              }\n                            : undefined\n                        }\n                        onClick={onImageUpload}\n                        {...dragProps}\n                      >\n                        Select Image or Drag Here\n                      </CButton>\n                    </CContainer>\n                    <CRow className=\" images-contianer shadow \">\n                      {imageList.map((image, index) => (\n                        <CCol key={index} sm=\"4\" md=\"2\" lg=\"3\">\n                          <div className=\"image-item d-flex \">\n                            <img src={image[\"data_url\"]} alt=\"\" width=\"100\" />\n                            <div className=\"image-item__btn-wrapper\">\n                              {/* <RiEdit2Line\n                                size={30}\n                                color=\"#007CFF\"\n                                onClick={() => onImageUpdate(index)}\n                              /> */}\n                              <MdDelete\n                                size={30}\n                                color=\"#FF0000\"\n                                onClick={() => {\n                                  this.removeImage(index)\n                                  onImageRemove(index)\n                                }}\n                              />\n                            </div>\n                          </div>\n                        </CCol>\n                      ))}\n                    </CRow>\n                  </div>\n                )}\n              </ImageUploading>\n              <CRow className=\"mt-5\">\n                <CCol sm=\"12\" md=\"6\" lg>\n                  <CFormFloating className=\"mb-3\">\n                    <CFormControl\n                      type=\"text\"\n                      id=\"floatingInputProductName\"\n                      placeholder=\"Product Name\"\n                      name=\"productName\"\n                      value={productName}\n                      onChange={this.handleOnChange}\n                      required\n                    />\n                    <CFormLabel htmlFor=\"floatingInputProductName\">\n                      Product Name\n                    </CFormLabel>\n                  </CFormFloating>\n                </CCol>\n                <CCol sm=\"12\" md=\"6\" lg>\n                  <CFormFloating className=\"mb-3\">\n                    <CFormControl\n                      type=\"number\"\n                      id=\"floatingProductPrice\"\n                      placeholder=\"Product Price\"\n                      name=\"productPrice\"\n                      value={productPrice}\n                      onChange={this.handleOnChange}\n                      required\n                    />\n                    <CFormLabel htmlFor=\"floatingInput\">\n                      Product Price\n                    </CFormLabel>\n                  </CFormFloating>\n                </CCol>\n                <CCol sm=\"12\" md=\"6\" lg>\n                  <div className=\"d-flex align-items-center justify-content-between\">\n                    <CFormFloating className=\"mb-3 w-100\">\n                      <CFormControl\n                        type=\"number\"\n                        id=\"floatingBarcode\"\n                        placeholder=\"Product Barcode\"\n                        name=\"barcode\"\n                        value={barcode}\n                        onChange={this.handleOnChange}\n                        required\n                        disabled={action === \"Edit\" ? true : false}\n                        // disabled={autoGenerateBarcode}\n                      />\n                      <CFormLabel htmlFor=\"floatingBarcode\">\n                        Product Barcode\n                      </CFormLabel>\n                    </CFormFloating>\n                    <div>\n                      <CButton\n                        className=\"pt-2 pb-2 ms-2\"\n                        type=\"button\"\n                        color=\"info\"\n                        variant=\"outline\"\n                        id=\"btn-scan-barcode\"\n                        onClick={() =>\n                          this.props.setScanModal(!false, \"inputBarcode\")\n                        }\n                      >\n                        <BiIcons.BiBarcodeReader size=\"24\" />\n                      </CButton>\n                    </div>\n                  </div>\n\n                  {/* <CRow className=\"align-items-end\">\n                    <CCol sm=\"8\" md=\"8\" lg=\"8\">\n                      <CFormFloating className=\"mb-3\">\n                        <CFormControl\n                          type=\"number\"\n                          id=\"floatingBarcode\"\n                          placeholder=\"Product Barcode\"\n                          name=\"barcode\"\n                          value={barcode}\n                          onChange={this.handleOnChange}\n                          required\n                          disabled={autoGenerateBarcode}\n                        />\n                        <CFormLabel htmlFor=\"floatingBarcode\">\n                          Product Barcode\n                        </CFormLabel>\n                      </CFormFloating>\n                    </CCol>\n                    <CCol sm=\"4\" md=\"4\" lg=\"4\">\n                      <CFormCheck\n                        value={autoGenerateBarcode}\n                        onChange={() =>\n                          this.setState({\n                            autoGenerateBarcode: !autoGenerateBarcode,\n                          })\n                        }\n                        name=\"autoGenerateBarcode\"\n                        className=\"mb-3\"\n                        id=\"autoGenerateBarcode\"\n                        label=\"Generate Barcode\"\n                      />\n                    </CCol>\n                  </CRow> */}\n                </CCol>\n                <CCol sm=\"12\" md=\"6\" lg>\n                  <CFormFloating className=\"mb-3\">\n                    <CFormControl\n                      type=\"number\"\n                      id=\"floatingThreshold\"\n                      placeholder=\"Product Threshold\"\n                      name=\"threshold\"\n                      value={threshold}\n                      onChange={this.handleOnChange}\n                    />\n                    <CFormLabel htmlFor=\"floatingThreshold\">\n                      Stock Threshold\n                    </CFormLabel>\n                  </CFormFloating>\n                </CCol>\n                <CCol sm=\"12\" md=\"6\" lg>\n                  <CFormFloating className=\"mb-3\">\n                    <CFormSelect\n                      value={brandName}\n                      onChange={this.handleOnChange}\n                      name=\"brandName\"\n                      id=\"floatingSelectBrand\"\n                      aria-label=\"Brand Names\"\n                      required\n                    >\n                      <option value=\"\" disabled>\n                        -- Choose Brand --\n                      </option>\n                      {brands.data &&\n                        brands.data.map((brand, index) => {\n                          return (\n                            <option\n                              key={index}\n                              value={brand.brandName}\n                              style={{ ...styleOption }}\n                            >\n                              {brand.brandName}\n                            </option>\n                          )\n                        })}\n                    </CFormSelect>\n                    <CFormLabel htmlFor=\"floatingSelectBrand\">Brand</CFormLabel>\n                  </CFormFloating>\n                </CCol>\n                <CCol sm=\"12\" md=\"6\" lg>\n                  <CFormFloating className=\"mb-3\">\n                    <CFormSelect\n                      value={categoryName}\n                      onChange={this.handleOnChange}\n                      name=\"categoryName\"\n                      id=\"floatingSelectCategory\"\n                      aria-label=\"Categories\"\n                      required\n                    >\n                      <option value=\"\" disabled>\n                        -- Choose Category --\n                      </option>\n                      {categories.data &&\n                        categories.data.map((category, index) => {\n                          return (\n                            <option\n                              key={index}\n                              value={category.categoryName}\n                              style={{ ...styleOption }}\n                            >\n                              {category.categoryName}\n                            </option>\n                          )\n                        })}\n                    </CFormSelect>\n                    <CFormLabel htmlFor=\"floatingSelectCategory\">\n                      Category\n                    </CFormLabel>\n                  </CFormFloating>\n                </CCol>\n\n                <CCol sm=\"12\" md=\"12\" lg=\"12\">\n                  <Editor\n                    editorState={editorState}\n                    wrapperClassName=\"editor-wrapper\"\n                    editorClassName=\"editor\"\n                    onEditorStateChange={this.onEditorStateChange}\n                    placeholder=\"Product Description\"\n                    toolbar={{\n                      options: [\n                        \"inline\",\n                        \"blockType\",\n                        \"fontSize\",\n                        \"fontFamily\",\n                        \"list\",\n                        \"textAlign\",\n                        \"colorPicker\",\n                        \"emoji\",\n                        \"remove\",\n                        \"history\",\n                      ],\n                    }}\n                  />\n                </CCol>\n              </CRow>\n            </CModalBody>\n          </CForm>\n          <CModalFooter className=\"modal-footer\">\n            <CButton\n              color=\"secondary\"\n              variant=\"ghost\"\n              onClick={() => this.props.setProductModal(!visible, \"close\")}\n              className=\"text-body\"\n            >\n              Close\n            </CButton>\n            <CButton\n              type=\"submit\"\n              color=\"info\"\n              form=\"a-form\"\n              className=\"d-flex justify-content-center align-items-center position-relative \"\n              disabled={loading}\n            >\n              {loading ? (\n                <CSpinner size=\"sm\" />\n              ) : (\n                <span className=\"d-flex align-items-center login-icon me-2\">\n                  {icon}\n                </span>\n              )}\n              {action === \"Edit\" ? \"Update\" : \"Create\"} Product\n            </CButton>\n          </CModalFooter>\n        </CModal>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    modalVisibleResponse: state.modalVisibleResponse,\n    messageResponse: state.messageResponse,\n    credentials: state.userResponse.credentials,\n    productResponse: state.productResponser,\n    brandResponse: state.brandResponse,\n    categoryResponse: state.categoryResponse,\n    scannerResponse: state.scannerResponse,\n  }\n}\nexport default connect(mapStateToProps, {\n  setProductModal,\n  saveProduct,\n  clearMessage,\n  getImage,\n  getCategories,\n  getBrands,\n  updateProduct,\n  setScanModal,\n  getDecodedBarcode,\n})(ProductEditorModal)\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getListFiles = exports.getImage = exports.getBase64 = exports.getAcceptTypeString = exports.openFileDialog = void 0;\r\nexports.openFileDialog = function (inputRef) {\r\n    if (inputRef.current)\r\n        inputRef.current.click();\r\n};\r\nexports.getAcceptTypeString = function (acceptType) {\r\n    return acceptType && acceptType.length > 0\r\n        ? acceptType.map(function (item) { return \".\" + item; }).join(', ')\r\n        : 'image/*';\r\n};\r\nexports.getBase64 = function (file) {\r\n    var reader = new FileReader();\r\n    return new Promise(function (resolve) {\r\n        reader.addEventListener('load', function () { return resolve(String(reader.result)); });\r\n        reader.readAsDataURL(file);\r\n    });\r\n};\r\nexports.getImage = function (file) {\r\n    var image = new Image();\r\n    return new Promise(function (resolve) {\r\n        image.addEventListener('load', function () { return resolve(image); });\r\n        image.src = URL.createObjectURL(file);\r\n    });\r\n};\r\nexports.getListFiles = function (files, dataURLKey) {\r\n    var promiseFiles = [];\r\n    for (var i = 0; i < files.length; i += 1) {\r\n        promiseFiles.push(exports.getBase64(files[i]));\r\n    }\r\n    return Promise.all(promiseFiles).then(function (fileListBase64) {\r\n        var fileList = fileListBase64.map(function (base64, index) {\r\n            var _a;\r\n            return (_a = {},\r\n                _a[dataURLKey] = base64,\r\n                _a.file = files[index],\r\n                _a);\r\n        });\r\n        return fileList;\r\n    });\r\n};\r\n//# sourceMappingURL=utils.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DEFAULT_DATA_URL_KEY = exports.INIT_MAX_NUMBER = exports.DEFAULT_NULL_INDEX = void 0;\r\nexports.DEFAULT_NULL_INDEX = -1;\r\nexports.INIT_MAX_NUMBER = 1000;\r\nexports.DEFAULT_DATA_URL_KEY = 'dataURL';\r\n//# sourceMappingURL=constants.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = __importStar(require(\"react\"));\r\nvar utils_1 = require(\"./utils\");\r\nvar validation_1 = require(\"./validation\");\r\nvar constants_1 = require(\"./constants\");\r\nvar ReactImageUploading = function (_a) {\r\n    var _b = _a.value, value = _b === void 0 ? [] : _b, onChange = _a.onChange, onError = _a.onError, children = _a.children, _c = _a.dataURLKey, dataURLKey = _c === void 0 ? constants_1.DEFAULT_DATA_URL_KEY : _c, _d = _a.multiple, multiple = _d === void 0 ? false : _d, _e = _a.maxNumber, maxNumber = _e === void 0 ? constants_1.INIT_MAX_NUMBER : _e, acceptType = _a.acceptType, maxFileSize = _a.maxFileSize, resolutionWidth = _a.resolutionWidth, resolutionHeight = _a.resolutionHeight, resolutionType = _a.resolutionType, _f = _a.inputProps, inputProps = _f === void 0 ? {} : _f;\r\n    var inValue = value || [];\r\n    var inputRef = react_1.useRef(null);\r\n    var _g = react_1.useState(constants_1.DEFAULT_NULL_INDEX), keyUpdate = _g[0], setKeyUpdate = _g[1];\r\n    var _h = react_1.useState(null), errors = _h[0], setErrors = _h[1];\r\n    var _j = react_1.useState(false), isDragging = _j[0], setIsDragging = _j[1];\r\n    var handleClickInput = react_1.useCallback(function () { return utils_1.openFileDialog(inputRef); }, [\r\n        inputRef,\r\n    ]);\r\n    var onImageUpload = react_1.useCallback(function () {\r\n        setKeyUpdate(constants_1.DEFAULT_NULL_INDEX);\r\n        handleClickInput();\r\n    }, [handleClickInput]);\r\n    var onImageRemoveAll = react_1.useCallback(function () {\r\n        onChange === null || onChange === void 0 ? void 0 : onChange([]);\r\n    }, [onChange]);\r\n    var onImageRemove = function (index) {\r\n        var updatedList = __spreadArrays(inValue);\r\n        if (Array.isArray(index)) {\r\n            index.forEach(function (i) {\r\n                updatedList.splice(i, 1);\r\n            });\r\n        }\r\n        else {\r\n            updatedList.splice(index, 1);\r\n        }\r\n        onChange === null || onChange === void 0 ? void 0 : onChange(updatedList);\r\n    };\r\n    var onImageUpdate = function (index) {\r\n        setKeyUpdate(index);\r\n        handleClickInput();\r\n    };\r\n    var validate = function (fileList) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var errorsValidation;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, validation_1.getErrorValidation({\r\n                        fileList: fileList,\r\n                        maxFileSize: maxFileSize,\r\n                        maxNumber: maxNumber,\r\n                        acceptType: acceptType,\r\n                        keyUpdate: keyUpdate,\r\n                        resolutionType: resolutionType,\r\n                        resolutionWidth: resolutionWidth,\r\n                        resolutionHeight: resolutionHeight,\r\n                        value: inValue,\r\n                    })];\r\n                case 1:\r\n                    errorsValidation = _a.sent();\r\n                    if (errorsValidation) {\r\n                        setErrors(errorsValidation);\r\n                        onError === null || onError === void 0 ? void 0 : onError(errorsValidation, fileList);\r\n                        return [2 /*return*/, false];\r\n                    }\r\n                    errors && setErrors(null);\r\n                    return [2 /*return*/, true];\r\n            }\r\n        });\r\n    }); };\r\n    var handleChange = function (files) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var fileList, checkValidate, updatedFileList, updatedIndexes, firstFile, i;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!files)\r\n                        return [2 /*return*/];\r\n                    return [4 /*yield*/, utils_1.getListFiles(files, dataURLKey)];\r\n                case 1:\r\n                    fileList = _a.sent();\r\n                    if (!fileList.length)\r\n                        return [2 /*return*/];\r\n                    return [4 /*yield*/, validate(fileList)];\r\n                case 2:\r\n                    checkValidate = _a.sent();\r\n                    if (!checkValidate)\r\n                        return [2 /*return*/];\r\n                    updatedIndexes = [];\r\n                    if (keyUpdate > constants_1.DEFAULT_NULL_INDEX) {\r\n                        firstFile = fileList[0];\r\n                        updatedFileList = __spreadArrays(inValue);\r\n                        updatedFileList[keyUpdate] = firstFile;\r\n                        updatedIndexes.push(keyUpdate);\r\n                    }\r\n                    else if (multiple) {\r\n                        updatedFileList = __spreadArrays(inValue, fileList);\r\n                        for (i = inValue.length; i < updatedFileList.length; i += 1) {\r\n                            updatedIndexes.push(i);\r\n                        }\r\n                    }\r\n                    else {\r\n                        updatedFileList = [fileList[0]];\r\n                        updatedIndexes.push(0);\r\n                    }\r\n                    onChange === null || onChange === void 0 ? void 0 : onChange(updatedFileList, updatedIndexes);\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n    var onInputChange = function (e) { return __awaiter(void 0, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, handleChange(e.target.files)];\r\n                case 1:\r\n                    _a.sent();\r\n                    keyUpdate > constants_1.DEFAULT_NULL_INDEX && setKeyUpdate(constants_1.DEFAULT_NULL_INDEX);\r\n                    if (inputRef.current)\r\n                        inputRef.current.value = '';\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n    var acceptTypeString = react_1.useMemo(function () { return utils_1.getAcceptTypeString(acceptType); }, [\r\n        acceptType,\r\n    ]);\r\n    var handleDrag = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    };\r\n    var handleDragIn = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\r\n            setIsDragging(true);\r\n        }\r\n    };\r\n    var handleDragOut = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsDragging(false);\r\n    };\r\n    var handleDrop = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsDragging(false);\r\n        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n            handleChange(e.dataTransfer.files);\r\n        }\r\n    };\r\n    var handleDragStart = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        e.dataTransfer.clearData();\r\n    };\r\n    return (react_1.default.createElement(react_1.default.Fragment, null,\r\n        react_1.default.createElement(\"input\", __assign({ type: \"file\", accept: acceptTypeString, ref: inputRef, multiple: multiple && keyUpdate === constants_1.DEFAULT_NULL_INDEX, onChange: onInputChange, style: { display: 'none' } }, inputProps)), children === null || children === void 0 ? void 0 :\r\n        children({\r\n            imageList: inValue,\r\n            onImageUpload: onImageUpload,\r\n            onImageRemoveAll: onImageRemoveAll,\r\n            onImageUpdate: onImageUpdate,\r\n            onImageRemove: onImageRemove,\r\n            errors: errors,\r\n            dragProps: {\r\n                onDrop: handleDrop,\r\n                onDragEnter: handleDragIn,\r\n                onDragLeave: handleDragOut,\r\n                onDragOver: handleDrag,\r\n                onDragStart: handleDragStart,\r\n            },\r\n            isDragging: isDragging,\r\n        })));\r\n};\r\nexports.default = ReactImageUploading;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getErrorValidation = exports.isMaxNumberValid = exports.isAcceptTypeValid = exports.isMaxFileSizeValid = exports.isImageValid = exports.isResolutionValid = void 0;\r\nvar constants_1 = require(\"./constants\");\r\nvar utils_1 = require(\"./utils\");\r\nexports.isResolutionValid = function (image, resolutionType, resolutionWidth, resolutionHeight) {\r\n    if (resolutionWidth === void 0) { resolutionWidth = 0; }\r\n    if (resolutionHeight === void 0) { resolutionHeight = 1; }\r\n    if (!resolutionWidth || !resolutionHeight || !image.width || !image.height)\r\n        return true;\r\n    switch (resolutionType) {\r\n        case 'absolute': {\r\n            if (image.width === resolutionWidth && image.height === resolutionHeight)\r\n                return true;\r\n            break;\r\n        }\r\n        case 'ratio': {\r\n            var ratio = resolutionWidth / resolutionHeight;\r\n            if (image.width / image.height === ratio)\r\n                return true;\r\n            break;\r\n        }\r\n        case 'less': {\r\n            if (image.width <= resolutionWidth && image.height <= resolutionHeight)\r\n                return true;\r\n            break;\r\n        }\r\n        case 'more': {\r\n            if (image.width >= resolutionWidth && image.height >= resolutionHeight)\r\n                return true;\r\n            break;\r\n        }\r\n        default:\r\n            break;\r\n    }\r\n    return false;\r\n};\r\nexports.isImageValid = function (fileType) {\r\n    if (fileType.includes('image')) {\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\nexports.isMaxFileSizeValid = function (fileSize, maxFileSize) {\r\n    return maxFileSize ? fileSize <= maxFileSize : true;\r\n};\r\nexports.isAcceptTypeValid = function (acceptType, fileName) {\r\n    if (acceptType && acceptType.length > 0) {\r\n        var type_1 = fileName.split('.').pop() || '';\r\n        if (acceptType.findIndex(function (item) { return item.toLowerCase() === type_1.toLowerCase(); }) < 0)\r\n            return false;\r\n    }\r\n    return true;\r\n};\r\nexports.isMaxNumberValid = function (totalNumber, maxNumber, keyUpdate) {\r\n    if (maxNumber !== 0 && !maxNumber)\r\n        return true;\r\n    if (keyUpdate === constants_1.DEFAULT_NULL_INDEX) {\r\n        if (totalNumber <= maxNumber)\r\n            return true;\r\n    }\r\n    else if (totalNumber <= maxNumber + 1)\r\n        return true;\r\n    return false;\r\n};\r\nexports.getErrorValidation = function (_a) {\r\n    var fileList = _a.fileList, value = _a.value, maxNumber = _a.maxNumber, keyUpdate = _a.keyUpdate, acceptType = _a.acceptType, maxFileSize = _a.maxFileSize, resolutionType = _a.resolutionType, resolutionWidth = _a.resolutionWidth, resolutionHeight = _a.resolutionHeight;\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        var newErrors, i, file, image, checkRes;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    newErrors = {};\r\n                    if (!!exports.isMaxNumberValid(fileList.length + value.length, maxNumber, keyUpdate)) return [3 /*break*/, 1];\r\n                    newErrors.maxNumber = true;\r\n                    return [3 /*break*/, 5];\r\n                case 1:\r\n                    i = 0;\r\n                    _b.label = 2;\r\n                case 2:\r\n                    if (!(i < fileList.length)) return [3 /*break*/, 5];\r\n                    file = fileList[i].file;\r\n                    if (!file)\r\n                        return [3 /*break*/, 4];\r\n                    if (!exports.isImageValid(file.type)) {\r\n                        newErrors.acceptType = true;\r\n                        return [3 /*break*/, 5];\r\n                    }\r\n                    if (!exports.isAcceptTypeValid(acceptType, file.name)) {\r\n                        newErrors.acceptType = true;\r\n                        return [3 /*break*/, 5];\r\n                    }\r\n                    if (!exports.isMaxFileSizeValid(file.size, maxFileSize)) {\r\n                        newErrors.maxFileSize = true;\r\n                        return [3 /*break*/, 5];\r\n                    }\r\n                    if (!resolutionType) return [3 /*break*/, 4];\r\n                    return [4 /*yield*/, utils_1.getImage(file)];\r\n                case 3:\r\n                    image = _b.sent();\r\n                    checkRes = exports.isResolutionValid(image, resolutionType, resolutionWidth, resolutionHeight);\r\n                    if (!checkRes) {\r\n                        newErrors.resolution = true;\r\n                        return [3 /*break*/, 5];\r\n                    }\r\n                    _b.label = 4;\r\n                case 4:\r\n                    i += 1;\r\n                    return [3 /*break*/, 2];\r\n                case 5:\r\n                    if (Object.values(newErrors).find(Boolean))\r\n                        return [2 /*return*/, newErrors];\r\n                    return [2 /*return*/, null];\r\n            }\r\n        });\r\n    });\r\n};\r\n//# sourceMappingURL=validation.js.map"],"sourceRoot":""}