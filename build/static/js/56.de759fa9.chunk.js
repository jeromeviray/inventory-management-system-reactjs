(this["webpackJsonp@project/inventory-management-system"]=this["webpackJsonp@project/inventory-management-system"]||[]).push([[56],{1154:function(e,t,s){"use strict";s.r(t),s.d(t,"Checkout",(function(){return j}));var a=s(0),c=s(428),n=s(55),r=s(434),d=s(431),i=s(503),o=s(25),l=s(2),m=s(8);class j extends a.Component{constructor(...e){super(...e),this.state={token:"",message:"",cart:[],cartItems:[],checked:[],pendingItem:[],totalAmount:0,quantity:0},this.retrieveCartItems=()=>{this.props.getCart()},this.manageCartItemsResponse=(e,t)=>{if(e.cartResponse!==this.props.cartResponse){let{action:e,status:t,data:s}=this.props.cartResponse;"CARTITEMS"===e&&200===t&&this.setState({checked:new Array(s.cart.cartItems.length).fill(!1),cart:s.cart,cartItems:s.cart.cartItems})}},this.handOnRemoveItem=e=>{let{token:t}=this.state;this.props.removeCartItem(e).then((()=>{this.retrieveCartItems(t)}))},this.handleOnChange=e=>{let{checked:t,pendingItem:s,cartItems:a}=this.state,c=t.map(((t,s)=>s===e?!t:t)),n=s.indexOf(a[e]);n>-1?s.splice(n,1):s.push(a[e]);let r=c.reduce(((e,t,s)=>!0===t?e+a[s].amount:e),0),d=c.reduce(((e,t,s)=>!0===t?e+a[s].quantity:e),0);this.setState({checked:c,totalAmount:r,quantity:d}),this.props.paymentDetailsOnChange(s,d,r)},this.manageStatus=e=>{switch(e){case"OK":return Object(m.jsx)(c.c,{color:"success",shape:"rounded-pill",children:e});case"LOW":return Object(m.jsx)(c.c,{color:"warning",shape:"rounded-pill",children:e});case"OUT_OF_STOCK":return Object(m.jsx)(c.c,{color:"danger",shape:"rounded-pill",children:"OUT OF STOCK"});default:return Object(m.jsx)(c.c,{color:"danger",shape:"rounded-pill",children:e})}}}componentDidMount(){this.retrieveCartItems()}componentDidUpdate(e,t){this.manageCartItemsResponse(e,t)}render(){let{cartItems:e,checked:t}=this.state;const s={fontWeight:"800"};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(c.s,{children:Object(m.jsxs)(c.i,{className:"mb-3 border-0",children:[Object(m.jsx)(c.m,{children:Object(m.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(m.jsx)("div",{children:Object(m.jsx)("span",{style:{...s},children:"Select"})}),Object(m.jsx)("div",{children:Object(m.jsx)("span",{style:{...s},children:"Item"})}),Object(m.jsx)("div",{children:Object(m.jsx)("span",{style:{...s},children:"Price"})}),Object(m.jsx)("div",{children:Object(m.jsx)("span",{style:{...s},children:"Quantity"})}),Object(m.jsx)("div",{children:Object(m.jsx)("span",{style:{...s},children:"Action"})})]})}),Object(m.jsx)(c.j,{children:e.length>0?e.map(((e,s)=>{const{quantity:a,addedAt:n}=e,{product:r,inventory:d,promo:i}=e.product;let j=!i&&!(d.totalStock>0),h=i&&i.status;const p=i&&i.percentage;let u=r.productPrice*p/100,x=r.productPrice-u,b=a*x;return Object(m.jsxs)(c.i,{className:t[s]?"border border-success mb-3":"mb-3",children:[Object(m.jsx)(c.j,{children:Object(m.jsxs)("div",{className:"d-flex align-items-start",children:[Object(m.jsx)("div",{className:"me-3",children:Object(m.jsx)(c.C,{color:"success",name:"checked",id:"flexCheckChecked",checked:t[s],value:e,onChange:()=>this.handleOnChange(s),disabled:j})}),Object(m.jsx)(c.M,{rounded:!0,src:r.fileImages.length>0?o.a.api.private.baseUrl+"/api/v1/products/getImages/bytesArrays/"+r.fileImages[0].path+r.fileImages[0].fileName:l.NO_IMAGE_BASE64,width:100,height:100}),Object(m.jsx)("div",{className:"ms-2  w-100",children:Object(m.jsxs)(c.bb,{className:"d-flex justify-content-between",children:[Object(m.jsx)(c.q,{className:"ps-4 text-dark",children:r.productName}),Object(m.jsx)(c.q,{className:"text-dark d-flex flex-column align-items-center",children:Object(m.jsxs)("span",{children:["\u20b1","ONGOING"===h?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("span",{className:"text-muted text-decoration-line-through me-2",style:{fontSize:"16px"},children:r.productPrice.toFixed(2)}),Object(m.jsx)("span",{children:x.toFixed(2)}),Object(m.jsx)("br",{}),Object(m.jsxs)("span",{className:"text-muted ",style:{fontSize:"16px"},children:[p+"%"," discount"]})]}):r.productPrice.toFixed(2)]})}),Object(m.jsx)(c.q,{className:"text-dark d-flex flex-column align-items-center",children:Object(m.jsx)("span",{children:a})}),Object(m.jsx)(c.q,{className:"text-dark  d-flex justify-content-end",children:Object(m.jsx)("span",{children:Object(m.jsx)(c.p,{onClick:()=>this.handOnRemoveItem(e.id)})})})]})})]})}),Object(m.jsx)(c.k,{className:t[s]?"bg-success text-white":"",children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center w-100 ",children:[Object(m.jsxs)("span",{className:"text-muted font-style",children:[Object(m.jsx)("div",{children:n}),Object(m.jsxs)("div",{children:["Stock: ",Object(m.jsx)("span",{children:d.totalStock}),j?this.manageStatus(d.status):""]})]}),Object(m.jsxs)("div",{className:"d-flex align-items-center",children:[Object(m.jsx)("span",{className:"text-muted font-style me-2",children:"Amount"}),Object(m.jsxs)("span",{style:{fontWeight:"500"},children:["\u20b1",b.toFixed(2)]})]})]})})]},s)})):Object(m.jsx)(c.i,{className:"mb-3 border-0",children:Object(m.jsx)(c.j,{className:"text-center",children:"No Cart Item Added"})})})]})})})}}t.default=Object(n.b)((e=>({userResponse:e.userResponse,messageResponse:e.messageResponse,cartResponse:e.cartResponse})),{getCart:r.b,removeCartItem:r.c,clearMessage:d.a,getOrderItems:i.b})(j)},434:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return l}));var a=s(14),c=s(2),n=s(128),r=s(56);var d=new class{addToCart(e){return r.a.post("/cart/item/add/"+e,{},{headers:Object(n.a)()})}getCart(){return r.a.get("/cart",{headers:Object(n.a)()})}removeItem(e){return console.log(e),r.a.delete("/cart/item/remove/"+e,{headers:Object(n.a)()})}};const i=e=>async t=>d.addToCart(e).then((e=>(t({type:c.ADD_TO_CART,payload:{status:200,action:"ADDTOCART",data:{}}}),t({type:a.g,payload:{status:200,data:{message:"Added Successfully"}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),c=e.response&&e.response.data&&e.response.data.code||e.toString();return t({type:a.g,payload:{status:c,data:{message:s}}}),Promise.reject()})),o=()=>async e=>d.getCart().then((t=>(e({type:c.GET_CART_ITEMS,payload:{status:200,action:"CARTITEMS",data:{cart:t.data}}}),Promise.resolve())),(t=>{const s=t.response&&t.response.data&&t.response.data.message||t.message||t.toString(),c=t.response&&t.response.data&&t.response.data.code||t.toString();return e({type:a.g,payload:{status:c,data:{message:s}}}),Promise.reject()})),l=e=>async t=>d.removeItem(e).then((e=>(t({type:c.REMOVE_ITEM,payload:{status:200,action:"REMOVE",data:{}}}),t({type:a.g,payload:{status:200,data:{message:"Remove Item Successfully"}}}),Promise.resolve())),(e=>{console.log(e);const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),c=e.response&&e.response.data&&e.response.data.code||e.toString();return t({type:a.g,payload:{status:c,data:{message:s}}}),Promise.reject()}))}}]);
//# sourceMappingURL=56.de759fa9.chunk.js.map