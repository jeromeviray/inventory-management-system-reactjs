(this["webpackJsonp@project/inventory-management-system"]=this["webpackJsonp@project/inventory-management-system"]||[]).push([[60],{1313:function(e,s,t){"use strict";t.r(s),t.d(s,"ForgotPassword",(function(){return x}));var a=t(0),o=t(568),n=t(48),r=t(15),c=t(154),i=t(570),d=t(595),l=t(618),p=t(153),m=t(156),g=t(600),h=t(26),u=t(7);const j={marginRight:"10px"},b=Object(u.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:Object(u.jsx)(m.DotLoader,{color:"#36D7B7",size:100})});class x extends a.Component{constructor(...e){super(...e),this.state={type:"password",loading:!1,validation:!1,message:"",permission:"",isLoggedIn:!1,email:"",token:"",sentEmail:!1,validToken:!1,alertColor:"",responseToken:[],password:"",confirmPassword:"",successfull:!1},this.handleOnChange=e=>{let s=e.target.name;this.setState({[s]:e.target.value})},this.handleShowPassword=e=>{const{type:s}=this.state;e.preventDefault(),this.setState({type:"password"===s?"text":"password"})},this.manageAccountResponse=(e,s)=>{if(e.accountResponse!==this.props.accountResponse){const{action:e,status:s,data:t}=this.props.accountResponse;"VALIDATE_TOKEN"===e&&200===s&&this.setState({responseToken:t.tokenResponse})}},this.handleForgotPassword=e=>{e.preventDefault(),this.setState({validation:!0,loading:!0});const{email:s}=this.state;this.props.forgotPassword(s).then((()=>{const{status:e,data:s}=this.props.messageResponse;this.handleAlertColor(e),this.setState({loading:!1,validated:!1,sentEmail:!0,message:s.message})})).catch((()=>{const{status:e,data:s}=this.props.messageResponse;this.handleAlertColor(e),this.setState({loading:!1,validated:!1,message:s.message})}))},this.handleValidateToken=e=>{e.preventDefault(),this.setState({validation:!0,loading:!0});const{token:s}=this.state;this.props.validateToken(s).then((()=>{const{status:e,data:s}=this.props.messageResponse;this.handleAlertColor(e),this.setState({validated:!1,validToken:!0,message:s.message}),setInterval((()=>{this.setState({loading:!1})}),1e3)})).catch((()=>{const{status:e,data:s}=this.props.messageResponse;this.handleAlertColor(e),this.setState({loading:!1,validated:!1,message:s.message})}))},this.handleResetPassword=e=>{e.preventDefault(),this.setState({validation:!0,loading:!0});const{responseToken:s,password:t,confirmPassword:a}=this.state;console.log(s),this.props.resetPassword(s.accountId,s.token,t,a).then((()=>{const{status:e,data:s}=this.props.messageResponse;this.handleAlertColor(e),this.setState({validated:!1,message:s.message,password:"",confirmPassword:"",successfull:!0}),setInterval((()=>{this.setState({loading:!1})}),1e3)})).catch((()=>{const{status:e,data:s}=this.props.messageResponse;this.handleAlertColor(e),this.setState({validated:!1,message:s.message}),setInterval((()=>{this.setState({loading:!1})}),1e3)}))},this.handleAlertColor=e=>{200===e?(console.log(e),this.setState({alertColor:"alert alert-success"})):e>=400&&e<=404?this.setState({alertColor:"alert alert-danger"}):e>405&&e<=500?this.setState({alertColor:"alert alert-warning"}):this.setState({alertColor:"alert alert-success"})}}componentDidMount(){this.redirectSuccessAuthentication()}redirectSuccessAuthentication(){const e=this.props.userResponse.isLoggedIn;if(e){let s=this.props.userResponse.credentials.roles.roleName,t=s||this.props.userResponse.credentials.roles;this.setState({isLoggedIn:e,permission:t})}}componentDidUpdate(e,s){this.manageAccountResponse(e,s)}render(){let{type:e,validation:s,loading:t,message:a,permission:n,isLoggedIn:m,sentEmail:g,validToken:x,email:O,token:y,alertColor:f,password:v,confirmPassword:w,successfull:S}=this.state;return m?n===c.a.SUPER_ADMIN||n===c.a.ADMIN?Object(u.jsx)(r.a,{to:h.a.api.private.prefixFrontendUrl+"/app"}):Object(u.jsx)(r.a,{to:h.a.api.private.prefixFrontendUrl+"/home"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(o.I,{position:"sticky",children:Object(u.jsxs)(o.s,{children:[Object(u.jsx)(p.b,{className:"nav-link",to:h.a.api.private.prefixFrontendUrl+"/home",style:{cursor:"pointer"},children:Object(u.jsx)("h2",{className:"nav-item",children:"Logo"})}),Object(u.jsxs)(o.K,{className:"ms-3 ",children:[Object(u.jsx)(o.V,{children:Object(u.jsxs)(o.W,{href:h.a.api.private.prefixFrontendUrl+"/login",children:[Object(u.jsx)(d.a,{size:20,style:j}),"Login"]})}),Object(u.jsx)(o.V,{children:Object(u.jsxs)(o.W,{href:h.a.api.private.prefixFrontendUrl+"/register",children:[Object(u.jsx)(i.F,{size:20,style:j}),"Register"]})})]})]})}),Object(u.jsx)("div",{className:"min-vh-100 d-flex flex-row align-items-center text-dark ",children:Object(u.jsx)(o.s,{className:"w-50 ",children:Object(u.jsx)(o.bb,{className:"justify-content-center ",children:Object(u.jsx)(o.q,{md:"12",lg:"8",children:Object(u.jsx)(o.l,{className:"shadow-lg ",children:Object(u.jsx)(o.i,{className:"p-4 m-0 left-to-right form-container border-0",children:Object(u.jsxs)(o.j,{children:[S?Object(u.jsx)(u.Fragment,{}):x?t?b:Object(u.jsxs)(o.B,{noValidate:!0,validated:s,onSubmit:this.handleResetPassword,id:"reset-password-form",children:[Object(u.jsx)(o.q,{sm:"12",md:"12",lg:"12",className:"d-flex justify-content-center p-3",children:Object(u.jsx)("h2",{className:"text-dark",children:"Forgot Password"})}),Object(u.jsx)(o.N,{className:"mb-3",children:Object(u.jsx)(o.q,{xs:"12",sm:"12",md:"12",lg:"12",children:Object(u.jsxs)(o.F,{className:"text-dark position-relative",children:[Object(u.jsx)(o.D,{name:"password",type:e,id:"floatingPassword",autoCorrect:"false",placeholder:"Password",onChange:this.handleOnChange,value:v,required:!0,className:"rounded-pill ps-4 pe-4"}),Object(u.jsxs)(o.G,{htmlFor:"exampleFormControlTextarea1 ",className:"ps-4 pe-4",children:[Object(u.jsx)(i.o,{size:18}),Object(u.jsx)("span",{className:"ps-2",children:"New Password"})]}),Object(u.jsx)("span",{onClick:this.handleShowPassword,className:"position-absolute top-50 end-0 translate-middle-y ps-4 pe-4",children:"password"===e?Object(u.jsx)(i.j,{size:20}):Object(u.jsx)(i.i,{size:20})}),Object(u.jsx)(o.E,{invalid:!0,children:"Please provide a valid password"})]})})}),Object(u.jsxs)(o.N,{children:[Object(u.jsx)(o.q,{xs:"12",sm:"12",md:"12",lg:"12",children:Object(u.jsxs)(o.F,{className:"text-dark position-relative",children:[Object(u.jsx)(o.D,{name:"confirmPassword",type:e,id:"floatingConfirmPassword",autoCorrect:"false",placeholder:"Confirm Password",onChange:this.handleOnChange,value:w,required:!0,className:"rounded-pill ps-4 pe-4"}),Object(u.jsxs)(o.G,{htmlFor:"floatingConfirmPassword ",className:"ps-4 pe-4",children:[Object(u.jsx)(i.o,{size:18}),Object(u.jsx)("span",{className:"ps-2",children:"Confirm Password"})]}),Object(u.jsx)("span",{onClick:this.handleShowPassword,className:"position-absolute top-50 end-0 translate-middle-y ps-4 pe-4",children:"password"===e?Object(u.jsx)(i.j,{size:20}):Object(u.jsx)(i.i,{size:20})}),Object(u.jsx)(o.E,{invalid:!0,children:"Please provide a valid password"})]})}),Object(u.jsx)(o.q,{xs:"12",sm:"12",md:"12",lg:"12"})]}),Object(u.jsx)(o.q,{sm:"12",md:"12",lg:"12",className:"d-flex flex-column justify-content-center",children:Object(u.jsxs)(o.f,{form:"reset-password-form",type:"submit",color:"info",size:"lg",style:{margin:"20px auto"},className:"d-flex justify-content-center align-items-center position-relative overflow-hidden login-btn",disabled:t,children:[t?Object(u.jsx)(o.gb,{size:"sm"}):Object(u.jsx)("span",{className:"d-flex align-items-center login-icon me-2",children:Object(u.jsx)(d.a,{size:20})}),Object(u.jsx)("span",{className:"label-btn ",children:"Change Password"})]})})]}):g?t?b:Object(u.jsxs)(o.B,{noValidate:!0,validated:s,onSubmit:this.handleValidateToken,id:"validate-token-form",children:[Object(u.jsx)(o.q,{sm:"12",md:"12",lg:"12",className:"d-flex justify-content-center p-3",children:Object(u.jsx)("h2",{className:"text-dark",children:"Forgot Password"})}),Object(u.jsx)(o.N,{children:Object(u.jsx)(o.q,{xs:"12",sm:"12",md:"12",lg:"12",children:Object(u.jsxs)(o.F,{className:"mb-3 text-dark ",children:[Object(u.jsx)(o.D,{name:"token",type:"text",autoCorrect:"false",id:"floatingInputToken",placeholder:"email",onChange:this.handleOnChange,value:y,required:!0,className:"rounded-pill  ps-4 pe-4"}),Object(u.jsxs)(o.G,{htmlFor:"floatingInputToken ",className:"ps-4 pe-4",children:[Object(u.jsx)(i.n,{size:18}),Object(u.jsx)("span",{className:"ps-2",children:"Enter the Token"})]}),Object(u.jsx)(o.E,{invalid:!0,children:"Please provide a valid Token"})]})})}),Object(u.jsx)(o.q,{sm:"12",md:"12",lg:"12",className:"d-flex flex-column justify-content-center",children:Object(u.jsxs)(o.f,{form:"validate-token-form",type:"submit",color:"info",size:"lg",style:{margin:"20px auto"},className:"d-flex justify-content-center align-items-center position-relative overflow-hidden login-btn",disabled:t,children:[t?Object(u.jsx)(o.gb,{size:"sm"}):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)("span",{className:"label-btn ",children:"Continue"})]})})]}):t?b:Object(u.jsxs)(o.B,{noValidate:!0,validated:s,onSubmit:this.handleForgotPassword,id:"forgot-password-form",children:[Object(u.jsx)(o.q,{sm:"12",md:"12",lg:"12",className:"d-flex justify-content-center p-3",children:Object(u.jsx)("h2",{className:"text-dark",children:"Forgot Password"})}),Object(u.jsx)(o.N,{children:Object(u.jsx)(o.q,{xs:"12",sm:"12",md:"12",lg:"12",children:Object(u.jsxs)(o.F,{className:"mb-3 text-dark ",children:[Object(u.jsx)(o.D,{name:"email",type:"text",autoCorrect:"false",id:"floatingInputEmail",placeholder:"email",onChange:this.handleOnChange,value:O,required:!0,className:"rounded-pill  ps-4 pe-4"}),Object(u.jsxs)(o.G,{htmlFor:"floatingInputEmail ",className:"ps-4 pe-4",children:[Object(u.jsx)(i.h,{size:18}),Object(u.jsx)("span",{className:"ps-2",children:"Email"})]}),Object(u.jsx)(o.E,{invalid:!0,children:"Please provide a valid Email"})]})})}),Object(u.jsx)(o.q,{sm:"12",md:"12",lg:"12",className:"d-flex flex-column justify-content-center",children:Object(u.jsxs)(o.f,{form:"forgot-password-form",type:"submit",color:"info",size:"lg",style:{margin:"20px auto"},className:"d-flex justify-content-center align-items-center position-relative overflow-hidden login-btn",disabled:t,children:[t?Object(u.jsx)(o.gb,{size:"sm"}):Object(u.jsx)("span",{className:"d-flex align-items-center login-icon me-2",children:Object(u.jsx)(l.i,{size:20})}),Object(u.jsx)("span",{className:"label-btn ",children:"Reset Password"})]})})]}),a&&Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("div",{className:f,role:"alert",children:a}),g?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"alert alert-info",role:"alert",children:[Object(u.jsx)("strong",{children:"Note: "}),Object(u.jsx)("span",{children:"If you not Found the Email Message in your inbox, Try to look in your Spam. Thankyou!"})]})}):Object(u.jsx)(u.Fragment,{})]}),Object(u.jsx)(p.b,{to:h.a.api.private.prefixFrontendUrl+"/login",children:"Back Login"})]})})})})})})})]})}}s.default=Object(n.b)((e=>({userResponse:e.userResponse,messageResponse:e.messageResponse,accountResponse:e.accountResponse})),{forgotPassword:g.d,validateToken:g.j,resetPassword:g.g})(x)},600:function(e,s,t){"use strict";t.d(s,"f",(function(){return i})),t.d(s,"h",(function(){return d})),t.d(s,"c",(function(){return l})),t.d(s,"a",(function(){return p})),t.d(s,"b",(function(){return m})),t.d(s,"d",(function(){return g})),t.d(s,"j",(function(){return h})),t.d(s,"g",(function(){return u})),t.d(s,"e",(function(){return j})),t.d(s,"i",(function(){return b})),t.d(s,"k",(function(){return x}));var a=t(1),o=t(152),n=t(62);var r=new class{getAccountEmployees(e,s,t){return n.a.get("/users/account",{headers:Object(o.a)(),params:{query:e,page:s,limit:t}})}getUsersAccount(e,s,t,a){return n.a.get("/users/account",{headers:Object(o.a)(),params:{query:e,role:s,page:t,limit:a}})}saveEmployeeAccount(e,s,t,a,r,c,i,d){return console.log(i),n.a.post("/users/account/create",{firstName:e,lastName:s,email:t,phoneNumber:a,username:r,password:c,birthday:i,role:d},{headers:Object(o.a)()})}deleteAccount(e){return n.a.delete("/users/account/delete/"+e,{headers:Object(o.a)()})}updateUser(e,s,t,a,r){return n.a.put("/users/account/update/"+e,{firstName:s,lastName:t,phoneNumber:a,birthday:r},{headers:Object(o.a)()})}banAccount(e){return n.a.delete("/users/account/ban/"+e,{headers:Object(o.a)()})}changePassword(e,s,t,a){let r=t;return n.a.post("/users/account/change/password",{id:e,currentPassword:s,password:r,confirmPassword:a},{headers:Object(o.a)()})}forgotPassword(e){return console.log(e),n.a.get("/account/password/forgot",{params:{email:e}})}verifyAccount(e){return n.a.get("/account/verification/"+e)}validateToken(e){return n.a.get("/account/password/forgot/token",{params:{token:e}})}resetPassword(e,s,t,a){return n.a.post("/users/account/reset/password",{accountId:e,token:s,password:t,confirmPassword:a})}getMe(){return n.a.get("/users/account/me",{headers:Object(o.a)()})}},c=t(16);const i=(e,s,t,o)=>async n=>r.getUsersAccount(e,s,t,o).then((e=>(n({type:a.GET_USERS_ACCOUNT,payload:{status:200,action:"USERSACCOUNT",data:{accounts:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.toString();return n({type:c.g,payload:{status:t,data:{message:s}}}),Promise.reject()})),d=(e,s,t,o,n,i,d,l)=>async p=>r.saveEmployeeAccount(e,s,t,o,n,i,d,l).then((e=>{p({type:a.SAVE_EMPLOYEE,payload:{status:200,action:"SAVEEMPLOYEE",data:{}}}),p({type:c.g,payload:{status:200,data:{message:"Successfully Saved"}}})}),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.toString();return p({type:c.g,payload:{status:t,data:{message:s}}}),Promise.reject()})),l=e=>async s=>r.deleteAccount(e).then((e=>{s({type:a.DELETE_ACCOUNT,payload:{status:200,action:"DELETEACCOUNT",data:{}}}),s({type:c.g,payload:{status:200,data:{message:"Successfully Deleted"}}})}),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),a=e.response&&e.response.data&&e.response.data.code||e.toString();return s({type:c.g,payload:{status:a,data:{message:t}}}),Promise.reject()})),p=e=>async s=>r.banAccount(e).then((e=>{s({type:a.BAN_ACCOUNT,payload:{status:200,action:"BANACCOUNT",data:{}}}),s({type:c.g,payload:{status:200,data:{message:"Successfully Banned"}}})}),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),a=e.response&&e.response.data&&e.response.data.code||e.toString();return s({type:c.g,payload:{status:a,data:{message:t}}}),Promise.reject()})),m=(e,s,t,o)=>async n=>r.changePassword(e,s,t,o).then((e=>(n({type:a.CHANGE_PASSWORD,payload:{status:200,action:"changepassword",data:{}}}),n({type:c.g,payload:{status:200,data:{message:"Password Change Successfully."}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.toString();return n({type:c.g,payload:{status:t,data:{message:s}}}),Promise.reject()})),g=e=>async s=>(console.log(e),r.forgotPassword(e).then((e=>(s({type:a.FORGOT_PASSWORD,payload:{status:200,action:a.FORGOT_PASSWORD,data:{}}}),s({type:c.g,payload:{status:200,data:{message:"The Forgot Password Token has been sent to your Email Address."}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),a=e.response&&e.response.data&&e.response.data.code||e.toString();return s({type:c.g,payload:{status:a,data:{message:t}}}),Promise.reject()}))),h=e=>async s=>r.validateToken(e).then((e=>(s({type:a.VALIDATE_TOKEN,payload:{status:200,action:a.VALIDATE_TOKEN,data:{tokenResponse:e.data}}}),s({type:c.g,payload:{status:200,data:{message:""}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),a=e.response&&e.response.data&&e.response.data.code||e.toString();return s({type:c.g,payload:{status:a,data:{message:t}}}),Promise.reject()})),u=(e,s,t,o)=>async n=>r.resetPassword(e,s,t,o).then((e=>(n({type:a.RESET_PASSWORD,payload:{status:200,action:a.RESET_PASSWORD,data:{}}}),n({type:c.g,payload:{status:200,data:{message:"Successfully Reset your Password"}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.toString();return n({type:c.g,payload:{status:t,data:{message:s}}}),Promise.reject()})),j=()=>async e=>r.getMe().then((s=>(e({type:a.GET_ME,payload:{status:200,action:a.GET_ME,data:{account:s.data}}}),Promise.resolve())),(s=>{const t=s.response&&s.response.data&&s.response.data.message||s.message||s.toString(),a=s.response&&s.response.data&&s.response.data.code||s.toString();return e({type:c.g,payload:{status:a,data:{message:t}}}),Promise.reject()})),b=(e,s,t,o,n)=>async i=>r.updateUser(e,s,t,o,n).then((e=>(i({type:a.UPDATE_USER,payload:{status:200,action:a.UPDATE_USER,data:{}}}),i({type:c.g,payload:{status:200,data:{message:"Successfully Updated"}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.toString();return i({type:c.g,payload:{status:t,data:{message:s}}}),Promise.reject()})),x=e=>async s=>r.verifyAccount(e).then((e=>(s({type:a.VERIFY_ACCOUNT,payload:{status:200,action:a.VERIFY_ACCOUNT,data:{}}}),s({type:c.g,payload:{status:200,data:{message:"Your Account has been Verified. Try To Login."}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),a=e.response&&e.response.data&&e.response.data.code||e.toString();return s({type:c.g,payload:{status:a,data:{message:t}}}),Promise.reject()}))}}]);
//# sourceMappingURL=60.ce31da94.chunk.js.map