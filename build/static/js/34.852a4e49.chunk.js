(this["webpackJsonp@project/inventory-management-system"]=this["webpackJsonp@project/inventory-management-system"]||[]).push([[34],{415:function(e,s,t){"use strict";t.d(s,"l",(function(){return r})),t.d(s,"k",(function(){return o})),t.d(s,"e",(function(){return n})),t.d(s,"h",(function(){return i})),t.d(s,"g",(function(){return p})),t.d(s,"o",(function(){return c})),t.d(s,"b",(function(){return d})),t.d(s,"c",(function(){return l})),t.d(s,"a",(function(){return u})),t.d(s,"d",(function(){return m})),t.d(s,"j",(function(){return g})),t.d(s,"f",(function(){return h})),t.d(s,"p",(function(){return y})),t.d(s,"q",(function(){return S})),t.d(s,"n",(function(){return b})),t.d(s,"m",(function(){return j})),t.d(s,"r",(function(){return O})),t.d(s,"i",(function(){return P}));var a=t(2);const r=(e,s,t)=>async r=>{r({type:a.SET_PRODUCTEDITMODAL_VISIBILIT,payload:{status:200,data:{visible:e,action:s,icon:t}}})},o=(e,s,t)=>async r=>{r({type:a.SET_PRODUCT_DETAILS_MODAL,payload:{status:200,data:{visible:e,action:s,product:t}}})},n=(e,s,t,r)=>async o=>{o({type:a.EDIT_PRODUCT_MODAL,payload:{status:200,data:{visible:e,action:s,product:t,icon:r}}})},i=(e,s,t,r)=>async o=>{o({type:a.ALERT_MODAL,payload:{action:s,module:t,alert:e,data:{id:r}}})},p=(e,s,t,r)=>async o=>{o({type:a.ALERT_BAN_MODAL,payload:{action:s,module:t,alert:e,data:{id:r}}})},c=(e,s,t,r)=>async o=>{o({type:a.UDPATE_STORE_INFORMATION,payload:{status:200,data:{visible:e,action:s,storeInfo:t,icon:r}}})},d=(e,s,t,r)=>async o=>{o({type:a.ADD_BRAND_MODAL,payload:{status:200,data:{visible:e,action:s,brand:t,icon:r}}})},l=(e,s,t,r)=>async o=>{o({type:a.ADD_CATEGORY_MODAL,payload:{status:200,data:{visible:e,action:s,category:t,icon:r}}})},u=(e,s,t,r)=>async o=>{o({type:a.ADD_EMPLOYEE_MODAL,payload:{status:200,data:{visible:e,action:s,employee:t,icon:r}}})},m=(e,s,t,r)=>async o=>{o({type:a.CHANGE_PASSWORD_MODAL,payload:{status:200,data:{visible:e,action:s,employee:t,icon:r}}})},g=(e,s)=>async t=>{t({type:a.LOGIN_MODAL,payload:{data:{visible:e,action:s}}})},h=(e,s,t,r)=>async o=>{o({type:a.SET_ADDRESS_MODAL,payload:{data:{visible:e,action:s,address:t,icon:r}}})},y=(e,s,t,r)=>async o=>{o({type:a.SET_SUPPLIER_MODAL,payload:{action:s,data:{visible:e,icon:r,supplier:t}}})},S=(e,s,t,r)=>async o=>{o({type:a.SET_SUPPLY_MODAL,payload:{action:s,data:{visible:e,icon:r,supply:t}}})},b=(e,s)=>async t=>{t({type:a.SET_SCAN_MODAL,payload:{action:s,data:{visible:e}}})},j=(e,s,t,r)=>async o=>{o({type:a.SET_PROMO_MODAL,payload:{action:s,data:{visible:e,icon:r,promo:t}}})},O=(e,s,t,r)=>async o=>{o({type:a.SET_TERMS_AND_CONDITION_MODAL,payload:{status:200,data:{visible:e,action:s,termsAndCondition:t,icon:r}}})},P=(e,s,t,r)=>async o=>{o({type:a.SET_CAROULSE_MDOAL,payload:{status:200,data:{visible:e,action:s,carousel:t,icon:r}}})}},419:function(e,s,t){"use strict";t.d(s,"j",(function(){return n})),t.d(s,"b",(function(){return i})),t.d(s,"d",(function(){return p})),t.d(s,"c",(function(){return c})),t.d(s,"e",(function(){return d})),t.d(s,"f",(function(){return l})),t.d(s,"a",(function(){return u})),t.d(s,"l",(function(){return m})),t.d(s,"k",(function(){return g})),t.d(s,"g",(function(){return h})),t.d(s,"h",(function(){return y})),t.d(s,"i",(function(){return S}));var a=t(13),r=t(435),o=t(2);const n=e=>async s=>r.a.saveProduct(e).then((e=>(s({type:o.SAVE_PRODUCT}),s({type:a.g,payload:{status:200,data:{message:"Successfully Saved"}}}),Promise.resolve())),(e=>{console.log(e);const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return console.log(r),s({type:o.SAVE_FAIL}),s({type:a.g,payload:{status:r,data:{message:t}}}),Promise.reject()})),i=(e,s,t)=>async a=>r.a.getDiscoverProducts(e,s,t).then((e=>(a({type:o.GET_DISCOVER_PRODUCT,payload:{status:200,data:{products:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return a({type:o.SET_PRODUCT_MESSAGE,payload:{status:t,data:{message:s}}}),Promise.reject()})),p=(e,s,t)=>async a=>r.a.getPopularProducts(e,s,t).then((e=>(a({type:o.GET_POPULAR_PRODUCT,payload:{status:200,data:{products:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return a({type:o.SET_PRODUCT_MESSAGE,payload:{status:t,data:{message:s}}}),Promise.reject()})),c=(e,s)=>async t=>r.a.getImage(e,s).then((e=>(console.log(e),t({type:o.GET_IMAGE,payload:{status:e.status,data:{image:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return t({type:o.FAIL_GET_IMAGE}),t({type:a.g,payload:{status:r,data:{message:s}}}),Promise.reject()})),d=e=>async s=>r.a.getProduct(e).then((e=>(s({type:o.GET_PRODUCT,payload:{status:200,data:{product:e.data}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return s({type:a.g,payload:{status:r,data:{message:t}}}),Promise.reject()})),l=e=>async s=>r.a.getProductDetails(e).then((e=>(s({type:o.GET_PRODUCT_DETAILS,payload:{status:200,data:{product:e.data}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return s({type:a.g,payload:{status:r,data:{message:t}}}),Promise.reject()})),u=e=>async s=>r.a.deleteProduct(e).then((e=>(s({type:o.DELETE_PRODUCT,payload:{status:200,action:o.DELETE_PRODUCT,data:{}}}),s({type:a.g,payload:{status:200,data:{message:"Successfully Deleted"}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return s({type:a.g,payload:{status:r,data:{message:t}}}),Promise.reject()})),m=(e,s)=>async t=>r.a.updateProduct(e,s).then((e=>(t({type:o.UPDATE_PRODUCT,payload:{status:200,action:o.UPDATE_PRODUCT,data:{updatedProduct:e.data}}}),t({type:a.g,payload:{status:200,data:{message:"Successfully Updated"}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return t({type:a.g,payload:{status:r,data:{message:s}}}),Promise.reject()})),g=(e,s,t)=>async n=>r.a.searchProductByBarcodeOrName(e,s,t).then((e=>(n({type:o.SEARCH_PRODUCT,payload:{status:200,action:o.SEARCH_PRODUCT,data:{products:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return n({type:a.g,payload:{status:t,data:{message:s}}}),Promise.reject()})),h=(e,s,t,n)=>async i=>r.a.getProductsByCategoryName(e,s,t,n).then((e=>(i({type:o.GET_PRODUCT_BY_CATEGORY_NAME,payload:{status:200,action:o.GET_PRODUCT_BY_CATEGORY_NAME,data:{products:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return i({type:a.g,payload:{status:t,data:{message:s}}}),Promise.reject()})),y=(e,s,t,n)=>async i=>r.a.getProductsByStatus(e,s,t,n).then((e=>{i({type:o.GET_PRODUCTS_BY_STATUS,payload:{status:200,action:o.GET_PRODUCTS_BY_STATUS,data:{products:e.data}}})}),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return i({type:a.g,payload:{status:t,data:{message:s}}}),Promise.reject()})),S=(e,s,t,n)=>async i=>r.a.getProductsWithPromo(e,s,t,n).then((e=>(i({type:o.GET_PRODUCTS_WITH_PROMO,payload:{status:200,action:o.GET_PRODUCTS_WITH_PROMO,data:{products:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return i({type:a.g,payload:{status:t,data:{message:s}}}),Promise.reject()}))},435:function(e,s,t){"use strict";var a=t(120),r=t(52);s.a=new class{saveProduct(e){return r.a.post("/products/save",e,{headers:Object(a.a)()})}updateProduct(e,s){return r.a.put("/products/update/"+e,s,{headers:Object(a.a)()})}deleteProduct(e){return r.a.delete("/products/delete/"+e,{headers:Object(a.a)()})}getProducts(e,s,t){return r.a.get("/products",{headers:Object(a.a)(),params:{query:e,page:s,limit:t}})}getImage(e,s){console.log();let t=e||"null/";return r.a.get("/products/getImages/bytesArrays/"+t+s,{responseType:"blob"})}getProduct(e){return r.a.get("/products/"+e,{headers:Object(a.a)()})}getProductDetails(e){return r.a.get("/products/details/"+e,{headers:Object(a.a)()})}getDiscoverProducts(e,s,t){return r.a.get("/products/discover",{headers:Object(a.a)(),params:{query:e,page:s,limit:t}})}getPopularProducts(e,s,t){return r.a.get("/products/popular",{headers:Object(a.a)(),params:{query:e,page:s,limit:t}})}searchProductByBarcodeOrName(e,s,t){return r.a.get("/products/search",{headers:Object(a.a)(),params:{query:e,page:s,limit:t}})}getProductsByCategoryName(e,s,t,o){return r.a.get("/products/category/"+e,{headers:Object(a.a)(),params:{query:s,page:t,limit:o}})}getProductsByStatus(e,s,t,o){return r.a.get("/products/status",{headers:Object(a.a)(),params:{status:s,query:e,page:t,limit:o}})}getProductsWithPromo(e,s,t,o){return r.a.get("/products/promo",{headers:Object(a.a)(),params:{status:e,query:s,page:t,limit:o}})}}},511:function(e,s,t){"use strict";t.d(s,"a",(function(){return p})),t.d(s,"d",(function(){return c})),t.d(s,"b",(function(){return d})),t.d(s,"c",(function(){return l}));var a=t(13),r=t(2),o=t(120),n=t(52);var i=new class{createSupplier(e){return n.a.post("/suppliers/create",{name:e},{headers:Object(o.a)()})}updateSupplier(e,s){return console.log(s),n.a.put("/suppliers/update/"+e,{name:s},{headers:Object(o.a)()})}deleteSupplier(e){return n.a.delete("/suppliers/delete/"+e,{headers:Object(o.a)()})}getSuppliers(e,s,t){return n.a.get("/suppliers",{headers:Object(o.a)(),params:{query:e,page:s,limit:t}})}getSupplier(e){return n.a.get("/suppliers/"+e,{headers:Object(o.a)()})}};const p=e=>async s=>i.createSupplier(e).then((e=>(s({type:r.CREATE_SUPPLIER,payload:{status:200,action:r.CREATE_SUPPLIER,data:{}}}),s({type:a.g,payload:{status:200,data:{message:"Successfully Created."}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return s({type:a.g,payload:{status:r,data:{message:t}}}),Promise.reject()})),c=(e,s)=>async t=>i.updateSupplier(e,s).then((e=>(t({type:r.UPDATE_SUPPLIER,payload:{status:200,action:r.UPDATE_SUPPLIER,data:{supplier:e.data}}}),t({type:a.g,payload:{status:200,data:{message:"Successfully Updated."}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return t({type:a.g,payload:{status:r,data:{message:s}}}),Promise.reject()})),d=e=>async s=>i.deleteSupplier(e).then((e=>(console.log(e),s({type:r.DELETE_SUPPLIER,payload:{status:200,action:"DELETESUPPLIER"}}),s({type:a.g,payload:{status:200,data:{message:"Successfully DELETED"}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return s({type:a.g,payload:{status:r,data:{message:t}}}),Promise.reject()})),l=(e,s,t)=>async o=>i.getSuppliers(e,s,t).then((e=>(o({type:r.GET_SUPPLIERS,payload:{status:200,action:r.GET_SUPPLIERS,data:{suppliers:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.toString();return o({type:a.g,payload:{status:t,data:{message:s}}}),Promise.reject()}))},519:function(e,s,t){"use strict";t.d(s,"a",(function(){return p})),t.d(s,"b",(function(){return c})),t.d(s,"d",(function(){return d})),t.d(s,"c",(function(){return l})),t.d(s,"e",(function(){return u}));var a=t(13),r=t(2),o=t(52),n=t(120);var i=new class{saveIncomingSupply(e,s){return console.log(s),o.a.post("/supplies/save",{incomingSupplyItems:e,supplier:{id:s}},{headers:Object(n.a)()})}getIncomingSupplies(e,s,t,a){return o.a.get("/supplies",{headers:Object(n.a)(),params:{query:e,status:s,page:t,limit:a}})}getIncomingSupply(e){return o.a.get("/supplies/"+e,{headers:Object(n.a)()})}markIncomingSuppliesAsDelivered(e){return o.a.put("/supplies/delivered",{},{headers:Object(n.a)(),params:{id:e}})}updateIncomingSuppleis(e,s,t,a){return o.a.put("/supplies/update/"+e,{incomingSupply:{incomingSupplyItems:s,supplier:{id:t.id}},removedItems:a},{headers:Object(n.a)()})}};const p=(e,s,t,o)=>async n=>i.getIncomingSupplies(e,s,t,o).then((e=>(n({type:r.GET_INCOMING_SUPPLIES,payload:{action:r.GET_INCOMING_SUPPLIES,status:200,data:{incomingSupplies:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.toString();return n({type:a.g,payload:{status:t,data:{message:s}}}),Promise.reject()})),c=e=>async s=>i.getIncomingSupply(e).then((e=>(s({type:r.GET_INCOMING_SUPPLY,payload:{action:r.GET_INCOMING_SUPPLY,status:200,data:{incomingSupply:e.data}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return s({type:a.g,payload:{status:r,data:{message:t}}}),Promise.reject()})),d=(e,s)=>async t=>i.saveIncomingSupply(e,s).then((e=>(t({type:r.SAVE_INCOMING_SUPPLY,payload:{status:200,action:r.SAVE_INCOMING_SUPPLY,data:{}}}),t({type:a.g,payload:{status:200,data:{message:"Successfully Saved"}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return t({type:a.g,payload:{status:r,data:{message:s}}}),Promise.reject()})),l=e=>async s=>i.markIncomingSuppliesAsDelivered(e).then((e=>(s({type:r.MARK_INCOMING_SUPPLY_AS_DELIVERED,payload:{status:200,action:r.MARK_INCOMING_SUPPLY_AS_DELIVERED,data:{}}}),s({type:a.g,payload:{status:200,data:{message:"Incoming Supply Items has been Delivered."}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return s({type:a.g,payload:{status:r,data:{message:t}}}),Promise.reject()})),u=(e,s,t,o)=>async n=>i.updateIncomingSuppleis(e,s,t,o).then((e=>(n({type:r.UPDATE_INCOMING_SUPPLY,payload:{status:200,action:r.UPDATE_INCOMING_SUPPLY,data:{}}}),n({type:a.g,payload:{status:200,data:{message:"Incoming Supply Items has been Updated."}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),t=e.response&&e.response.data&&e.response.data.code||e.toString();return n({type:a.g,payload:{status:t,data:{message:s}}}),Promise.reject()}))},649:function(e,s,t){"use strict";t.r(s),t.d(s,"IncomingSuppliesController",(function(){return D}));var a=t(0),r=t.n(a),o=t(414),n=t(125),i=t(416),p=t(51),c=t(417),d=t(519),l=t(415),u=t(475),m=t.n(u),g=t(511),h=t(419),y=t(480),S=t.n(y),b=t(600),j=t.n(b),O=t(440),P=t(462),I=t(589),E=t(8);class v extends a.Component{constructor(...e){super(...e),this.state={loading:!1,visible:!1,icon:"",action:"",supplier:[],visible:!1,query:"",page:0,limit:10,message:"",product:[],productItems:[],supplierItems:[],supplierSelected:!1,items:[],showScanner:!1,supplierErrorMessage:"",incomingSupplyMessage:"",id:"",removedProductItems:[],supplierId:-1},this.getSuppliers=()=>{const{query:e,page:s,limit:t}=this.state;this.props.getSuppliers(e,s,t)},this.manageSupplyModal=(e,s)=>{if(e.modalVisible!==this.props.modalVisible){let{visible:e,action:s,icon:t,supply:a}=this.props.modalVisible;"Add"===s?(this.setState({visible:e,action:s,icon:t}),this.getSuppliers()):"Edit"===s?this.setState({visible:e,action:s,icon:t,productItems:a.incomingSupplyItems,supplier:a.supplier,supplierSelected:!0,id:a.id}):"close"===s&&this.setState({visible:e,action:"",icon:"",supplier:[],productItems:[],supplierItems:[],supplierSelected:!1,removedProductItems:[]})}},this.manageSupplierResponse=(e,s)=>{if(e.supplierResponse!==this.props.supplierResponse){let{status:e,action:s,data:t}=this.props.supplierResponse;"GET_SUPPLIERS"===s&&200===e&&(this.setState({supplierItems:t.suppliers.data}),this.state.supplierSelected&&this.setState({supplier:t.suppliers.data,supplierId:t.suppliers.data.id}))}},this.manageProductResponse=(e,s)=>{const{showScanner:t}=this.state;if(e.productResponse!==this.props.productResponse){let{action:e,status:s,data:a}=this.props.productResponse;"SEARCH_PRODUCT"===e&&200===s&&(this.setState({items:a.products.data,product:a.products.data}),t&&a.products.data.map(((e,s)=>{this.handleTempProductItem(s,e)})))}},this.handleTempProductItem=(e,s)=>{let{product:t}=this.state;const a=this.state.productItems.slice(0);let r=a.findIndex((e=>e.product.id===s.id));if(r>-1){a[r].numberReceived++}else{let s={numberReceived:1,product:{id:t[e].id,productName:t[e].productName,barcode:t[e].barcode}};a.push(s)}this.setState({productItems:a})},this.handleRemoveTempProductItem=(e,s)=>{const{action:t,removedProductItems:a,productItems:r}=this.state;if("Edit"===t){const e=a.slice(0);e.push(s),this.setState({removedProductItems:e})}r.splice(e,1),this.setState({productItems:r})},this.handleOnChange=(e,s)=>{const{productItems:t}=this.state;t[e].numberReceived++,this.setState({productItems:t})},this.handleSupplierOnSearch=(e,s)=>{const{page:t,limit:a}=this.state;this.setState({supplierSelected:!1}),this.props.getSuppliers(e,t,a).catch((()=>{let{status:e,data:s}=this.props.messageResponse;e>400&&e<=403&&(this.props.logout(),this.props.clearMessage()),this.setState({message:s.message})}))},this.handleSupplierOnSelect=e=>{const{page:s,limit:t}=this.state;this.setState({supplierSelected:!0}),this.props.getSuppliers(e.name,s,t).catch((()=>{let{status:e,data:s}=this.props.messageResponse;e>400&&e<=403&&(this.props.logout(),this.props.clearMessage()),this.setState({message:s.message})}))},this.handleProductOnSelect=e=>{const{page:s,limit:t}=this.state;this.searchProduct(e.productName,s,t)},this.handleSupplierOnClear=()=>{this.setState({supplier:[],supplierSelected:!1})},this.handleProductOnClear=()=>{const{action:e,page:s,limit:t}=this.state;this.searchProduct("",s,t)},this.handleOnSeachProduct=(e,s)=>{const{page:t,limit:a}=this.state;this.searchProduct(e,t,a)},this.handleDecodeBarcode=e=>{const{page:s,limit:t}=this.state;e&&this.searchProduct(e,s,t)},this.handleOnSubmit=e=>{e.preventDefault();const{action:s}=this.state;this.setState({loading:!0}),"Add"===s?this.handleOnSave():"Edit"===s&&this.handleOnUpdate()},this.handleOnSave=()=>{const{supplierId:e,supplier:s,productItems:t}=this.state;t.length>0?(console.log(e),this.props.saveIncomingSupply(t,e).then((()=>{let{status:e,data:s}=this.props.messageResponse;e>400&&e<=403&&(this.props.logout(),this.props.clearMessage()),this.props.setSupplyModal(!1,"close","",""),this.setState({loading:!1})})).catch((()=>{let{status:e,data:s}=this.props.messageResponse;e>400&&e<=403?setInterval((()=>{this.props.logout(),this.props.clearMessage()}),1e3):this.setState({loading:!1,validation:!1})}))):0===t.length&&this.setState({incomingSupplyMessage:"Please Add Products."})},this.handleOnUpdate=()=>{const{productItems:e,supplier:s,id:t,removedProductItems:a}=this.state;this.props.updateIncomingSupplyItems(t,e,s,a).then((()=>{let{status:e,data:s}=this.props.messageResponse;e>400&&e<=403&&(this.props.logout(),this.props.clearMessage()),this.props.setSupplyModal(!1,"close","",""),this.setState({loading:!1})})).catch((()=>{let{status:e,data:s}=this.props.messageResponse;e>400&&e<=403?setInterval((()=>{this.props.clearMessage()}),1e3):this.setState({loading:!1,validation:!1})}))}}componentDidMount(){const{query:e,page:s,limit:t}=this.state;this.getSuppliers(e,s,t),this.searchProduct(e,s,t)}searchProduct(e,s,t){this.props.searchProductByBarcodeOrName(e,s,5)}componentDidUpdate(e,s){this.manageSupplyModal(e,s),this.manageSupplierResponse(e,s),this.manageProductResponse(e,s)}render(){let{loading:e,visible:s,action:t,icon:a,message:r,product:n,productItems:p,supplierItems:c,supplier:d,supplierSelected:l,items:u,showScanner:g,incomingSupplyMessage:h,supplierErrorMessage:y,removedProductItems:b}=this.state;return Object(E.jsx)("div",{children:Object(E.jsxs)(o.P,{visible:s,size:"xl",scrollable:!0,children:[Object(E.jsx)(o.S,{onDismiss:()=>{this.props.setSupplyModal(!1,"close","",""),this.props.clearMessage()},children:Object(E.jsx)(o.T,{children:Object(E.jsxs)("div",{className:"d-flex align-items-center",children:[a,t+" Supplies"]})})}),Object(E.jsx)(o.Q,{children:Object(E.jsxs)(o.B,{id:"supply-form",onSubmit:this.handleOnSubmit,children:[Object(E.jsxs)(o.bb,{children:[Object(E.jsxs)(o.q,{sm:"12",md:"12",lg:"6",children:[Object(E.jsx)(o.s,{className:"",children:Object(E.jsx)(S.a,{items:c,onSearch:this.handleSupplierOnSearch,onSelect:this.handleSupplierOnSelect,onClear:this.handleSupplierOnClear,fuseOptions:{keys:["name"]},resultStringKeyName:"name",placeholder:"Search Supplier",className:"search-bar",autoFocus:!0,styling:{boxShadow:"none",fontSize:"16px",zIndex:999,padding:"16px 24px",height:"50px",border:" 1px solid #b1b7c1",fontWiegth:"500",placeholderColor:"Black",width:"100%"}})}),Object(E.jsx)(o.s,{className:"mt-4",children:Object(E.jsx)(o.h,{color:"info",children:Object(E.jsx)(E.Fragment,{children:"Edit"===t?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h4",{children:"Supplier Name"}),Object(E.jsx)("h5",{children:d&&d.name})]}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h4",{children:"Supplier Name"}),d&&d.map(((e,s)=>Object(E.jsx)("h5",{children:e.name},e.id)))]})})})})]}),Object(E.jsxs)(o.q,{sm:"12",md:"12",lg:"6",children:[Object(E.jsxs)(o.bb,{className:"align-items-center",children:[Object(E.jsx)(o.q,{sm:"10",md:"10",lg:"10",className:g?"d-none":"d-block",children:Object(E.jsx)(S.a,{items:u,onSearch:this.handleOnSeachProduct,onSelect:this.handleProductOnSelect,onClear:this.handleProductOnClear,fuseOptions:{keys:["productName","barcode"]},resultStringKeyName:"productName",placeholder:"Search Product",className:"search-bar",autoFocus:!0,styling:{boxShadow:"none",fontSize:"16px",zIndex:999,padding:"16px 24px",height:"50px",border:" 1px solid #b1b7c1",fontWiegth:"500",placeholderColor:"Black",width:"100%"}})}),Object(E.jsx)(o.q,{sm:"1",md:"1",lg:"1",className:"p-0",children:Object(E.jsx)("div",{className:"text-center",children:Object(E.jsx)(o.f,{className:"pt-2 pb-2 ",type:"button",color:g?"danger":"info",variant:"outline",id:"btn-scan-barcode",onClick:()=>this.setState({showScanner:!g}),children:g?Object(E.jsx)(I.a,{size:"24"}):Object(E.jsx)(P.a,{size:"24"})})})})]}),Object(E.jsxs)("div",{className:"mb-4 mt-4",children:[Object(E.jsx)(o.jb,{striped:!0,hover:!0,className:g?"d-none":"shadow-sm",responsive:"md",align:"middle",children:Object(E.jsx)(o.kb,{children:n.map(((e,s)=>Object(E.jsxs)(o.pb,{className:"text-center",children:[Object(E.jsx)(o.mb,{children:e.productName}),Object(E.jsx)(o.mb,{children:e.barcode}),Object(E.jsx)(o.mb,{children:Object(E.jsx)(o.f,{variant:"ghost",color:"info",onClick:()=>this.handleTempProductItem(s,e),children:Object(E.jsx)(i.s,{})})})]},e.id)))})}),Object(E.jsx)("div",{className:g?"  d-block mt-3":" d-none",children:g?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(j.a,{delay:500,facingMode:!0,torch:"true",onUpdate:(e,s)=>{s&&this.handleDecodeBarcode(s.text)}})}):Object(E.jsx)(E.Fragment,{})})]})]})]}),Object(E.jsxs)(o.jb,{striped:!0,hover:!0,className:"shadow-sm ",responsive:"md",bordered:!0,align:"middle",children:[Object(E.jsxs)(o.lb,{children:["List of Brand: ",Object(E.jsx)("b",{children:p.length})]}),Object(E.jsx)(o.nb,{color:"dark",children:Object(E.jsxs)(o.pb,{className:"text-center",children:[Object(E.jsx)(o.ob,{scope:"col",children:"Product Name"}),Object(E.jsx)(o.ob,{scope:"col",children:"Product Barcode"}),Object(E.jsx)(o.ob,{scope:"col",children:"Qunatity Recieved"}),Object(E.jsx)(o.ob,{scope:"col",children:"Actions"})]})}),Object(E.jsxs)(o.kb,{className:"text-center",color:"light",children:[p.length>0?p.map(((e,s)=>Object(E.jsxs)(o.pb,{className:"text-center",children:[Object(E.jsx)(o.mb,{children:e.product.name?e.product.name:e.product.productName}),Object(E.jsx)(o.mb,{children:Object(E.jsx)(m.a,{value:String(e.product.barcode),height:50,width:1,fontSize:14,margin:7,background:"#f5f5f548"})}),Object(E.jsx)(o.mb,{children:Object(E.jsx)(o.D,{type:"number",min:1,value:e.numberReceived,onChange:e=>this.handleOnChange(s,e)})}),Object(E.jsx)(o.mb,{children:Object(E.jsx)(o.f,{variant:"ghost",color:"danger",onClick:()=>this.handleRemoveTempProductItem(s,e),children:Object(E.jsx)(O.b,{size:20})})})]},s))):Object(E.jsx)(E.Fragment,{children:h&&Object(E.jsx)(o.pb,{className:"text-center",children:Object(E.jsx)(o.mb,{colSpan:"4",children:Object(E.jsx)("div",{className:"alert alert-danger",role:"alert",children:h})})})}),r&&Object(E.jsx)(o.pb,{className:"text-center",children:Object(E.jsx)(o.mb,{colSpan:"4",children:Object(E.jsx)("div",{className:"alert alert-danger",role:"alert",children:r})})})]})]})]})}),Object(E.jsxs)(o.R,{children:[Object(E.jsx)(o.f,{color:"dark",variant:"ghost",onClick:()=>{this.props.setSupplyModal(!1,"close","",""),this.props.clearMessage()},children:"Close"}),Object(E.jsxs)(o.f,{type:"submit",color:"primary",disabled:e,form:"supply-form",children:[e&&Object(E.jsx)(o.gb,{size:"sm",className:"ms-1"}),"Save Incoming Supply"]})]})]})})}}var x=Object(p.b)((e=>({modalVisible:e.modalVisibleResponse,messageResponse:e.messageResponse,supplierResponse:e.supplierResponse,productResponse:e.productResponser})),{clearMessage:c.a,setSupplyModal:l.q,getSuppliers:g.c,searchProductByBarcodeOrName:h.k,saveIncomingSupply:d.d,updateIncomingSupplyItems:d.e})(v);const _=r.a.lazy((()=>t.e(53).then(t.bind(null,1039))));class D extends a.Component{constructor(...e){super(...e),this.state={message:"",activeKey:1,visible:!1,incomingSupplies:{data:[],totalPages:0},status:"PENDING",totalCounts:{PENDING:0,DELIVERED:0}},this.manageIncomingSupplies=(e,s)=>{if(e.incomingSupplyResponse!==this.props.incomingSupplyResponse){let{action:e,status:s,data:t}=this.props.incomingSupplyResponse;"GET_INCOMING_SUPPLIES"===e&&200===s&&this.setState({totalCounts:t.incomingSupplies.totalCounts})}},this.totalCountChange=e=>{this.setState({totalCounts:e})}}componentDidUpdate(e,s){this.manageIncomingSupplies(e,s)}render(){let{activeKey:e,visible:s,totalCounts:t,status:r}=this.state;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(x,{}),Object(E.jsx)("div",{className:"d-flex justify-content-between mb-4",children:Object(E.jsxs)(o.f,{shape:"rounded-pill",color:"primary",variant:"ghost",className:"d-flex justify-content-center align-items-center",onClick:()=>this.props.setSupplyModal(!s,"Add","",Object(E.jsx)(i.r,{size:20})),children:[Object(E.jsx)(i.r,{size:20}),Object(E.jsx)("span",{style:{marginLeft:"10px"},children:"Add Incoming Supply"})]})}),Object(E.jsxs)(o.U,{variant:"pills",role:"tablist",layout:"fill",children:[Object(E.jsx)(o.V,{children:Object(E.jsxs)(o.W,{href:"#pending",active:1===e,onClick:()=>{this.setState({activeKey:1,status:"PENDING"})},children:["Pending Supplies"," ",Object(E.jsx)(o.c,{color:"warning",className:"ms-2",children:t.PENDING?t.PENDING:0})]})}),Object(E.jsx)(o.V,{children:Object(E.jsxs)(o.W,{href:"#delivered",active:2===e,onClick:()=>{this.setState({activeKey:2,status:"DELIVERED"})},children:["Delivered Supplies",Object(E.jsx)(o.c,{color:"warning",className:"ms-2",children:t.DELIVERED?t.DELIVERED:0})]})})]}),Object(E.jsx)(o.hb,{style:{margin:"10px 0",padding:"12px 16px",overflow:"hidden"},children:Object(E.jsx)(o.ib,{role:"tabpanel","aria-labelledby":"ship-tab",visible:!0,children:Object(E.jsx)(a.Suspense,{fallback:Object(E.jsx)("div",{className:"d-flex justify-content-center align-items-center  position-fixed spinner",children:Object(E.jsx)(n.DotLoader,{color:"#36D7B7",size:100})}),children:Object(E.jsx)(_,{status:r,totalCounts:t,totalCountChange:this.totalCountChange},r)})})})]})}}s.default=Object(p.b)((e=>({incomingSupplyResponse:e.incomingSupplyResponse,messageResponse:e.messageResponse})),{getIncomingSupplies:d.a,clearMessage:c.a,setSupplyModal:l.q})(D)}}]);
//# sourceMappingURL=34.852a4e49.chunk.js.map