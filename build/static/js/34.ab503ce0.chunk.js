(this["webpackJsonp@project/inventory-management-system"]=this["webpackJsonp@project/inventory-management-system"]||[]).push([[34],{429:function(e,t,s){"use strict";s.d(t,"l",(function(){return r})),s.d(t,"k",(function(){return n})),s.d(t,"e",(function(){return o})),s.d(t,"h",(function(){return i})),s.d(t,"g",(function(){return c})),s.d(t,"o",(function(){return p})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return u})),s.d(t,"d",(function(){return m})),s.d(t,"j",(function(){return g})),s.d(t,"f",(function(){return h})),s.d(t,"p",(function(){return y})),s.d(t,"q",(function(){return S})),s.d(t,"n",(function(){return b})),s.d(t,"m",(function(){return j})),s.d(t,"r",(function(){return O})),s.d(t,"i",(function(){return P}));var a=s(2);const r=(e,t,s)=>async r=>{r({type:a.SET_PRODUCTEDITMODAL_VISIBILIT,payload:{status:200,data:{visible:e,action:t,icon:s}}})},n=(e,t,s)=>async r=>{r({type:a.SET_PRODUCT_DETAILS_MODAL,payload:{status:200,data:{visible:e,action:t,product:s}}})},o=(e,t,s,r)=>async n=>{n({type:a.EDIT_PRODUCT_MODAL,payload:{status:200,data:{visible:e,action:t,product:s,icon:r}}})},i=(e,t,s,r)=>async n=>{n({type:a.ALERT_MODAL,payload:{action:t,module:s,alert:e,data:{id:r}}})},c=(e,t,s,r)=>async n=>{n({type:a.ALERT_BAN_MODAL,payload:{action:t,module:s,alert:e,data:{id:r}}})},p=(e,t,s,r)=>async n=>{n({type:a.UDPATE_STORE_INFORMATION,payload:{status:200,data:{visible:e,action:t,storeInfo:s,icon:r}}})},d=(e,t,s,r)=>async n=>{n({type:a.ADD_BRAND_MODAL,payload:{status:200,data:{visible:e,action:t,brand:s,icon:r}}})},l=(e,t,s,r)=>async n=>{n({type:a.ADD_CATEGORY_MODAL,payload:{status:200,data:{visible:e,action:t,category:s,icon:r}}})},u=(e,t,s,r)=>async n=>{n({type:a.ADD_EMPLOYEE_MODAL,payload:{status:200,data:{visible:e,action:t,employee:s,icon:r}}})},m=(e,t,s,r)=>async n=>{n({type:a.CHANGE_PASSWORD_MODAL,payload:{status:200,data:{visible:e,action:t,employee:s,icon:r}}})},g=(e,t)=>async s=>{s({type:a.LOGIN_MODAL,payload:{data:{visible:e,action:t}}})},h=(e,t,s,r)=>async n=>{n({type:a.SET_ADDRESS_MODAL,payload:{data:{visible:e,action:t,address:s,icon:r}}})},y=(e,t,s,r)=>async n=>{n({type:a.SET_SUPPLIER_MODAL,payload:{action:t,data:{visible:e,icon:r,supplier:s}}})},S=(e,t,s,r)=>async n=>{n({type:a.SET_SUPPLY_MODAL,payload:{action:t,data:{visible:e,icon:r,supply:s}}})},b=(e,t)=>async s=>{s({type:a.SET_SCAN_MODAL,payload:{action:t,data:{visible:e}}})},j=(e,t,s,r)=>async n=>{n({type:a.SET_PROMO_MODAL,payload:{action:t,data:{visible:e,icon:r,promo:s}}})},O=(e,t,s,r)=>async n=>{n({type:a.SET_TERMS_AND_CONDITION_MODAL,payload:{status:200,data:{visible:e,action:t,termsAndCondition:s,icon:r}}})},P=(e,t,s,r)=>async n=>{n({type:a.SET_CAROULSE_MDOAL,payload:{status:200,data:{visible:e,action:t,carousel:s,icon:r}}})}},433:function(e,t,s){"use strict";s.d(t,"j",(function(){return o})),s.d(t,"b",(function(){return i})),s.d(t,"d",(function(){return c})),s.d(t,"c",(function(){return p})),s.d(t,"e",(function(){return d})),s.d(t,"f",(function(){return l})),s.d(t,"a",(function(){return u})),s.d(t,"l",(function(){return m})),s.d(t,"k",(function(){return g})),s.d(t,"g",(function(){return h})),s.d(t,"h",(function(){return y})),s.d(t,"i",(function(){return S}));var a=s(14),r=s(449),n=s(2);const o=e=>async t=>r.a.saveProduct(e).then((e=>(t({type:n.SAVE_PRODUCT}),t({type:a.g,payload:{status:200,data:{message:"Successfully Saved"}}}),Promise.resolve())),(e=>{console.log(e);const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return console.log(r),t({type:n.SAVE_FAIL}),t({type:a.g,payload:{status:r,data:{message:s}}}),Promise.reject()})),i=(e,t,s)=>async a=>r.a.getDiscoverProducts(e,t,s).then((e=>(a({type:n.GET_DISCOVER_PRODUCT,payload:{status:200,data:{products:e.data}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),s=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return a({type:n.SET_PRODUCT_MESSAGE,payload:{status:s,data:{message:t}}}),Promise.reject()})),c=(e,t,s)=>async a=>r.a.getPopularProducts(e,t,s).then((e=>(a({type:n.GET_POPULAR_PRODUCT,payload:{status:200,data:{products:e.data}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),s=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return a({type:n.SET_PRODUCT_MESSAGE,payload:{status:s,data:{message:t}}}),Promise.reject()})),p=(e,t)=>async s=>r.a.getImage(e,t).then((e=>(console.log(e),s({type:n.GET_IMAGE,payload:{status:e.status,data:{image:e.data}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return s({type:n.FAIL_GET_IMAGE}),s({type:a.g,payload:{status:r,data:{message:t}}}),Promise.reject()})),d=e=>async t=>r.a.getProduct(e).then((e=>(t({type:n.GET_PRODUCT,payload:{status:200,data:{product:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return t({type:a.g,payload:{status:r,data:{message:s}}}),Promise.reject()})),l=e=>async t=>r.a.getProductDetails(e).then((e=>(t({type:n.GET_PRODUCT_DETAILS,payload:{status:200,data:{product:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return t({type:a.g,payload:{status:r,data:{message:s}}}),Promise.reject()})),u=e=>async t=>r.a.deleteProduct(e).then((e=>(t({type:n.DELETE_PRODUCT,payload:{status:200,action:n.DELETE_PRODUCT,data:{}}}),t({type:a.g,payload:{status:200,data:{message:"Successfully Deleted"}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return t({type:a.g,payload:{status:r,data:{message:s}}}),Promise.reject()})),m=(e,t)=>async s=>r.a.updateProduct(e,t).then((e=>(s({type:n.UPDATE_PRODUCT,payload:{status:200,action:n.UPDATE_PRODUCT,data:{updatedProduct:e.data}}}),s({type:a.g,payload:{status:200,data:{message:"Successfully Updated"}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return s({type:a.g,payload:{status:r,data:{message:t}}}),Promise.reject()})),g=(e,t,s)=>async o=>r.a.searchProductByBarcodeOrName(e,t,s).then((e=>(o({type:n.SEARCH_PRODUCT,payload:{status:200,action:n.SEARCH_PRODUCT,data:{products:e.data}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),s=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return o({type:a.g,payload:{status:s,data:{message:t}}}),Promise.reject()})),h=(e,t,s,o)=>async i=>r.a.getProductsByCategoryName(e,t,s,o).then((e=>(i({type:n.GET_PRODUCT_BY_CATEGORY_NAME,payload:{status:200,action:n.GET_PRODUCT_BY_CATEGORY_NAME,data:{products:e.data}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),s=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return i({type:a.g,payload:{status:s,data:{message:t}}}),Promise.reject()})),y=(e,t,s,o)=>async i=>r.a.getProductsByStatus(e,t,s,o).then((e=>{i({type:n.GET_PRODUCTS_BY_STATUS,payload:{status:200,action:n.GET_PRODUCTS_BY_STATUS,data:{products:e.data}}})}),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),s=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return i({type:a.g,payload:{status:s,data:{message:t}}}),Promise.reject()})),S=(e,t,s,o)=>async i=>r.a.getProductsWithPromo(e,t,s,o).then((e=>(i({type:n.GET_PRODUCTS_WITH_PROMO,payload:{status:200,action:n.GET_PRODUCTS_WITH_PROMO,data:{products:e.data}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),s=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();return i({type:a.g,payload:{status:s,data:{message:t}}}),Promise.reject()}))},449:function(e,t,s){"use strict";var a=s(128),r=s(56);t.a=new class{saveProduct(e){return r.a.post("/products/save",e,{headers:Object(a.a)()})}updateProduct(e,t){return r.a.put("/products/update/"+e,t,{headers:Object(a.a)()})}deleteProduct(e){return r.a.delete("/products/delete/"+e,{headers:Object(a.a)()})}getProducts(e,t,s){return r.a.get("/products",{headers:Object(a.a)(),params:{query:e,page:t,limit:s}})}getImage(e,t){console.log();let s=e||"null/";return r.a.get("/products/getImages/bytesArrays/"+s+t,{responseType:"blob"})}getProduct(e){return r.a.get("/products/"+e,{headers:Object(a.a)()})}getProductDetails(e){return r.a.get("/products/details/"+e,{headers:Object(a.a)()})}getDiscoverProducts(e,t,s){return r.a.get("/products/discover",{headers:Object(a.a)(),params:{query:e,page:t,limit:s}})}getPopularProducts(e,t,s){return r.a.get("/products/popular",{headers:Object(a.a)(),params:{query:e,page:t,limit:s}})}searchProductByBarcodeOrName(e,t,s){return r.a.get("/products/search",{headers:Object(a.a)(),params:{query:e,page:t,limit:s}})}getProductsByCategoryName(e,t,s,n){return r.a.get("/products/category/"+e,{headers:Object(a.a)(),params:{query:t,page:s,limit:n}})}getProductsByStatus(e,t,s,n){return r.a.get("/products/status",{headers:Object(a.a)(),params:{status:t,query:e,page:s,limit:n}})}getProductsWithPromo(e,t,s,n){return r.a.get("/products/promo",{headers:Object(a.a)(),params:{status:e,query:t,page:s,limit:n}})}}},533:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"d",(function(){return p})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return l}));var a=s(14),r=s(2),n=s(128),o=s(56);var i=new class{createSupplier(e){return o.a.post("/suppliers/create",{name:e},{headers:Object(n.a)()})}updateSupplier(e,t){return console.log(t),o.a.put("/suppliers/update/"+e,{name:t},{headers:Object(n.a)()})}deleteSupplier(e){return o.a.delete("/suppliers/delete/"+e,{headers:Object(n.a)()})}getSuppliers(e,t,s){return o.a.get("/suppliers",{headers:Object(n.a)(),params:{query:e,page:t,limit:s}})}getSupplier(e){return o.a.get("/suppliers/"+e,{headers:Object(n.a)()})}};const c=e=>async t=>i.createSupplier(e).then((e=>(t({type:r.CREATE_SUPPLIER,payload:{status:200,action:r.CREATE_SUPPLIER,data:{}}}),t({type:a.g,payload:{status:200,data:{message:"Successfully Created."}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return t({type:a.g,payload:{status:r,data:{message:s}}}),Promise.reject()})),p=(e,t)=>async s=>i.updateSupplier(e,t).then((e=>(s({type:r.UPDATE_SUPPLIER,payload:{status:200,action:r.UPDATE_SUPPLIER,data:{supplier:e.data}}}),s({type:a.g,payload:{status:200,data:{message:"Successfully Updated."}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return s({type:a.g,payload:{status:r,data:{message:t}}}),Promise.reject()})),d=e=>async t=>i.deleteSupplier(e).then((e=>(console.log(e),t({type:r.DELETE_SUPPLIER,payload:{status:200,action:"DELETESUPPLIER"}}),t({type:a.g,payload:{status:200,data:{message:"Successfully DELETED"}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return t({type:a.g,payload:{status:r,data:{message:s}}}),Promise.reject()})),l=(e,t,s)=>async n=>i.getSuppliers(e,t,s).then((e=>(n({type:r.GET_SUPPLIERS,payload:{status:200,action:r.GET_SUPPLIERS,data:{suppliers:e.data}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),s=e.response&&e.response.data&&e.response.data.code||e.toString();return n({type:a.g,payload:{status:s,data:{message:t}}}),Promise.reject()}))},543:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return p})),s.d(t,"d",(function(){return d})),s.d(t,"c",(function(){return l})),s.d(t,"e",(function(){return u}));var a=s(14),r=s(2),n=s(56),o=s(128);var i=new class{saveIncomingSupply(e,t){return console.log(t),n.a.post("/supplies/save",{incomingSupplyItems:e,supplier:{id:t}},{headers:Object(o.a)()})}getIncomingSupplies(e,t,s,a){return n.a.get("/supplies",{headers:Object(o.a)(),params:{query:e,status:t,page:s,limit:a}})}getIncomingSupply(e){return n.a.get("/supplies/"+e,{headers:Object(o.a)()})}markIncomingSuppliesAsDelivered(e){return n.a.put("/supplies/delivered",{},{headers:Object(o.a)(),params:{id:e}})}updateIncomingSuppleis(e,t,s,a){return n.a.put("/supplies/update/"+e,{incomingSupply:{incomingSupplyItems:t,supplier:{id:s.id}},removedItems:a},{headers:Object(o.a)()})}};const c=(e,t,s,n)=>async o=>i.getIncomingSupplies(e,t,s,n).then((e=>(o({type:r.GET_INCOMING_SUPPLIES,payload:{action:r.GET_INCOMING_SUPPLIES,status:200,data:{incomingSupplies:e.data}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),s=e.response&&e.response.data&&e.response.data.code||e.toString();return o({type:a.g,payload:{status:s,data:{message:t}}}),Promise.reject()})),p=e=>async t=>i.getIncomingSupply(e).then((e=>(t({type:r.GET_INCOMING_SUPPLY,payload:{action:r.GET_INCOMING_SUPPLY,status:200,data:{incomingSupply:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return t({type:a.g,payload:{status:r,data:{message:s}}}),Promise.reject()})),d=(e,t)=>async s=>i.saveIncomingSupply(e,t).then((e=>(s({type:r.SAVE_INCOMING_SUPPLY,payload:{status:200,action:r.SAVE_INCOMING_SUPPLY,data:{}}}),s({type:a.g,payload:{status:200,data:{message:"Successfully Saved"}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return s({type:a.g,payload:{status:r,data:{message:t}}}),Promise.reject()})),l=e=>async t=>i.markIncomingSuppliesAsDelivered(e).then((e=>(t({type:r.MARK_INCOMING_SUPPLY_AS_DELIVERED,payload:{status:200,action:r.MARK_INCOMING_SUPPLY_AS_DELIVERED,data:{}}}),t({type:a.g,payload:{status:200,data:{message:"Incoming Supply Items has been Delivered."}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),r=e.response&&e.response.data&&e.response.data.code||e.toString();return t({type:a.g,payload:{status:r,data:{message:s}}}),Promise.reject()})),u=(e,t,s,n)=>async o=>i.updateIncomingSuppleis(e,t,s,n).then((e=>(o({type:r.UPDATE_INCOMING_SUPPLY,payload:{status:200,action:r.UPDATE_INCOMING_SUPPLY,data:{}}}),o({type:a.g,payload:{status:200,data:{message:"Incoming Supply Items has been Updated."}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),s=e.response&&e.response.data&&e.response.data.code||e.toString();return o({type:a.g,payload:{status:s,data:{message:t}}}),Promise.reject()}))},698:function(e,t,s){"use strict";s.r(t),s.d(t,"IncomingSuppliesController",(function(){return D}));var a=s(0),r=s.n(a),n=s(428),o=s(133),i=s(430),c=s(55),p=s(431),d=s(543),l=s(429),u=s(480),m=s(493),g=s.n(m),h=s(533),y=s(433),S=s(500),b=s.n(S),j=s(649),O=s.n(j),P=s(451),I=s(479),x=s(638),v=s(8);class E extends a.Component{constructor(...e){super(...e),this.state={loading:!1,visible:!1,icon:"",action:"",supplier:[],visible:!1,query:"",page:0,limit:10,message:"",product:[],productItems:[],supplierItems:[],supplierSelected:!1,items:[],showScanner:!1,supplierErrorMessage:"",incomingSupplyMessage:"",id:"",removedProductItems:[],supplierId:-1},this.getSuppliers=()=>{const{query:e,page:t,limit:s}=this.state;this.props.getSuppliers(e,t,s)},this.manageSupplyModal=(e,t)=>{if(e.modalVisible!==this.props.modalVisible){let{visible:e,action:t,icon:s,supply:a}=this.props.modalVisible;"Add"===t?(this.setState({visible:e,action:t,icon:s}),this.getSuppliers()):"Edit"===t?this.setState({visible:e,action:t,icon:s,productItems:a.incomingSupplyItems,supplier:a.supplier,supplierSelected:!0,id:a.id}):"close"===t&&this.setState({visible:e,action:"",icon:"",supplier:[],productItems:[],supplierItems:[],supplierSelected:!1,removedProductItems:[]})}},this.manageSupplierResponse=(e,t)=>{if(e.supplierResponse!==this.props.supplierResponse){let{status:e,action:t,data:s}=this.props.supplierResponse;"GET_SUPPLIERS"===t&&200===e&&(this.setState({supplierItems:s.suppliers.data}),this.state.supplierSelected&&this.setState({supplier:s.suppliers.data,supplierId:s.suppliers.data.id}))}},this.manageProductResponse=(e,t)=>{const{showScanner:s}=this.state;if(e.productResponse!==this.props.productResponse){let{action:e,status:t,data:a}=this.props.productResponse;"SEARCH_PRODUCT"===e&&200===t&&(this.setState({items:a.products.data,product:a.products.data}),s&&a.products.data.map(((e,t)=>{this.handleTempProductItem(t,e)})))}},this.handleTempProductItem=(e,t)=>{let{product:s}=this.state;const a=this.state.productItems.slice(0);let r=a.findIndex((e=>e.product.id===t.id));if(r>-1){a[r].numberReceived++}else{let t={numberReceived:1,product:{id:s[e].id,productName:s[e].productName,barcode:s[e].barcode}};a.push(t)}this.setState({productItems:a})},this.handleRemoveTempProductItem=(e,t)=>{const{action:s,removedProductItems:a,productItems:r}=this.state;if("Edit"===s){const e=a.slice(0);e.push(t),this.setState({removedProductItems:e})}r.splice(e,1),this.setState({productItems:r})},this.handleOnChange=(e,t)=>{const{productItems:s}=this.state;s[e].numberReceived++,this.setState({productItems:s})},this.handleSupplierOnSearch=(e,t)=>{const{page:s,limit:a}=this.state;this.setState({supplierSelected:!1}),this.props.getSuppliers(e,s,a).catch((()=>{let{status:e,data:t}=this.props.messageResponse;e>400&&e<=403&&(this.props.logout(),this.props.clearMessage()),this.setState({message:t.message})}))},this.handleSupplierOnSelect=e=>{const{page:t,limit:s}=this.state;this.setState({supplierSelected:!0}),this.props.getSuppliers(e.name,t,s).catch((()=>{let{status:e,data:t}=this.props.messageResponse;e>400&&e<=403&&(this.props.logout(),this.props.clearMessage()),this.setState({message:t.message})}))},this.handleProductOnSelect=e=>{const{page:t,limit:s}=this.state;this.searchProduct(e.productName,t,s)},this.handleSupplierOnClear=()=>{this.setState({supplier:[],supplierSelected:!1})},this.handleProductOnClear=()=>{const{action:e,page:t,limit:s}=this.state;this.searchProduct("",t,s)},this.handleOnSeachProduct=(e,t)=>{const{page:s,limit:a}=this.state;this.searchProduct(e,s,a)},this.handleDecodeBarcode=e=>{const{page:t,limit:s}=this.state;e&&this.searchProduct(e,t,s)},this.handleOnSubmit=e=>{e.preventDefault();const{action:t}=this.state;this.setState({loading:!0}),"Add"===t?this.handleOnSave():"Edit"===t&&this.handleOnUpdate()},this.handleOnSave=()=>{const{supplierId:e,supplier:t,productItems:s}=this.state;s.length>0?(console.log(e),this.props.saveIncomingSupply(s,e).then((()=>{let{status:e,data:t}=this.props.messageResponse;e>400&&e<=403&&(this.props.logout(),this.props.clearMessage()),this.props.setSupplyModal(!1,"close","",""),this.setState({loading:!1})})).catch((()=>{let{status:e,data:t}=this.props.messageResponse;e>400&&e<=403?setInterval((()=>{this.props.logout(),this.props.clearMessage()}),1e3):this.setState({loading:!1,validation:!1})}))):0===s.length&&this.setState({incomingSupplyMessage:"Please Add Products."})},this.handleOnUpdate=()=>{const{productItems:e,supplier:t,id:s,removedProductItems:a}=this.state;this.props.updateIncomingSupplyItems(s,e,t,a).then((()=>{let{status:e,data:t}=this.props.messageResponse;e>400&&e<=403&&(this.props.logout(),this.props.clearMessage()),this.props.setSupplyModal(!1,"close","",""),this.setState({loading:!1})})).catch((()=>{let{status:e,data:t}=this.props.messageResponse;e>400&&e<=403?setInterval((()=>{this.props.clearMessage()}),1e3):this.setState({loading:!1,validation:!1})}))},this.incrementValue=e=>{const{productItems:t}=this.state;t[e].numberReceived++,this.setState({productItems:t})},this.decrementValue=e=>{const{productItems:t}=this.state;t[e].numberReceived--,this.setState({productItems:t})},this.handleQuantityOnChange=e=>{e.preventDefault();let{value:t,max:s,min:a}=e.target;t=Math.max(Number(a),Math.min(Number(s),Number(t)))}}componentDidMount(){const{query:e,page:t,limit:s}=this.state;this.getSuppliers(e,t,s),this.searchProduct(e,t,s)}searchProduct(e,t,s){this.props.searchProductByBarcodeOrName(e,t,5)}componentDidUpdate(e,t){this.manageSupplyModal(e,t),this.manageSupplierResponse(e,t),this.manageProductResponse(e,t)}render(){let{loading:e,visible:t,action:s,icon:a,message:r,product:o,productItems:c,supplierItems:p,supplier:d,supplierSelected:l,items:m,showScanner:h,incomingSupplyMessage:y,supplierErrorMessage:S,removedProductItems:j}=this.state;return Object(v.jsx)("div",{children:Object(v.jsxs)(n.P,{visible:t,size:"xl",scrollable:!0,children:[Object(v.jsx)(n.S,{onDismiss:()=>{this.props.setSupplyModal(!1,"close","",""),this.props.clearMessage()},children:Object(v.jsx)(n.T,{children:Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[a,s+" Supplies"]})})}),Object(v.jsx)(n.Q,{children:Object(v.jsxs)(n.B,{id:"supply-form",onSubmit:this.handleOnSubmit,children:[Object(v.jsxs)(n.bb,{children:[Object(v.jsxs)(n.q,{sm:"12",md:"12",lg:"6",children:[Object(v.jsx)(n.s,{className:"",children:Object(v.jsx)(b.a,{items:p,onSearch:this.handleSupplierOnSearch,onSelect:this.handleSupplierOnSelect,onClear:this.handleSupplierOnClear,fuseOptions:{keys:["name"]},resultStringKeyName:"name",placeholder:"Search Supplier",className:"search-bar",autoFocus:!0,styling:{boxShadow:"none",fontSize:"16px",zIndex:999,padding:"16px 24px",height:"50px",border:" 1px solid #b1b7c1",fontWiegth:"500",placeholderColor:"Black",width:"100%"}})}),Object(v.jsx)(n.s,{className:"mt-4",children:Object(v.jsx)(n.h,{color:"info",children:Object(v.jsx)(v.Fragment,{children:"Edit"===s?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{children:"Supplier Name"}),Object(v.jsx)("h5",{children:d&&d.name})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{children:"Supplier Name"}),d&&d.map(((e,t)=>Object(v.jsx)("h5",{children:e.name},e.id)))]})})})})]}),Object(v.jsxs)(n.q,{sm:"12",md:"12",lg:"6",children:[Object(v.jsxs)(n.bb,{className:"align-items-center",children:[Object(v.jsx)(n.q,{sm:"10",md:"10",lg:"10",className:h?"d-none":"d-block",children:Object(v.jsx)(b.a,{items:m,onSearch:this.handleOnSeachProduct,onSelect:this.handleProductOnSelect,onClear:this.handleProductOnClear,fuseOptions:{keys:["productName","barcode"]},resultStringKeyName:"productName",placeholder:"Search Product",className:"search-bar",autoFocus:!0,styling:{boxShadow:"none",fontSize:"16px",zIndex:999,padding:"16px 24px",height:"50px",border:" 1px solid #b1b7c1",fontWiegth:"500",placeholderColor:"Black",width:"100%"}})}),Object(v.jsx)(n.q,{sm:"1",md:"1",lg:"1",className:"p-0",children:Object(v.jsx)("div",{className:"text-center",children:Object(v.jsx)(n.f,{className:"pt-2 pb-2 ",type:"button",color:h?"danger":"info",variant:"outline",id:"btn-scan-barcode",onClick:()=>this.setState({showScanner:!h}),children:h?Object(v.jsx)(x.a,{size:"24"}):Object(v.jsx)(I.a,{size:"24"})})})})]}),Object(v.jsxs)("div",{className:"mb-4 mt-4",children:[Object(v.jsx)(n.jb,{striped:!0,hover:!0,className:h?"d-none":"shadow-sm",responsive:"md",align:"middle",children:Object(v.jsx)(n.kb,{children:o.map(((e,t)=>Object(v.jsxs)(n.pb,{className:"text-center",children:[Object(v.jsx)(n.mb,{children:e.productName}),Object(v.jsx)(n.mb,{children:e.barcode}),Object(v.jsx)(n.mb,{children:Object(v.jsx)(n.f,{variant:"ghost",color:"info",onClick:()=>this.handleTempProductItem(t,e),children:Object(v.jsx)(i.s,{})})})]},e.id)))})}),Object(v.jsx)("div",{className:h?"  d-block mt-3":" d-none",children:h?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(O.a,{delay:500,facingMode:!0,torch:"true",onUpdate:(e,t)=>{t&&this.handleDecodeBarcode(t.text)}})}):Object(v.jsx)(v.Fragment,{})})]})]})]}),Object(v.jsxs)(n.jb,{striped:!0,hover:!0,className:"shadow-sm ",responsive:"md",bordered:!0,align:"middle",children:[Object(v.jsxs)(n.lb,{children:["List of Brand: ",Object(v.jsx)("b",{children:c.length})]}),Object(v.jsx)(n.nb,{color:"dark",children:Object(v.jsxs)(n.pb,{className:"text-center",children:[Object(v.jsx)(n.ob,{scope:"col",children:"Product Name"}),Object(v.jsx)(n.ob,{scope:"col",children:"Product Barcode"}),Object(v.jsx)(n.ob,{scope:"col",children:"Qunatity Recieved"}),Object(v.jsx)(n.ob,{scope:"col",children:"Actions"})]})}),Object(v.jsxs)(n.kb,{className:"text-center",color:"light",children:[c.length>0?c.map(((e,t)=>Object(v.jsxs)(n.pb,{className:"text-center",children:[Object(v.jsx)(n.mb,{children:e.product.name?e.product.name:e.product.productName}),Object(v.jsx)(n.mb,{children:Object(v.jsx)(g.a,{value:String(e.product.barcode),height:50,width:1,fontSize:14,margin:7,background:"#f5f5f548"})}),Object(v.jsx)(n.mb,{className:"text-center",children:Object(v.jsxs)("div",{className:"quantity-container",children:[Object(v.jsx)(n.f,{className:"decrement-btn",type:"button",disabled:1===e.numberReceived,onClick:()=>this.decrementValue(t),children:Object(v.jsx)(u.c,{})}),Object(v.jsx)("input",{type:"text",className:"input-quantity",value:e.numberReceived,pattern:"[0-9]*",onChange:this.handleQuantityOnChange,min:1,readOnly:!0}),Object(v.jsx)(n.f,{className:"increment-btn",onClick:()=>this.incrementValue(t),children:Object(v.jsx)(u.e,{})})]})}),Object(v.jsx)(n.mb,{children:Object(v.jsx)(n.f,{variant:"ghost",color:"danger",onClick:()=>this.handleRemoveTempProductItem(t,e),children:Object(v.jsx)(P.b,{size:20})})})]},t))):Object(v.jsx)(v.Fragment,{children:y&&Object(v.jsx)(n.pb,{className:"text-center",children:Object(v.jsx)(n.mb,{colSpan:"4",children:Object(v.jsx)("div",{className:"alert alert-danger",role:"alert",children:y})})})}),r&&Object(v.jsx)(n.pb,{className:"text-center",children:Object(v.jsx)(n.mb,{colSpan:"4",children:Object(v.jsx)("div",{className:"alert alert-danger",role:"alert",children:r})})})]})]})]})}),Object(v.jsxs)(n.R,{children:[Object(v.jsx)(n.f,{color:"dark",variant:"ghost",onClick:()=>{this.props.setSupplyModal(!1,"close","",""),this.props.clearMessage()},children:"Close"}),Object(v.jsxs)(n.f,{type:"submit",color:"primary",disabled:e,form:"supply-form",children:[e&&Object(v.jsx)(n.gb,{size:"sm",className:"ms-1"}),"Save Incoming Supply"]})]})]})})}}var _=Object(c.b)((e=>({modalVisible:e.modalVisibleResponse,messageResponse:e.messageResponse,supplierResponse:e.supplierResponse,productResponse:e.productResponser})),{clearMessage:p.a,setSupplyModal:l.q,getSuppliers:h.c,searchProductByBarcodeOrName:y.k,saveIncomingSupply:d.d,updateIncomingSupplyItems:d.e})(E);const f=r.a.lazy((()=>s.e(53).then(s.bind(null,1171))));class D extends a.Component{constructor(...e){super(...e),this.state={message:"",activeKey:1,visible:!1,incomingSupplies:{data:[],totalPages:0},status:"PENDING",totalCounts:{PENDING:0,DELIVERED:0}},this.manageIncomingSupplies=(e,t)=>{if(e.incomingSupplyResponse!==this.props.incomingSupplyResponse){let{action:e,status:t,data:s}=this.props.incomingSupplyResponse;"GET_INCOMING_SUPPLIES"===e&&200===t&&this.setState({totalCounts:s.incomingSupplies.totalCounts})}},this.totalCountChange=e=>{this.setState({totalCounts:e})}}componentDidUpdate(e,t){this.manageIncomingSupplies(e,t)}render(){let{activeKey:e,visible:t,totalCounts:s,status:r}=this.state;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(_,{}),Object(v.jsx)("div",{className:"d-flex justify-content-between mb-4",children:Object(v.jsxs)(n.f,{shape:"rounded-pill",color:"primary",variant:"ghost",className:"d-flex justify-content-center align-items-center",onClick:()=>this.props.setSupplyModal(!t,"Add","",Object(v.jsx)(i.r,{size:20})),children:[Object(v.jsx)(i.r,{size:20}),Object(v.jsx)("span",{style:{marginLeft:"10px"},children:"Add Incoming Supply"})]})}),Object(v.jsxs)(n.U,{variant:"pills",role:"tablist",layout:"fill",children:[Object(v.jsx)(n.V,{children:Object(v.jsxs)(n.W,{href:"#pending",active:1===e,onClick:()=>{this.setState({activeKey:1,status:"PENDING"})},children:["Pending Supplies"," ",Object(v.jsx)(n.c,{color:"warning",className:"ms-2",children:s.PENDING?s.PENDING:0})]})}),Object(v.jsx)(n.V,{children:Object(v.jsxs)(n.W,{href:"#delivered",active:2===e,onClick:()=>{this.setState({activeKey:2,status:"DELIVERED"})},children:["Delivered Supplies",Object(v.jsx)(n.c,{color:"warning",className:"ms-2",children:s.DELIVERED?s.DELIVERED:0})]})})]}),Object(v.jsx)(n.hb,{style:{margin:"10px 0",padding:"12px 16px",overflow:"hidden"},children:Object(v.jsx)(n.ib,{role:"tabpanel","aria-labelledby":"ship-tab",visible:!0,children:Object(v.jsx)(a.Suspense,{fallback:Object(v.jsx)("div",{className:"d-flex justify-content-center align-items-center  position-fixed spinner",children:Object(v.jsx)(o.DotLoader,{color:"#36D7B7",size:100})}),children:Object(v.jsx)(f,{status:r,totalCounts:s,totalCountChange:this.totalCountChange},r)})})})]})}}t.default=Object(c.b)((e=>({incomingSupplyResponse:e.incomingSupplyResponse,messageResponse:e.messageResponse})),{getIncomingSupplies:d.a,clearMessage:p.a,setSupplyModal:l.q})(D)}}]);
//# sourceMappingURL=34.ab503ce0.chunk.js.map