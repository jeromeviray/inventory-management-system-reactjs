(this["webpackJsonp@project/inventory-management-system"]=this["webpackJsonp@project/inventory-management-system"]||[]).push([[46],{593:function(e,t,s){"use strict";s.r(t);var c=s(0),a=s(414),i=s(416),n=s(440),o=s(462),r=s(475),l=s.n(r),d=s(429),h=s.n(d),j=s(51),b=s(12),p=s(419),u=s(415),m=s(417),O=s(482),x=s(703),g=s(503),S=s.n(g),f=s(430),v=s(454),P=s(8);const y=Object(c.lazy)((()=>Promise.all([s.e(0),s.e(1),s.e(3),s.e(2),s.e(31)]).then(s.bind(null,431)))),C=Object(c.lazy)((()=>Promise.all([s.e(0),s.e(10),s.e(37)]).then(s.bind(null,1018))));class R extends c.Component{constructor(...e){super(...e),this.state={products:{data:[],totalPages:0},keyword:"",visible:!1,page:0,limit:10,query:""},this.manageScannerResponse=(e,t)=>{if(e.scannerResponse!==this.props.scannerResponse){let{action:e,decoded:t}=this.props.scannerResponse;if("DECODEDBARCODE"===e){const{page:e,limit:s,status:c}=this.state;this.getProducts(t,c,e,s),this.setState({query:t})}}},this.manageStatus=e=>{switch(e){case"OK":return Object(P.jsx)(a.c,{color:"success",shape:"rounded-pill",children:e});case"LOW":return Object(P.jsx)(a.c,{color:"warning",shape:"rounded-pill",children:e});case"OUT_OF_STOCK":return Object(P.jsx)(a.c,{color:"danger",shape:"rounded-pill",children:"OUT OF STOCK"});default:return Object(P.jsx)(a.c,{color:"danger",shape:"rounded-pill",children:e})}},this.handleSearch=e=>{const{page:t,limit:s,status:c}=this.state;this.getProducts(e.target.value,c,t,s),this.setState({query:e.target.value})},this.handleOnSubmitSearch=e=>{e.preventDefault();const{query:t,page:s,limit:c,status:a}=this.state;this.getProducts(t,a,s,c),this.setState({query:e.target.value})},this.handlePageClick=e=>{let t=e.selected;this.setState({page:t});const{limit:s,query:c,status:a}=this.state;this.getProducts(c,a,t,s)},this.handleGetProduct=e=>{const{accessToken:t,type:s}=this.props.userResponse.credentials,c=s+t;this.props.getProduct(e,c)},this.renderScanBarcodeModal=()=>Object(P.jsx)(x.a,{}),this.handleStatusOnClick=e=>{const{query:t,page:s,limit:c}=this.state;"ALL"===e?(this.setState({status:""}),this.getProducts(t,"",s,c)):(this.setState({status:e}),this.getProducts(t,e,s,c))}}componentDidMount(){const e=this.props.location.state;f.a.replace("/app/products/products",null);const{page:t,status:s,limit:c,query:a}=this.state;e?(this.getProducts(a,e,t,c),this.setState({status:e})):this.getProducts(a,s,t,c)}getProducts(e,t,s,c){this.props.getProductsByStatus(e,t,s,c)}componentDidUpdate(e,t){this.manageModalResponse(e,e),this.manageProductResponse(e,t),this.manageScannerResponse(e,t)}manageModalResponse(e,t){if(e.modalVisibleResponse!==this.props.modalVisibleResponse){let e=this.props.modalVisibleResponse;if(this.setState({visible:e.visible}),"close"===e.action){const{page:e,limit:t,query:s,status:c}=this.state;this.getProducts(s,c,e,t)}}}manageProductResponse(e,t){const{visible:s}=this.state;if(e.productResponse!==this.props.productResponse){let{action:e,status:t,data:c}=this.props.productResponse;"GETBYID"===e?t>=200&&t<=300&&this.props.editProductModal(!s,"Edit",c.product,Object(P.jsx)(i.g,{size:20})):200===t&&"GET_PRODUCTS_BY_STATUS"===e&&this.setState({products:c.products})}}renderProductEditorModal(){return Object(P.jsx)(C,{})}render(){let{visible:e,message:t,products:s,status:c}=this.state;return Object(P.jsxs)(P.Fragment,{children:[this.renderProductEditorModal(),this.renderScanBarcodeModal(),Object(P.jsx)(O.a,{}),Object(P.jsx)(y,{}),Object(P.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[Object(P.jsx)("div",{className:"w-100",children:Object(P.jsxs)(a.f,{shape:"rounded-pill",color:"primary",variant:"ghost",className:"d-flex justify-content-center align-items-center mb-3",onClick:()=>this.props.setProductModal(!e,"Add",Object(P.jsx)(i.r,{size:20})),children:[Object(P.jsx)(i.r,{size:20}),Object(P.jsx)("span",{style:{marginLeft:"10px"},children:"Add Product"})]})}),Object(P.jsxs)("div",{className:"w-100 d-flex justify-content-end align-items-center",children:[Object(P.jsx)(a.B,{onSubmit:this.handleOnSubmitSearch,id:"search-form",className:"w-75",children:Object(P.jsxs)(a.N,{children:[Object(P.jsx)(a.D,{type:"text",id:"floatingInput",placeholder:"Search",className:"p-2",value:this.state.query,onChange:this.handleSearch}),Object(P.jsx)(a.f,{form:"search-form",type:"submit",color:"info",variant:"outline",id:"btn-search",className:"",children:Object(P.jsx)(i.v,{})})]})}),Object(P.jsx)("div",{className:"text-center",children:Object(P.jsx)(a.f,{className:"pt-2 pb-2 ms-2",type:"button",color:"info",variant:"outline",id:"btn-scan-barcode",onClick:()=>this.props.setScanModal(!e,"barcode"),children:Object(P.jsx)(o.a,{size:"24"})})}),Object(P.jsx)("div",{className:"d-flex align-items-end flex-row-reverse m-2",children:Object(P.jsx)(S.a,{trigger:()=>Object(P.jsx)(a.f,{type:"button",variant:"outline",color:"info",className:" pt-2 pb-2 ",children:Object(P.jsx)(v.c,{size:20})}),content:()=>this.componentRef})})]})]}),Object(P.jsxs)(a.i,{className:"mb-4 bg-transparent border-0",children:[Object(P.jsx)(a.m,{children:Object(P.jsxs)(a.bb,{children:[Object(P.jsx)(a.q,{sm:"5",className:"d-flex align-items-center",children:Object(P.jsx)("h4",{className:"card-title mb-0 ",children:"Products"})}),Object(P.jsx)(a.q,{sm:"7",children:Object(P.jsx)(a.g,{className:"float-end",children:["ALL","OK","LOW","OUT_OF_STOCK"].map((e=>Object(P.jsx)(a.f,{color:"LOW"===e?"outline-warning":"OUT_OF_STOCK"===e?"outline-danger":"ALL"===e?"outline-secondary":"outline-success",className:"mx-0",active:e===c,onClick:()=>this.handleStatusOnClick(e),children:e},e)))})})]})}),Object(P.jsx)(a.j,{className:"p-0 m-0 ",children:Object(P.jsxs)(a.jb,{striped:!0,hover:!0,className:"shadow-sm ",responsive:!0,bordered:!0,align:"middle",ref:e=>this.componentRef=e,children:[Object(P.jsxs)(a.lb,{children:["List of Products: ",Object(P.jsx)("b",{children:s.totalItems})]}),Object(P.jsx)(a.nb,{color:"dark",children:Object(P.jsxs)(a.pb,{className:"text-center",children:[Object(P.jsx)(a.ob,{scope:"col",children:"Barcode"}),Object(P.jsx)(a.ob,{scope:"col",children:"Name"}),Object(P.jsx)(a.ob,{scope:"col",children:"Price"}),Object(P.jsx)(a.ob,{scope:"col",children:"Alert Stocks Threshold"}),Object(P.jsx)(a.ob,{scope:"col",children:"Total Stocks"}),Object(P.jsx)(a.ob,{scope:"col",children:"Status"}),Object(P.jsx)(a.ob,{scope:"col",children:"Action"})]})}),Object(P.jsxs)(a.kb,{className:"text-center",color:"light",children:[t&&Object(P.jsx)(a.pb,{className:"text-center",children:Object(P.jsx)(a.mb,{colSpan:"8",children:Object(P.jsx)("div",{className:"alert alert-danger",role:"alert",children:t})})}),s.data.length>0?s.data.map(((t,s)=>{const{id:c,barcode:o,productName:r,productPrice:d}=t.product,{threshold:h,status:j,totalStock:b}=t.inventory;return Object(P.jsxs)(a.pb,{className:"text-center",children:[Object(P.jsx)(a.mb,{children:Object(P.jsx)(l.a,{value:String(o),height:50,width:1,fontSize:14,margin:7,background:"#f5f5f548"})}),Object(P.jsx)(a.mb,{children:r}),Object(P.jsxs)(a.mb,{children:["\u20b1",d.toFixed(2)]}),Object(P.jsx)(a.mb,{children:h}),Object(P.jsx)(a.mb,{children:b}),Object(P.jsx)(a.mb,{children:this.manageStatus(j)}),Object(P.jsxs)(a.mb,{children:[Object(P.jsx)(a.f,{color:"secondary",variant:"ghost",size:"sm",onClick:()=>this.props.setProductDetailsModal(!0,"view",t),children:Object(P.jsx)(i.i,{size:"20"})}),Object(P.jsx)(a.f,{color:"info",variant:"ghost",size:"sm",onClick:()=>this.handleGetProduct(c),children:Object(P.jsx)(i.g,{size:"20"})}),Object(P.jsx)(a.f,{color:"danger",variant:"ghost",size:"sm",onClick:()=>this.props.setAlertModal(!e,"DELETEPRODUCT","PRODUCT",c),children:Object(P.jsx)(n.b,{size:"20"})})]})]},s)})):Object(P.jsx)(a.pb,{children:Object(P.jsx)(a.mb,{colSpan:"7",children:"No data"})})]})]})})]}),Object(P.jsx)(h.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:s.totalPages,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:this.handlePageClick,containerClassName:"pagination",activeClassName:"active"})]})}}t.default=Object(b.h)(Object(j.b)((e=>({productResponse:e.productResponser,modalVisibleResponse:e.modalVisibleResponse,userResponse:e.userResponse,messageResponse:e.messageResponse,inventoryResponse:e.inventoryResponse,scannerResponse:e.scannerResponse})),{setProductModal:u.l,getProductsByStatus:p.h,clearMessage:m.a,setProductDetailsModal:u.k,getProduct:p.e,editProductModal:u.e,clearMessage:m.a,setAlertModal:u.h,setScanModal:u.n})(R))},703:function(e,t,s){"use strict";var c=s(0),a=s.n(c),i=s(414),n=s(51),o=s(415),r=s(704),l=s(125),d=s(416),h=s(8);const j=a.a.lazy((()=>s.e(9).then(s.t.bind(null,600,7))));class b extends c.Component{constructor(e){super(e),this.manageModalVisible=(e,t)=>{if(e.modalVisible!==this.props.modalVisible){const{action:e,visible:t}=this.props.modalVisible;"barcode"===e?this.setState({visible:t,stopStreaming:!1,decodeBarcode:"",action:e}):"close"===e||"closeScan"===e?this.setState({visible:t,stopStreaming:!1,decodeBarcode:""}):"inputBarcode"===e&&this.setState({action:e,visible:t,decodeBarcode:""})}},this.handleDecodeBarcode=e=>{e&&this.setState({decodeBarcode:e,stopStreaming:!0})},this.handleOnClose=()=>{const{action:e}=this.state;console.log(e),"inputBarcode"===e?this.props.setScanModal(!1,"closeScan"):this.props.setScanModal(!1,"close")},this.state={visible:!1,decodeBarcode:"",stopStreaming:!1,action:""}}componentDidUpdate(e,t){this.manageModalVisible(e,t)}render(){let{visible:e,decodeBarcode:t,stopStreaming:s,action:a}=this.state;return Object(h.jsx)("div",{children:Object(h.jsxs)(i.P,{visible:e,alignment:"center",onDismiss:this.handleOnClose,children:[Object(h.jsx)(i.S,{onDismiss:this.handleOnClose,children:Object(h.jsx)(i.T,{children:Object(h.jsx)("div",{className:"d-flex align-items-center",children:"Scanner"})})}),Object(h.jsx)(i.Q,{children:Object(h.jsxs)(i.s,{className:"text-center",children:[Object(h.jsxs)(c.Suspense,{fallback:Object(h.jsx)("div",{className:"d-flex justify-content-center align-items-center  position-fixed spinner",children:Object(h.jsx)(l.DotLoader,{color:"#36D7B7",size:100})}),children:[Object(h.jsx)(i.a,{color:"info",dismissible:!0,children:Object(h.jsx)("strong",{children:"Scan Product Barcode to Search"})}),Object(h.jsx)(j,{className:"w-25",delay:500,facingMode:!0,stopStream:s,torch:"true",onUpdate:(e,t)=>{t&&this.handleDecodeBarcode(t.text)}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h4",{children:t}),t&&("inputBarcode"===a?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(i.f,{onClick:()=>{this.props.getDecodedBarcode(t,"inputBarcode"),this.setState({visible:!1})},color:"info",variant:"outline",className:"",children:Object(h.jsx)("span",{className:"ms-2",children:"Insert"})})}):Object(h.jsxs)(i.f,{onClick:()=>{this.props.getDecodedBarcode(t,"DECODEDBARCODE"),this.setState({visible:!1})},color:"info",variant:"outline",className:"",children:[Object(h.jsx)(d.v,{}),Object(h.jsx)("span",{className:"ms-2",children:"Search"})]}))]})]})}),Object(h.jsx)(i.R,{children:Object(h.jsx)(i.f,{color:"dark",variant:"ghost",onClick:this.handleOnClose,children:"Close"})})]})})}}t.a=Object(n.b)((e=>({modalVisible:e.modalVisibleResponse})),{setScanModal:o.n,getDecodedBarcode:r.a})(b)},704:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var c=s(2);const a=(e,t)=>async s=>{s({type:c.GET_DECODED_BARCODE,payload:{action:t,decoded:e}})}}}]);
//# sourceMappingURL=46.0845ad0d.chunk.js.map