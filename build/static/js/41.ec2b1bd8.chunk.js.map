{"version":3,"sources":["components/orderTabContent/Orders.js","service/restAPI/OrderApiService.js","service/apiActions/indexAction.js","service/apiActions/orderAction/orderAction.js","components/orderTabContent/OrderCard.js","service/restAPI/CommentApiService.js","service/apiActions/commentAction/commentAction.js"],"names":["Orders","Component","constructor","props","super","state","message","status","action","orders","token","permission","path","updated","orderReviews","manageorderRepsonse","prevProps","prevState","orderResponse","this","data","setState","manageHrefLinkBasedInPermission","Roles","SUPER_ADMIN","ADMIN","handleOrderReview","bind","componentDidMount","type","accessToken","roles","userResponse","credentials","roleName","getPermission","href","getOrders","componentDidUpdate","handleOrder","orderData","orderStatus","orderId","updateOrderStatus","then","index","findIndex","o","splice","length","totalCounts","toUpperCase","totalCountChange","renderOrderAction","order","paymentStatus","orderButton","toLowerCase","onClick","disabled","handleOrderView","event","preventDefault","formattedReviews","key","value","push","rating","comment","anonymous","published","product","id","parseInt","submitted","saveComments","update","item","orderIndex","ctt2","comments","ctt","ct","render","fontStyle","fontSize","fontWeight","className","map","hasPendingReview","orderItems","canReview","canViewReview","firstName","lastName","street","barangay","province","region","city","phoneNumber","customerAddress","style","onSubmit","console","log","Date","float","to","pathname","config","api","private","prefixFrontendUrl","orderedAt","paymentMethod","totalAmount","toFixed","connect","messageResponse","clearMessage","axios","get","headers","authHeader","getPaymentTransactions","query","page","limit","params","updateOrderPaymentStatus","put","placeOrderDetails","orderDetails","post","customerAddressId","addressId","paymentId","paymentMethodId","cartItems","items","getOrderByOrderId","handleError","error","dispatch","errorMessage","response","toString","code","SET_MESSAGE","payload","async","OrderApiService","GET_ORDERS","orderStatusCount","orderCounts","Promise","resolve","reject","getOrderItems","ORDER_ITEMS","placeOrder","orderDetials","PLACE_ORDER","GET_ORDER_BY_ID","UPDATE_ORDER_STATUS","UPDATE_PAYMENT_STATUS","GET_PAYMENT_TRANSACTIONS","payments","OrderCard","orderItem","isSubmitted","rounded","src","fileImages","baseUrl","fileName","NO_IMAGE_BASE64","width","height","productName","productPrice","quantity","amount","count","size","isHalf","edit","onChange","newRating","target","rows","placeholder","getComments","productId","saveComment","commentDetails","deleteComment","commentId","delete","CommentApiService","GET_COMMENTS","wishlistDetails","ADD_COMMENT"],"mappings":"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","file":"static/js/41.ec2b1bd8.chunk.js","sourcesContent":["import React, { Component } from \"react\"\nimport {\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCardFooter,\n  CRow,\n  CContainer,\n  CButton,\n  CForm,\n} from \"@coreui/react\"\nimport { Link } from \"react-router-dom\"\n//action\nimport { saveComments } from \"src/service/apiActions/commentAction/commentAction\"\nimport {\n  getOrders,\n  updateOrderStatus,\n} from \"src/service/apiActions/orderAction/orderAction\"\nimport { clearMessage } from \"src/service/apiActions/messageAction/messageAction\"\nimport { connect } from \"react-redux\"\nimport OrderCard from \"./OrderCard\"\nimport Roles from \"src/router/config\"\nimport ReactPaginate from \"react-paginate\"\n\nimport config from \"../../config\"\n\nexport class Orders extends Component {\n  state = {\n    message: \"\",\n    status: \"\",\n    action: \"\",\n    orders: [],\n    token: \"\",\n    permission: \"\",\n    path: \"\",\n    updated: false,\n  }\n\n  orderReviews = {}\n\n  constructor(props) {\n    super(props)\n    this.state.status = props.status\n    this.handleOrderReview = this.handleOrderReview.bind(this)\n  }\n  componentDidMount() {\n    let { type, accessToken, roles } = this.props.userResponse.credentials\n    let token = type + accessToken\n    let roleName = roles.roleName\n    let getPermission = roleName ? roleName : roles\n    let href = this.manageHrefLinkBasedInPermission(getPermission)\n\n    this.setState({\n      token: token,\n      permission: roles.roleName ? roles.roleName : roles,\n      path: href,\n    })\n\n    this.props.getOrders(this.state.status)\n  }\n  componentDidUpdate(prevProps, prevState) {\n    this.manageorderRepsonse(prevProps, prevState)\n  }\n\n  manageorderRepsonse = (prevProps, prevState) => {\n    if (prevProps.orderResponse !== this.props.orderResponse) {\n      let { status, action, data } = this.props.orderResponse\n      if (status === 200 && action === \"GET_ORDERS\") {\n        this.setState({\n          orders: data.orders,\n        })\n      }\n    }\n  }\n\n  manageHrefLinkBasedInPermission = (permission) => {\n    if (permission === Roles.SUPER_ADMIN || permission === Roles.ADMIN) {\n      return \"/app/order/\"\n    } else {\n      return \"/user/order/\"\n    }\n  }\n\n  handleOrder(orderData, orderStatus) {\n    let orderId = orderData.orderId\n    this.props.updateOrderStatus(orderId, orderStatus).then(() => {\n      let orders = this.state.orders\n      const order = this.props.orderResponse.data\n      const index = orders.findIndex((o) => o.orderId == orderId)\n      orders.splice(index, 1)\n      if (orders.length == 0) {\n        this.props.getOrders(this.state.status, 0, 10)\n      } else {\n        let totalCounts = this.props.totalCounts\n        if (typeof totalCounts[orderStatus.toUpperCase()] == \"undefined\") {\n          totalCounts[orderStatus.toUpperCase()] = 0\n        }\n        if (orderStatus == \"payment_received\") {\n          totalCounts[orderData.orderStatus.toUpperCase()]--\n          totalCounts[orderStatus.toUpperCase()]++\n          this.props.totalCountChange(totalCounts)\n          this.setState({\n            orders: orders,\n          })\n        }\n      }\n    })\n  }\n\n  renderOrderAction(orderStatus, order, paymentStatus) {\n    let orderButton = <></>\n    switch (orderStatus.toLowerCase()) {\n      case \"pending\":\n        orderButton = (\n          <CButton\n            onClick={() => {\n              this.handleOrder(order, \"confirmed\")\n            }}\n          >\n            Confirm Order\n          </CButton>\n        )\n        break\n      case \"confirmed\":\n        orderButton = (\n          <CButton\n            onClick={() => {\n              this.handleOrder(order, \"shipped\")\n            }}\n          >\n            Mark as Shipped\n          </CButton>\n        )\n        break\n      case \"shipped\":\n        orderButton = (\n          <CButton\n            onClick={() => {\n              this.handleOrder(order, \"delivered\")\n            }}\n          >\n            Mark as Delivered\n          </CButton>\n        )\n        break\n      case \"delivered\":\n        orderButton = (\n          <CButton\n            onClick={() => {\n              this.handleOrder(order, \"payment_received\")\n            }}\n            disabled={paymentStatus === \"Paid\" ? true : false}\n          >\n            {paymentStatus === \"Paid\"\n              ? \"Payment Recieved\"\n              : \"Mark as Payment Received\"}\n          </CButton>\n        )\n        break\n    }\n    return orderButton\n  }\n\n  handleOrderView(event, order) {\n    event.preventDefault()\n\n    let formattedReviews = []\n    let orderReviews = this.orderReviews[order.orderId]\n    for (var key in orderReviews) {\n      let value = orderReviews[key]\n      formattedReviews.push({\n        rating: value.rating,\n        message: value.comment,\n        anonymous: true,\n        published: 0,\n        product: {\n          id: parseInt(key),\n        },\n      })\n      this.orderReviews[order.orderId][key].submitted = true\n    }\n    this.props.saveComments(order.orderId, formattedReviews)\n    this.setState({ update: true })\n  }\n\n  handleOrderReview(orderId, item, rating, comment) {\n    const { orders } = this.state\n    let orderIndex = orders.findIndex((ctt2) => ctt2.orderId == orderId)\n    let { comments } = orders[orderIndex]\n\n    let submitted = false\n\n    if (typeof this.orderReviews[orderId] == \"undefined\") {\n      this.orderReviews[orderId] = {\n        [item.product.id]: {\n          rating: rating,\n          comment: comment,\n          submitted: false,\n        },\n      }\n    } else if (\n      typeof this.orderReviews[orderId][item.product.id] !== \"undefined\" &&\n      this.orderReviews[orderId][item.product.id].submitted\n    ) {\n      comment = this.orderReviews[orderId][item.product.id].comment\n      submitted = this.orderReviews[orderId][item.product.id].submitted\n    }\n\n    let index =\n      comments && comments.findIndex((ctt) => ctt.product.id == item.product.id)\n\n    if (index >= 0) {\n      const ct = comments[index]\n      rating = ct.rating\n      comment = ct.message\n      submitted = true\n    }\n\n    this.orderReviews[orderId][item.product.id] = {\n      rating: rating,\n      comment: comment,\n      submitted: submitted,\n    }\n  }\n\n  render() {\n    let { message, orders, permission, path } = this.state\n    const fontStyle = {\n      fontSize: \"14px\",\n      fontWeight: \"400\",\n    }\n    return (\n      <>\n        {orders.length === 0 ? (\n          <CCard>\n            <CCardBody>\n              <div className=\"text-center\">No Order Data</div>\n            </CCardBody>\n          </CCard>\n        ) : (\n          orders.map((order, index) => {\n            let hasPendingReview =\n              order.orderItems.length != order.comments.length\n\n            if (hasPendingReview && this.orderReviews[order.orderId]) {\n              hasPendingReview = false\n              for (var key in this.orderReviews[order.orderId]) {\n                if (this.orderReviews[order.orderId][key].submitted == false) {\n                  hasPendingReview = true\n                }\n              }\n            }\n\n            const canReview =\n              (order.orderStatus == \"DELIVERED\" ||\n                order.orderStatus == \"PAYMENT_RECEIVED\") &&\n              permission !== Roles.SUPER_ADMIN &&\n              permission !== Roles.ADMIN\n            const canViewReview =\n              (order.orderStatus == \"DELIVERED\" ||\n                order.orderStatus == \"PAYMENT_RECEIVED\") &&\n              (permission == Roles.SUPER_ADMIN || permission == Roles.ADMIN)\n\n            const {\n              firstName,\n              lastName,\n              street,\n              barangay,\n              province,\n              region,\n              city,\n              phoneNumber,\n            } = order.customerAddress\n            let paymentStatus = \"Payment Pending\"\n            switch (order.paymentStatus) {\n              case 1:\n                paymentStatus = \"Paid\"\n                break\n              case 2:\n                paymentStatus = \"Failed\"\n                break\n            }\n            return (\n              <CCard className=\"mb-3\" key={index}>\n                <CCardHeader>\n                  <CRow className=\"p-2\">\n                    <span\n                      style={{ fontSize: \"14px\", fontWeight: \"400\" }}\n                      className=\"text-black-50\"\n                    >\n                      Order ID: {order.orderId}\n                    </span>\n                    <span\n                      style={{ fontSize: \"14px\", fontWeight: \"400\" }}\n                      className=\"text-black-50\"\n                    >\n                      Customer Name: {firstName + \" \" + lastName}\n                    </span>\n                    <span\n                      style={{ fontSize: \"14px\", fontWeight: \"400\" }}\n                      className=\"text-black-50\"\n                    >\n                      Mobile: {phoneNumber}\n                    </span>\n                    <span\n                      style={{ fontSize: \"14px\", fontWeight: \"400\" }}\n                      className=\"text-black-50\"\n                    >\n                      Address:{\" \"}\n                      {street +\n                        \" \" +\n                        \" \" +\n                        barangay +\n                        \", \" +\n                        city +\n                        \", \" +\n                        province}\n                    </span>\n                  </CRow>\n                </CCardHeader>\n                <CCardBody>\n                  <CForm\n                    onSubmit={(event) => {\n                      this.handleOrderView(event, order)\n                    }}\n                  >\n                    <CContainer key={new Date()}>\n                      {order.orderItems.map((item, index) => {\n                        this.handleOrderReview(order.orderId, item, 5, \"\")\n                        const { rating, comment, submitted } =\n                          this.orderReviews[order.orderId][item.product.id]\n                        console.log(rating, comment, submitted)\n                        return (\n                          <OrderCard\n                            item={item}\n                            canReview={canReview}\n                            canViewReview={canViewReview}\n                            orderId={order.orderId}\n                            comment={comment}\n                            rating={rating}\n                            key={index}\n                            submitted={submitted}\n                            handleOrderReview={this.handleOrderReview}\n                          />\n                        )\n                      })}\n                    </CContainer>\n                    {hasPendingReview && canReview && (\n                      <CButton type=\"submit\" style={{ float: \"right\" }}>\n                        Submit Product Review\n                      </CButton>\n                    )}\n                  </CForm>\n                </CCardBody>\n                <CCardFooter className=\"p-4\">\n                  <div className=\"d-flex justify-content-between align-items-end\">\n                    <div className=\"d-flex align-items-bottom\">\n                      <Link\n                        to={{\n                          pathname:\n                            config.api.private.prefixFrontendUrl +\n                            path +\n                            order.orderId,\n                          state: order.orderId,\n                        }}\n                        className=\"m-2\"\n                      >\n                        View More\n                      </Link>\n\n                      {permission === Roles.SUPER_ADMIN ||\n                      permission === Roles.ADMIN ? (\n                        this.renderOrderAction(\n                          this.state.status,\n                          order,\n                          paymentStatus,\n                        )\n                      ) : (\n                        <></>\n                      )}\n                    </div>\n                    <div className=\"d-flex flex-column\">\n                      <div style={fontStyle} className=\"mt-2\">\n                        <span className=\"text-black-50 me-2\">\n                          Date of Ordered:\n                        </span>\n                        <span style={{ fontWeight: \"500\" }}>\n                          {order.orderedAt}\n                        </span>\n                      </div>\n\n                      <div style={fontStyle} className=\"mt-2\">\n                        <span style={fontStyle} className=\"text-black-50 me-2\">\n                          Payment Method:\n                        </span>\n                        <span style={{ fontWeight: \"500\" }}>\n                          {order.paymentMethod.paymentMethod}\n                        </span>\n                      </div>\n                      <div style={fontStyle} className=\"mt-2\">\n                        <span style={fontStyle} className=\"text-black-50 me-2\">\n                          Payment Status:\n                        </span>\n                        <span style={{ fontWeight: \"500\" }}>\n                          {paymentStatus}\n                        </span>\n                      </div>\n                      <div style={fontStyle} className=\"mt-2\">\n                        <span style={fontStyle} className=\"text-black-50 me-2\">\n                          Order Status:\n                        </span>\n                        <span\n                          className=\"text-danger\"\n                          style={{ fontWeight: \"500\" }}\n                        >\n                          {order.orderStatus}\n                        </span>\n                      </div>\n                      <div className=\"mt-2\">\n                        <span style={fontStyle} className=\"text-black-50 me-2\">\n                          Total Amount\n                        </span>\n                        <span style={{ fontWeight: \"500\" }}>\n                          &#8369;{order.totalAmount.toFixed(2)}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </CCardFooter>\n              </CCard>\n            )\n          })\n        )}\n        {/* <ReactPaginate\n                    previousLabel={\"previous\"}\n                    nextLabel={\"next\"}\n                    breakLabel={\"...\"}\n                    breakClassName={\"break-me\"}\n                    // pageCount={inventories.totalPages}\n                    marginPagesDisplayed={2}\n                    pageRangeDisplayed={5}\n                    // onPageChange={this.handlePageClick}\n                    containerClassName={\"pagination\"}\n                    activeClassName={\"active\"}\n                /> */}\n      </>\n    )\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    orderResponse: state.orderResponse,\n    messageResponse: state.messageResponse,\n    userResponse: state.userResponse,\n  }\n}\nexport default connect(mapStateToProps, {\n  getOrders,\n  clearMessage,\n  updateOrderStatus,\n  saveComments,\n})(Orders)\n","import authHeader from '../auth/authHeader';\nimport axios from './RestApi';\n\nexport class OrderApiService {\n    getOrders(status) {\n        return axios.get(\"/orders/status/\" + status, {\n            headers: authHeader()\n        })\n    }\n\n    getPaymentTransactions(query, page, limit) {\n        return axios.get(\"/orders/payments\", {\n            headers: authHeader(),\n            params: {\n                query: query,\n                page: page,\n                limit: limit\n            }\n        })\n    }\n\n    updateOrderPaymentStatus(orderId, paymentStatus) {\n        return axios.put(\"/orders/\" + orderId + \"/paid/\" + paymentStatus, {}, {\n            headers: authHeader()\n        })\n    }\n\n\n    placeOrderDetails(orderDetails) {\n        return axios.post(\"/orders/checkout\", {\n            customerAddressId: orderDetails.addressId,\n            paymentId: orderDetails.paymentMethodId,\n            cartItems: orderDetails.items\n        }, {\n            headers: authHeader()\n        })\n    }\n\n    getOrderByOrderId(orderId) {\n        return axios.get(\"/orders/\" + orderId, {\n            headers: authHeader()\n        })\n    }\n\n    updateOrderStatus(orderId, status) {\n        return axios.put(\"/orders/\" + orderId + \"/status/\" + status, {}, {\n            headers: authHeader()\n        })\n    }\n}\nexport default new OrderApiService();","import { SET_MESSAGE } from \"src/constants/userConstants\";\n\nexport const handleError = (error, dispatch) => {\n    const errorMessage =\n        (error.response &&\n            error.response.data &&\n            error.response.data.message) ||\n        error.message ||\n        error.toString();\n\n    const status = (error.response &&\n        error.response.data &&\n        error.response.data.code) ||\n        error.toString();\n\n    dispatch({\n        type: SET_MESSAGE,\n        payload: {\n            status: status,\n            data: {\n                message: errorMessage\n            }\n        }\n    })\n}","import { GET_ORDER_BY_ID, GET_ORDERS, ORDER_ITEMS, PLACE_ORDER, UPDATE_ORDER_STATUS, GET_PAYMENT_TRANSACTIONS, UPDATE_PAYMENT_STATUS } from \"src/service/redux/constants\";\nimport { SET_MESSAGE } from \"src/constants/userConstants\";\nimport OrderApiService from \"src/service/restAPI/OrderApiService\";\nimport { handleError } from \"../indexAction\";\n\nexport const getOrders = (status, page, limit) => async (dispatch) => {\n    return OrderApiService.getOrders(status, page, limit).then(\n        (response) => {\n            dispatch({\n                type: GET_ORDERS,\n                payload: {\n                    status: 200,\n                    action: \"GET_ORDERS\",\n                    data: {\n                        orders: response.data.orders,\n                        orderStatusCount: response.data.orderCounts\n                    }\n                }\n            })\n            return Promise.resolve();\n        },\n        (error) => {\n            handleError(error, dispatch);\n            return Promise.reject();\n        }\n    )\n\n}\n\nexport const getOrderItems = (items) => async (dispatch) => {\n    dispatch({\n        type: ORDER_ITEMS,\n        payload: {\n            status: 200,\n            action: \"ORDERITEMS\",\n            data: {\n                items: items\n            }\n        }\n    })\n}\n\nexport const placeOrder = (orderDetials) => async (dispatch) => {\n    return OrderApiService.placeOrderDetails(orderDetials).then(\n        (response) => {\n            dispatch({\n                type: PLACE_ORDER,\n                payload: {\n                    status: 200,\n                    action: \"PLACE_ORDER\",\n                    data: {\n\n                    }\n                }\n            })\n            dispatch({\n                type: SET_MESSAGE,\n                payload: {\n                    status: 200,\n                    data: {\n                        message: \"Successfully Place your Order\",\n                        order: response.data\n                    }\n                }\n            })\n            return Promise.resolve();\n        },\n        (error) => {\n            handleError(error, dispatch);\n            return Promise.reject();\n        }\n    )\n}\n\nexport const getOrderByOrderId = (orderId) => async (dispatch) => {\n    return OrderApiService.getOrderByOrderId(orderId).then(\n        (response) => {\n            dispatch({\n                type: GET_ORDER_BY_ID,\n                payload: {\n                    status: 200,\n                    action: \"GETORDERBYID\",\n                    data: {\n                        order: response.data\n                    }\n                }\n            })\n            return Promise.resolve();\n        },\n        (error) => {\n            handleError(error, dispatch);\n            return Promise.reject();\n        }\n    )\n}\n\nexport const updateOrderStatus = (orderId, status) => async (dispatch) => {\n    return OrderApiService.updateOrderStatus(orderId, status).then(\n        (response) => {\n            dispatch({\n                type: UPDATE_ORDER_STATUS,\n                payload: {\n                    status: 200,\n                    action: UPDATE_ORDER_STATUS,\n                    data: {\n                        order: response.data\n                    }\n                }\n            })\n            dispatch({\n                type: SET_MESSAGE,\n                payload: {\n                    status: 200,\n                    data: {\n                        message: \"Successfully updated order \" + orderId + \" status to \" + status.toUpperCase(),\n                        order: response.data\n                    }\n                }\n            })\n            return Promise.resolve();\n        },\n        (error) => {\n            handleError(error, dispatch);\n            return Promise.reject();\n        }\n    )\n}\n\nexport const updateOrderPaymentStatus = (orderId, paymentStatus) => async (dispatch) => {\n    return OrderApiService.updateOrderPaymentStatus(orderId, paymentStatus).then(\n        (response) => {\n            dispatch({\n                type: UPDATE_PAYMENT_STATUS,\n                payload: {\n                    status: 200,\n                    action: UPDATE_PAYMENT_STATUS,\n                    data: {\n                        order: response.data\n                    }\n                }\n            })\n            dispatch({\n                type: SET_MESSAGE,\n                payload: {\n                    status: 200,\n                    data: {\n                        //message: \"Successfully updated order \" + orderId + \" status to \" + status.toUpperCase(),\n                    }\n                }\n            })\n            return Promise.resolve();\n        },\n        (error) => {\n            handleError(error, dispatch);\n            return Promise.reject();\n        }\n    )\n}\n\nexport const getPaymentTransactions = (query, page, limit) => async (dispatch) => {\n    return OrderApiService.getPaymentTransactions(query, page, limit).then(\n        (response) => {\n            dispatch({\n                type: GET_PAYMENT_TRANSACTIONS,\n                payload: {\n                    status: 200,\n                    action: \"GET_PAYMENT_TRANSACTIONS\",\n                    data: {\n                        payments: response.data,\n                    }\n                }\n            })\n            return Promise.resolve();\n        },\n        (error) => {\n            handleError(error, dispatch);\n            return Promise.reject();\n        }\n    )\n}","import React, { Component } from \"react\"\nimport {\n  CCard,\n  CCardBody,\n  CRow,\n  CCol,\n  CImage,\n  CFormLabel,\n  CFormTextarea,\n} from \"@coreui/react\"\nimport { NO_IMAGE_BASE64 } from \"src/service/redux/constants\"\nimport ReactStars from \"react-rating-stars-component\"\n\nimport config from \"../../config\";\n\nexport class OrderCard extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      orderItem: this.props.item,\n      canReview: this.props.canReview,\n      orderId: this.props.orderId,\n      comment: this.props.comment,\n      rating: this.props.rating,\n      submitted: this.props.submitted,\n      canViewReview: this.props.canViewReview,\n    }\n  }\n  render() {\n    let {\n      orderItem,\n      canReview,\n      rating,\n      comment,\n      orderId,\n      submitted,\n      canViewReview,\n    } = this.state\n    let isSubmitted = submitted\n    if (canViewReview && !canReview) {\n      submitted = true\n    }\n    const fontStyle = {\n      fontSize: \"14px\",\n      fontWeight: \"400\",\n    }\n    return (\n      <CRow className=\"mb-3\">\n        <CCard>\n          <CCardBody>\n            <div className=\"d-flex align-items-start\">\n              <CImage\n                rounded\n                src={\n                  orderItem.product.fileImages.length > 0\n                    ? config.api.private.baseUrl + \"/api/v1/products/getImages/bytesArrays/\" +\n                    orderItem.product.fileImages[0].path +\n                    orderItem.product.fileImages[0].fileName\n                    : NO_IMAGE_BASE64\n                }\n                width={100}\n                height={100}\n              />\n              <div className=\"ms-2  w-100\">\n                <CRow className=\"d-flex justify-content-between\">\n                  <CCol className=\"ps-4 text-dark\">\n                    {orderItem.product.productName}\n                  </CCol>\n                  <CCol className=\"text-dark d-flex flex-column align-items-center\">\n                    <span style={fontStyle} className=\"text-black-50\">\n                      Price\n                    </span>\n                    <span className=\"pt-3\">\n                      &#8369;{orderItem.product.productPrice.toFixed(2)}\n                    </span>\n                  </CCol>\n                  <CCol className=\"text-dark d-flex flex-column align-items-center\">\n                    <span style={fontStyle} className=\"text-black-50\">\n                      Quantity\n                    </span>\n                    <span className=\"pt-3\">{orderItem.quantity}</span>\n                  </CCol>\n                  <CCol className=\"text-dark d-flex flex-column align-items-center\">\n                    <span style={fontStyle} className=\"text-black-50\">\n                      Amount\n                    </span>\n                    <span className=\"pt-3\">\n                      &#8369;{orderItem.amount.toFixed(2)}\n                    </span>\n                  </CCol>\n                </CRow>\n                {(canReview || (canViewReview && isSubmitted)) && (\n                  <div>\n                    <ReactStars\n                      count={5}\n                      value={rating}\n                      size={24}\n                      isHalf={false}\n                      edit={!submitted}\n                      onChange={(newRating) => {\n                        this.props.handleOrderReview(\n                          orderId,\n                          orderItem,\n                          newRating,\n                          comment,\n                        )\n                      }}\n                    />\n                    <div className=\"mb-!2\">\n                      <textarea\n                        disabled={submitted}\n                        onChange={(event) => {\n                          this.props.handleOrderReview(\n                            orderId,\n                            orderItem,\n                            rating,\n                            event.target.value,\n                          )\n                        }}\n                        id=\"exampleFormControlTextarea1\"\n                        rows=\"3\"\n                        style={{ width: \"100%\" }}\n                        placeholder=\"Please write a review.\"\n                      >\n                        {comment}\n                      </textarea>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </CCardBody>\n        </CCard>\n      </CRow>\n    )\n  }\n}\n\nexport default OrderCard\n","import authHeader from \"../auth/authHeader\"\nimport axios from \"./RestApi\"\n\nexport class CommentApiService {\n  getComments(productId, page, limit) {\n    return axios.get(\"/comments\", {\n      params: {\n        productId: productId,\n        page: page,\n        limit: limit,\n      },\n    })\n  }\n  saveComment(commentDetails) {\n    return axios.post(\"/comments\", commentDetails, {\n      headers: authHeader(),\n    })\n  }\n  saveComments(orderId, commentDetails) {\n    return axios.post(\"/comments/bulk/\" + orderId, commentDetails, {\n      headers: authHeader(),\n    })\n  }\n  deleteComment(commentId) {\n    return axios.delete(\"/comments/\" + commentId, {\n      headers: authHeader(),\n    })\n  }\n}\nexport default new CommentApiService()\n","import {\n  GET_COMMENTS,\n  DELETE_COMMENT,\n  ADD_COMMENT,\n} from \"src/service/redux/constants\"\nimport { SET_MESSAGE } from \"src/constants/userConstants\"\nimport CommentApiService from \"src/service/restAPI/CommentApiService\"\n\nexport const getComments = (productId, page, limit) => async (dispatch) => {\n  return CommentApiService.getComments(productId, page, limit).then(\n    (response) => {\n      dispatch({\n        type: GET_COMMENTS,\n        payload: {\n          status: 200,\n          action: \"GET_COMMENT\",\n          data: response.data,\n        },\n      })\n      return Promise.resolve()\n    },\n    (error) => {\n      const errorMessage =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString()\n\n      const status =\n        (error.response && error.response.data && error.response.data.code) ||\n        error.toString()\n\n      dispatch({\n        type: SET_MESSAGE,\n        payload: {\n          status: status,\n          data: {\n            message: errorMessage,\n          },\n        },\n      })\n      return Promise.reject()\n    },\n  )\n}\n\nexport const saveComment = (wishlistDetails) => async (dispatch) => {\n  return CommentApiService.saveComment(wishlistDetails).then(\n    (response) => {\n      dispatch({\n        type: ADD_COMMENT,\n        payload: {\n          status: 200,\n          action: \"ADD_COMMENT\",\n          data: response.data,\n        },\n      })\n      dispatch({\n        type: SET_MESSAGE,\n        payload: {\n          status: 200,\n          data: {\n            message: \"Successfully submitted product comment\",\n            order: response.data,\n          },\n        },\n      })\n      return Promise.resolve()\n    },\n    (error) => {\n      const errorMessage =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString()\n\n      const status =\n        (error.response && error.response.data && error.response.data.code) ||\n        error.toString()\n\n      dispatch({\n        type: SET_MESSAGE,\n        payload: {\n          status: status,\n          data: {\n            message: errorMessage,\n          },\n        },\n      })\n      return Promise.reject()\n    },\n  )\n}\n\nexport const saveComments = (orderId, comments) => async (dispatch) => {\n  return CommentApiService.saveComments(orderId, comments).then(\n    (response) => {\n      dispatch({\n        type: ADD_COMMENT,\n        payload: {\n          status: 200,\n          action: \"ADD_COMMENT\",\n          data: response.data,\n        },\n      })\n      dispatch({\n        type: SET_MESSAGE,\n        payload: {\n          status: 200,\n          data: {\n            message: \"Successfully submitted order product review\",\n            order: response.data,\n          },\n        },\n      })\n      return Promise.resolve()\n    },\n    (error) => {\n      const errorMessage =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString()\n\n      const status =\n        (error.response && error.response.data && error.response.data.code) ||\n        error.toString()\n\n      dispatch({\n        type: SET_MESSAGE,\n        payload: {\n          status: status,\n          data: {\n            message: errorMessage,\n          },\n        },\n      })\n      return Promise.reject()\n    },\n  )\n}\n\nexport const deleteComment = (wishlistId) => async (dispatch) => {\n  return CommentApiService.deleteComment(wishlistId).then(\n    (response) => {\n      dispatch({\n        type: DELETE_COMMENT,\n        payload: {\n          status: 200,\n          action: \"DELETE_COMMENT\",\n          data: {\n            order: response.data,\n          },\n        },\n      })\n      dispatch({\n        type: SET_MESSAGE,\n        payload: {\n          status: 200,\n          data: {\n            message: \"Successfully deleted wishlist\",\n          },\n        },\n      })\n      return Promise.resolve()\n    },\n    (error) => {\n      const errorMessage =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString()\n\n      const status =\n        (error.response && error.response.data && error.response.data.code) ||\n        error.toString()\n\n      dispatch({\n        type: SET_MESSAGE,\n        payload: {\n          status: status,\n          data: {\n            message: errorMessage,\n          },\n        },\n      })\n      console.log(\"JKOSLDFJ\")\n      return Promise.reject()\n    },\n  )\n}\n"],"sourceRoot":""}