(this["webpackJsonp@project/inventory-management-system"]=this["webpackJsonp@project/inventory-management-system"]||[]).push([[36],{1300:function(e,t,s){"use strict";s.r(t),s.d(t,"Orders",(function(){return v}));var a=s(0),r=s(568),n=s(153),i=s(845),d=s(638),c=s(573),o=s(48),l=s(700),p=s(154),m=s(582),h=s.n(m),u=s(569),b=s(7);class j extends a.Component{constructor(...e){super(...e),this.state={visible:!1,icon:"",action:"",loading:!1,trackingNumber:"",trackingUrl:"",validated:!1},this.manageTrackingInfoModal=(e,t)=>{if(e.modalVisible!==this.props.modalVisible){let{visible:e,action:t,order:s,icon:a}=this.props.modalVisible;console.log(s),"MarkAsShipped"===t?this.setState({visible:e,action:t,icon:a,order:s}):"close"===t&&this.setState({visible:e,action:"",icon:"",brandName:"",brandId:""})}},this.handleOnChange=e=>{let t=e.target.name;this.setState({[t]:e.target.value})},this.handleOnSubmit=e=>{const{order:t,trackingNumber:s,trackingUrl:a}=this.state;e.preventDefault(),this.setState({validated:!0}),s&&a&&this.props.updateOrderStatus(t.orderId,"shipped",s,a).then((()=>{this.props.setTrackingInfoModal(!1,"close","","")}))}}componentDidUpdate(e,t){this.manageTrackingInfoModal(e,t)}render(){let{visible:e,trackingNumber:t,trackingUrl:s,loading:a,validated:n}=this.state;return Object(b.jsx)("div",{children:Object(b.jsxs)(r.P,{visible:e,children:[Object(b.jsx)(r.S,{onDismiss:()=>{this.props.setTrackingInfoModal(!1,"close","","")},children:Object(b.jsx)(r.T,{children:Object(b.jsx)("div",{className:"d-flex align-items-center",children:"Tracking Information"})})}),Object(b.jsx)(r.Q,{children:Object(b.jsxs)(r.B,{id:"brand-form",onSubmit:this.handleOnSubmit,validated:n,children:[Object(b.jsx)("div",{className:"mb-3",children:Object(b.jsxs)(r.F,{className:"mb-3",children:[Object(b.jsx)(r.D,{name:"trackingNumber",value:t,onChange:this.handleOnChange,type:"number",id:"floatingTrackingNumberInput",placeholder:"Enter Tracking Number",required:!0}),Object(b.jsx)(r.G,{htmlFor:"floatingTrackingNumberInput",children:"Tracking Number"}),Object(b.jsx)(r.E,{invalid:!0,children:"Please enter the tracking number"})]})}),Object(b.jsx)("div",{className:"mb-3",children:Object(b.jsxs)(r.F,{className:"mb-3",children:[Object(b.jsx)(r.D,{name:"trackingUrl",value:s,onChange:this.handleOnChange,type:"url",pattern:"https://.*",id:"floatingTrackingUrlInput",placeholder:"Enter Tracking Url",required:!0}),Object(b.jsx)(r.G,{htmlFor:"floatingTrackingUrlInput",children:"Tracking Url"}),Object(b.jsx)(r.E,{invalid:!0,children:"Invalid Pattern of your Tracking Url"})]})})]})}),Object(b.jsxs)(r.R,{children:[Object(b.jsx)(r.f,{color:"dark",variant:"ghost",onClick:()=>{this.props.setTrackingInfoModal(!1,"close","","")},children:"Close"}),Object(b.jsxs)(r.f,{type:"submit",color:"primary",disabled:a,form:"brand-form",children:[a&&Object(b.jsx)(r.gb,{size:"sm",className:"ms-1"}),"Save Tracking Information"]})]})]})})}}var O=Object(o.b)((e=>({modalVisible:e.modalVisibleResponse,userResponse:e.userResponse,messageResponse:e.messageResponse})),{setTrackingInfoModal:u.s,updateOrderStatus:d.g})(j),g=s(26),y=s(617),x=s(570),f=s(729);class v extends a.Component{constructor(e){super(e),this.state={message:"",status:"",action:"",orders:{data:[],totalCounts:0},token:"",permission:"",path:"",updated:!1,visible:!1,query:""},this.orderReviews={},this.manageTrackingInfoModal=(e,t)=>{if(e.modalVisible!==this.props.modalVisible){let{action:e}=this.props.modalVisible;"close"===e&&this.props.getOrders(this.state.status,this.state.query,0,10)}},this.manageorderRepsonse=(e,t)=>{if(e.orderResponse!==this.props.orderResponse){let{status:e,action:t,data:s}=this.props.orderResponse;200===e&&"GET_ORDERS"===t&&this.setState({orders:s.orders})}},this.manageScannerResponse=(e,t)=>{if(e.scannerResponse!==this.props.scannerResponse){let{action:e,decoded:t}=this.props.scannerResponse;"DECODEDBARCODE"===e&&(this.props.getOrders(this.state.status,t,0,10),this.setState({query:t}))}},this.manageHrefLinkBasedInPermission=e=>e===p.a.SUPER_ADMIN||e===p.a.ADMIN?"/app/order/":"/user/order/",this.renderCustomerAction=(e,t,s)=>{let a=Object(b.jsx)(b.Fragment,{}),n="Paid"===s?Object(b.jsx)(b.Fragment,{}):Object(b.jsx)(r.f,{onClick:()=>{this.handleOrder(t,"cancel")},children:"Cancel Order"});switch(e.toLowerCase()){case"pending":a=n;break;case"delivered":a="Paid"===s?Object(b.jsx)(r.f,{onClick:()=>{this.handleOrder(t,"request_refund")},children:"Request Refund"}):Object(b.jsx)(b.Fragment,{})}return a},this.handleOnSearch=e=>{const{status:t,query:s}=this.state;this.props.getOrders(t,s,0,10),this.setState({query:e.target.value})},this.handlePageClick=e=>{let t=e.selected;this.setState({page:t});const{status:s,query:a}=this.state;this.props.getOrders(s,a,t,10)},this.state.status=e.status,this.handleOrderReview=this.handleOrderReview.bind(this)}componentDidMount(){let{type:e,accessToken:t,roles:s}=this.props.userResponse.credentials,a=e+t,r=s.roleName,n=r||s,i=this.manageHrefLinkBasedInPermission(n);this.setState({token:a,permission:s.roleName?s.roleName:s,path:i});const{query:d}=this.state;this.props.getOrders(this.state.status,d,0,10)}componentDidUpdate(e,t){this.manageorderRepsonse(e,t),this.manageTrackingInfoModal(e,t),this.manageScannerResponse(e,t)}handleOrder(e,t){let s=e.orderId;this.props.updateOrderStatus(s,t,"","").then((()=>{let a=this.state.orders.data;this.props.orderResponse.data;const r=a.findIndex((e=>e.orderId==s)),{status:n,query:i}=this.state;if(a.splice(r,1),0==a.length)this.props.getOrders(n,i,0,10);else{let s=this.props.totalCounts;"undefined"==typeof s[t.toUpperCase()]&&(s[t.toUpperCase()]=0),"payment_received"==t&&(s[e.orderStatus.toUpperCase()]--,s[t.toUpperCase()]++,this.props.totalCountChange(s),this.setState({orders:a}))}}))}renderOrderAction(e,t,s){const{visible:a}=this.state;let n=Object(b.jsx)(b.Fragment,{});switch(e.toLowerCase()){case"pending":n=Object(b.jsx)(r.f,{onClick:()=>{this.handleOrder(t,"confirmed")},children:"Confirm Order"});break;case"confirmed":n=Object(b.jsx)(r.f,{onClick:()=>{this.props.setTrackingInfoModal(!a,"MarkAsShipped",t,"")},children:"Mark as Shipped"});break;case"shipped":n=Object(b.jsx)(r.f,{onClick:()=>{this.handleOrder(t,"delivered")},children:"Mark as Delivered"});break;case"delivered":n="Paid"===s?Object(b.jsx)("span",{className:"text-success p-2",style:{fontWeight:"500",fontStyle:"italic"},children:"Payment Received"}):Object(b.jsx)(r.f,{onClick:()=>{this.handleOrder(t,"payment_received")},disabled:"Paid"===s,children:"Mark as Payment Received"});break;case"request_refund":n=Object(b.jsx)(r.f,{onClick:()=>{this.handleOrder(t,"accept_refund")},children:"Accept Refund"})}return n}handleOrderView(e,t){e.preventDefault();let s=[],a=this.orderReviews[t.orderId];for(var r in a){let e=a[r];s.push({rating:e.rating,message:e.comment,anonymous:!0,published:0,product:{id:parseInt(r)}}),this.orderReviews[t.orderId][r].submitted=!0}this.props.saveComments(t.orderId,s),this.setState({update:!0})}handleOrderReview(e,t,s,a){const{orders:r}=this.state;let n=r.data.findIndex((t=>t.orderId==e)),{comments:i}=r.data[n],d=!1;"undefined"==typeof this.orderReviews[e]?this.orderReviews[e]={[t.product.id]:{rating:s,comment:a,submitted:!1}}:"undefined"!==typeof this.orderReviews[e][t.product.id]&&this.orderReviews[e][t.product.id].submitted&&(a=this.orderReviews[e][t.product.id].comment,d=this.orderReviews[e][t.product.id].submitted);let c=i&&i.findIndex((e=>e.product.id==t.product.id));if(c>=0){const e=i[c];s=e.rating,a=e.message,d=!0}this.orderReviews[e][t.product.id]={rating:s,comment:a,submitted:d}}render(){let{message:e,orders:t,permission:s,path:a,query:i,visible:d}=this.state;const c={fontSize:"14px",fontWeight:"400"};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f.a,{}),Object(b.jsx)(O,{}),Object(b.jsxs)("div",{className:"d-flex justify-content-end mb-2",children:[Object(b.jsx)(r.B,{className:"w-50",children:Object(b.jsxs)(r.N,{children:[Object(b.jsx)(r.D,{type:"text",id:"floatingInput",placeholder:"Search",className:"p-2",value:i,onChange:this.handleOnSearch}),Object(b.jsx)(r.f,{type:"button",color:"info",variant:"outline",id:"button-addon2",className:"",children:Object(b.jsx)(x.v,{})})]})}),Object(b.jsx)("div",{className:"text-center",children:Object(b.jsx)(r.qb,{content:"Scanner barcode",children:Object(b.jsx)(r.f,{className:"pt-2 pb-2 ms-2",type:"button",color:"info",variant:"outline",id:"btn-scan-barcode",onClick:()=>this.props.setScanModal(!d,"barcode"),children:Object(b.jsx)(y.a,{size:"24"})})})})]}),t.data&&t.data.length<0?Object(b.jsx)(r.i,{children:Object(b.jsx)(r.j,{children:Object(b.jsx)("div",{className:"text-center",children:"No Order Data"})})}):t.data&&t.data.map(((e,t)=>{let i=e.orderItems.length!=e.comments.length;if(i&&this.orderReviews[e.orderId])for(var d in i=!1,this.orderReviews[e.orderId])0==this.orderReviews[e.orderId][d].submitted&&(i=!0);const o=("DELIVERED"==e.orderStatus||"PAYMENT_RECEIVED"==e.orderStatus)&&s!==p.a.SUPER_ADMIN&&s!==p.a.ADMIN,m=("DELIVERED"==e.orderStatus||"PAYMENT_RECEIVED"==e.orderStatus)&&(s==p.a.SUPER_ADMIN||s==p.a.ADMIN),{firstName:h,lastName:u,street:j,barangay:O,province:y,region:x,city:f,phoneNumber:v}=e.customerAddress;let S="Payment Pending";switch(e.paymentStatus){case 1:S="Paid";break;case 2:S="Failed";break;case 3:S="Refunded"}return Object(b.jsxs)(r.i,{className:"mb-3",children:[Object(b.jsx)(r.m,{children:Object(b.jsxs)(r.bb,{className:"p-2",children:[Object(b.jsxs)("span",{style:{fontSize:"14px",fontWeight:"400"},className:"text-black-50",children:["Order ID: ",e.orderId]}),Object(b.jsxs)("span",{style:{fontSize:"14px",fontWeight:"400"},className:"text-black-50",children:["Customer Name: ",h+" "+u]}),Object(b.jsxs)("span",{style:{fontSize:"14px",fontWeight:"400"},className:"text-black-50",children:["Mobile: ",v]}),Object(b.jsxs)("span",{style:{fontSize:"14px",fontWeight:"400"},className:"text-black-50",children:["Address:"," ",j+"  "+O+", "+f+", "+y]}),"SHIPPED"===e.orderStatus?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("span",{style:{fontSize:"14px",fontWeight:"400"},className:"text-black-50",children:["Tracking Number: ",e.trackingNumber]}),Object(b.jsxs)("span",{style:{fontSize:"14px",fontWeight:"400"},className:"text-black-50",children:["Tracking Url: ",e.trackingUrl]})]}):Object(b.jsx)(b.Fragment,{})]})}),Object(b.jsx)(r.j,{children:Object(b.jsxs)(r.B,{onSubmit:t=>{this.handleOrderView(t,e)},children:[Object(b.jsx)(r.s,{children:e.orderItems.map(((t,a)=>{this.handleOrderReview(e.orderId,t,5,"");const{rating:r,comment:n,submitted:i}=this.orderReviews[e.orderId][t.product.id];return Object(b.jsx)(l.a,{item:t,canReview:o,canViewReview:m,orderId:e.orderId,comment:n,rating:r,submitted:i,handleOrderReview:this.handleOrderReview,permission:s},t.id)}))},new Date),i&&o&&Object(b.jsx)(r.f,{type:"submit",style:{float:"right"},children:"Submit Product Review"})]})}),Object(b.jsx)(r.k,{className:"p-4",children:Object(b.jsxs)(r.bb,{className:"",children:[Object(b.jsx)(r.q,{sm:"12",lg:"6",children:Object(b.jsxs)("div",{className:"d-flex flex-column",children:[Object(b.jsxs)("div",{style:c,className:"mt-2",children:[Object(b.jsx)("span",{className:"text-black-50 me-2",children:"Date of Ordered:"}),Object(b.jsx)("span",{style:{fontWeight:"500"},children:e.orderedAt})]}),Object(b.jsxs)("div",{style:c,className:"mt-2",children:[Object(b.jsx)("span",{style:c,className:"text-black-50 me-2",children:"Payment Method:"}),Object(b.jsx)("span",{style:{fontWeight:"500"},children:e.paymentMethod.paymentMethod})]}),Object(b.jsxs)("div",{style:c,className:"mt-2",children:[Object(b.jsx)("span",{style:c,className:"text-black-50 me-2",children:"Payment Status:"}),Object(b.jsx)("span",{style:{fontWeight:"500"},children:S})]}),Object(b.jsxs)("div",{style:c,className:"mt-2",children:[Object(b.jsx)("span",{style:c,className:"text-black-50 me-2",children:"Order Status:"}),Object(b.jsx)("span",{className:"text-danger",style:{fontWeight:"500"},children:e.orderStatus})]}),Object(b.jsxs)("div",{className:"mt-2",children:[Object(b.jsx)("span",{style:c,className:"text-black-50 me-2",children:"Shipping Fee"}),Object(b.jsxs)("span",{style:{fontWeight:"500"},children:["\u20b1",e.shippingFee?e.shippingFee.shippingAmount.toFixed(2):0]})]}),Object(b.jsxs)("div",{className:"mt-2",children:[Object(b.jsx)("span",{style:c,className:"text-black-50 me-2",children:"Total Amount"}),Object(b.jsxs)("span",{style:{fontWeight:"500"},children:["\u20b1",e.totalAmount.toFixed(2)]})]})]})}),Object(b.jsx)(r.q,{sm:"12",lg:"6",children:Object(b.jsxs)("div",{className:"d-flex align-items-end  h-100 justify-content-end mt-3",children:[s===p.a.SUPER_ADMIN||s===p.a.ADMIN?this.renderOrderAction(this.state.status,e,S):this.renderCustomerAction(this.state.status,e,S),Object(b.jsx)(n.b,{to:{pathname:g.a.api.private.prefixFrontendUrl+a+e.orderId,state:e.orderId},className:"m-2",children:"View More"})]})})]})})]},t)})),Object(b.jsx)(h.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:t.totalPages,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:this.handlePageClick,containerClassName:"pagination",activeClassName:"active"})]})}}t.default=Object(o.b)((e=>({orderResponse:e.orderResponse,messageResponse:e.messageResponse,userResponse:e.userResponse,modalVisible:e.modalVisibleResponse,scannerResponse:e.scannerResponse})),{getOrders:d.c,clearMessage:c.a,updateOrderStatus:d.g,saveComments:i.c,setTrackingInfoModal:u.s,setScanModal:u.n})(v)},569:function(e,t,s){"use strict";s.d(t,"l",(function(){return r})),s.d(t,"k",(function(){return n})),s.d(t,"e",(function(){return i})),s.d(t,"h",(function(){return d})),s.d(t,"g",(function(){return c})),s.d(t,"o",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"d",(function(){return h})),s.d(t,"j",(function(){return u})),s.d(t,"f",(function(){return b})),s.d(t,"p",(function(){return j})),s.d(t,"q",(function(){return O})),s.d(t,"n",(function(){return g})),s.d(t,"m",(function(){return y})),s.d(t,"r",(function(){return x})),s.d(t,"i",(function(){return f})),s.d(t,"s",(function(){return v}));var a=s(1);const r=(e,t,s)=>async r=>{r({type:a.SET_PRODUCTEDITMODAL_VISIBILIT,payload:{status:200,data:{visible:e,action:t,icon:s}}})},n=(e,t,s)=>async r=>{r({type:a.SET_PRODUCT_DETAILS_MODAL,payload:{status:200,data:{visible:e,action:t,product:s}}})},i=(e,t,s,r)=>async n=>{n({type:a.EDIT_PRODUCT_MODAL,payload:{status:200,data:{visible:e,action:t,product:s,icon:r}}})},d=(e,t,s,r)=>async n=>{n({type:a.ALERT_MODAL,payload:{action:t,module:s,alert:e,data:{id:r}}})},c=(e,t,s,r)=>async n=>{n({type:a.ALERT_BAN_MODAL,payload:{action:t,module:s,alert:e,data:{id:r}}})},o=(e,t,s,r)=>async n=>{n({type:a.UDPATE_STORE_INFORMATION,payload:{status:200,data:{visible:e,action:t,storeInfo:s,icon:r}}})},l=(e,t,s,r)=>async n=>{n({type:a.ADD_BRAND_MODAL,payload:{status:200,data:{visible:e,action:t,brand:s,icon:r}}})},p=(e,t,s,r)=>async n=>{n({type:a.ADD_CATEGORY_MODAL,payload:{status:200,data:{visible:e,action:t,category:s,icon:r}}})},m=(e,t,s,r)=>async n=>{n({type:a.ADD_EMPLOYEE_MODAL,payload:{status:200,data:{visible:e,action:t,employee:s,icon:r}}})},h=(e,t,s,r)=>async n=>{n({type:a.CHANGE_PASSWORD_MODAL,payload:{status:200,data:{visible:e,action:t,employee:s,icon:r}}})},u=(e,t)=>async s=>{s({type:a.LOGIN_MODAL,payload:{data:{visible:e,action:t}}})},b=(e,t,s,r)=>async n=>{n({type:a.SET_ADDRESS_MODAL,payload:{data:{visible:e,action:t,address:s,icon:r}}})},j=(e,t,s,r)=>async n=>{n({type:a.SET_SUPPLIER_MODAL,payload:{action:t,data:{visible:e,icon:r,supplier:s}}})},O=(e,t,s,r)=>async n=>{n({type:a.SET_SUPPLY_MODAL,payload:{action:t,data:{visible:e,icon:r,supply:s}}})},g=(e,t)=>async s=>{s({type:a.SET_SCAN_MODAL,payload:{action:t,data:{visible:e}}})},y=(e,t,s,r)=>async n=>{n({type:a.SET_PROMO_MODAL,payload:{action:t,data:{visible:e,icon:r,promo:s}}})},x=(e,t,s,r)=>async n=>{n({type:a.SET_TERMS_AND_CONDITION_MODAL,payload:{status:200,data:{visible:e,action:t,termsAndCondition:s,icon:r}}})},f=(e,t,s,r)=>async n=>{n({type:a.SET_CAROULSE_MDOAL,payload:{status:200,data:{visible:e,action:t,carousel:s,icon:r}}})},v=(e,t,s,r)=>async n=>{n({type:a.SET_TRACKING_INFO_MODAL,payload:{status:200,data:{visible:e,action:t,order:s,icon:r}}})}},638:function(e,t,s){"use strict";s.d(t,"c",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"e",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"g",(function(){return h})),s.d(t,"f",(function(){return u})),s.d(t,"d",(function(){return b})),s.d(t,"h",(function(){return j}));var a=s(1),r=s(16),n=s(152),i=s(62);var d=new class{getOrders(e,t,s,a){return i.a.get("/orders/status/"+e,{headers:Object(n.a)(),params:{query:t,page:s,limit:a}})}getPaymentTransactions(e,t,s){return i.a.get("/orders/payments",{headers:Object(n.a)(),params:{query:e,page:t,limit:s}})}updateOrderPaymentStatus(e,t){return i.a.put("/orders/"+e+"/paid/"+t,{},{headers:Object(n.a)()})}placeOrderDetails(e){return i.a.post("/orders/checkout",{customerAddressId:e.addressId,paymentId:e.paymentMethodId,cartItems:e.items,shippingFeeId:e.shippingFee},{headers:Object(n.a)()})}getOrderByOrderId(e){return i.a.get("/orders/"+e,{headers:Object(n.a)()})}updateOrderStatus(e,t,s,a){return i.a.put("/orders/"+e+"/status/"+t,{},{headers:Object(n.a)(),params:{trackingNumber:s,trackingUrl:a}})}validateCart(e){return i.a.post("/orders/validate",e,{headers:Object(n.a)()})}};const c=(e,t)=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),a=e.response&&e.response.data&&e.response.data.code||e.toString();t({type:r.g,payload:{status:a,data:{message:s}}})},o=(e,t,s,r)=>async n=>d.getOrders(e,t,s,r).then((e=>(n({type:a.GET_ORDERS,payload:{status:200,action:"GET_ORDERS",data:{orders:e.data,orderStatusCount:e.data.orderCounts}}}),Promise.resolve())),(e=>(c(e,n),Promise.reject()))),l=e=>async t=>{t({type:a.ORDER_ITEMS,payload:{status:200,action:"ORDERITEMS",data:{items:e}}})},p=e=>async t=>d.placeOrderDetails(e).then((e=>(t({type:a.PLACE_ORDER,payload:{status:200,action:"PLACE_ORDER",data:{}}}),t({type:r.g,payload:{status:200,data:{message:"Successfully Place your Order",order:e.data}}}),Promise.resolve())),(e=>(c(e,t),Promise.reject()))),m=e=>async t=>d.getOrderByOrderId(e).then((e=>(t({type:a.GET_ORDER_BY_ID,payload:{status:200,action:"GETORDERBYID",data:{order:e.data}}}),Promise.resolve())),(e=>(c(e,t),Promise.reject()))),h=(e,t,s,n)=>async i=>d.updateOrderStatus(e,t,s,n).then((s=>(i({type:a.UPDATE_ORDER_STATUS,payload:{status:200,action:a.UPDATE_ORDER_STATUS,data:{order:s.data}}}),i({type:r.g,payload:{status:200,data:{message:"Successfully updated order "+e+" status to "+t.toUpperCase(),order:s.data}}}),Promise.resolve())),(e=>(c(e,i),Promise.reject()))),u=(e,t)=>async s=>d.updateOrderPaymentStatus(e,t).then((e=>(s({type:a.UPDATE_PAYMENT_STATUS,payload:{status:200,action:a.UPDATE_PAYMENT_STATUS,data:{order:e.data}}}),s({type:r.g,payload:{status:200,data:{}}}),Promise.resolve())),(e=>(c(e,s),Promise.reject()))),b=(e,t,s)=>async r=>d.getPaymentTransactions(e,t,s).then((e=>(r({type:a.GET_PAYMENT_TRANSACTIONS,payload:{status:200,action:"GET_PAYMENT_TRANSACTIONS",data:{payments:e.data}}}),Promise.resolve())),(e=>(c(e,r),Promise.reject()))),j=e=>async t=>d.validateCart(e).then((e=>(t({type:a.VALIDATE_CART,payload:{status:200,action:a.VALIDATE_CART,data:e.data}}),e.data.error_messages.length>0&&t({type:r.g,payload:{status:400,data:{message:e.data.error_messages.join("\n")}}}),Promise.resolve())),(e=>(c(e,t),Promise.reject())))},700:function(e,t,s){"use strict";var a=s(0),r=s(568),n=s(1),i=s(575),d=s.n(i),c=s(26),o=s(154),l=s(7);class p extends a.Component{constructor(e){super(e),this.state={orderItem:this.props.item,canReview:this.props.canReview,orderId:this.props.orderId,comment:this.props.comment,rating:this.props.rating,submitted:this.props.submitted,canViewReview:this.props.canViewReview,permission:this.props.permission}}render(){let{orderItem:e,canReview:t,rating:s,comment:a,orderId:i,submitted:p,canViewReview:m,permission:h}=this.state,u=p;m&&!t&&(p=!0);const b={fontSize:"14px",fontWeight:"400"};return console.log(e),Object(l.jsx)(r.bb,{className:"mb-3",children:Object(l.jsx)(r.i,{children:Object(l.jsx)(r.j,{children:Object(l.jsxs)("div",{className:"d-flex align-items-start",children:[Object(l.jsx)(r.M,{rounded:!0,src:e.product.fileImages.length>0?c.a.api.private.baseUrl+"/api/v1/products/getImages/bytesArrays/"+e.product.fileImages[0].path+e.product.fileImages[0].fileName:n.NO_IMAGE_BASE64,width:100,height:100}),Object(l.jsxs)("div",{className:"ms-2  w-100",children:[Object(l.jsxs)(r.bb,{className:"d-flex justify-content-between",children:[Object(l.jsx)(r.q,{sm:"12",lg:"3",md:"12",className:"ps-4 text-dark",children:e.product.productName}),Object(l.jsxs)(r.q,{sm:"12",lg:"3",md:"2",className:"text-dark d-flex flex-column align-items-center",children:[Object(l.jsx)("span",{style:b,className:"text-black-50",children:"Price"}),Object(l.jsxs)("span",{className:"pt-3",children:["\u20b1",e.product.productPrice.toFixed(2)]})]}),Object(l.jsxs)(r.q,{sm:"12",lg:"3",md:"2",className:"text-dark d-flex flex-column align-items-center",children:[Object(l.jsx)("span",{style:b,className:"text-black-50",children:"Quantity"}),Object(l.jsx)("span",{className:"pt-3",children:e.quantity})]}),Object(l.jsxs)(r.q,{sm:"12",lg:"3",md:"2",className:"text-dark d-flex flex-column align-items-center",children:[Object(l.jsx)("span",{style:b,className:"text-black-50",children:"Amount"}),Object(l.jsxs)("span",{className:"pt-3",children:["\u20b1",e.amount.toFixed(2)]})]})]}),(t||m&&u)&&Object(l.jsxs)("div",{children:[Object(l.jsx)(d.a,{count:5,value:s,size:24,isHalf:!1,edit:!p,onChange:t=>{this.props.handleOrderReview(i,e,t,a)}}),h===o.a.SUPER_ADMIN||h===o.a.ADMIN?Object(l.jsx)(l.Fragment,{}):Object(l.jsx)("div",{className:"mb-!2",children:Object(l.jsx)("textarea",{disabled:p,onChange:t=>{this.props.handleOrderReview(i,e,s,t.target.value)},id:"exampleFormControlTextarea1",rows:"3",style:{width:"100%"},placeholder:"Please write a review.",children:a})})]})]})]})})})})}}t.a=p},729:function(e,t,s){"use strict";var a=s(0),r=s.n(a),n=s(568),i=s(48),d=s(569),c=s(730),o=s(156),l=s(570),p=s(7);const m=r.a.lazy((()=>s.e(10).then(s.t.bind(null,742,7))));class h extends a.Component{constructor(e){super(e),this.manageModalVisible=(e,t)=>{if(e.modalVisible!==this.props.modalVisible){const{action:e,visible:t}=this.props.modalVisible;"barcode"===e?this.setState({visible:t,stopStreaming:!1,decodeBarcode:"",action:e}):"close"===e||"closeScan"===e?this.setState({visible:t,stopStreaming:!1,decodeBarcode:""}):"inputBarcode"===e&&this.setState({action:e,visible:t,decodeBarcode:""})}},this.handleDecodeBarcode=e=>{e&&this.setState({decodeBarcode:e,stopStreaming:!0})},this.handleOnClose=()=>{const{action:e}=this.state;console.log(e),"inputBarcode"===e?this.props.setScanModal(!1,"closeScan"):this.props.setScanModal(!1,"close")},this.state={visible:!1,decodeBarcode:"",stopStreaming:!1,action:"",facingMode:"environment"}}componentDidUpdate(e,t){this.manageModalVisible(e,t)}render(){let{visible:e,decodeBarcode:t,stopStreaming:s,action:r,facingMode:i}=this.state;return Object(p.jsx)("div",{children:Object(p.jsxs)(n.P,{visible:e,alignment:"center",onDismiss:this.handleOnClose,children:[Object(p.jsx)(n.S,{onDismiss:this.handleOnClose,children:Object(p.jsx)(n.T,{children:Object(p.jsx)("div",{className:"d-flex align-items-center",children:"Scanner"})})}),Object(p.jsx)(n.Q,{children:Object(p.jsxs)(n.s,{className:"text-center",children:[Object(p.jsxs)(a.Suspense,{fallback:Object(p.jsx)("div",{className:"d-flex justify-content-center align-items-center  position-fixed spinner",children:Object(p.jsx)(o.DotLoader,{color:"#36D7B7",size:100})}),children:[Object(p.jsx)(n.a,{color:"info",dismissible:!0,children:Object(p.jsx)("strong",{children:"Scan Product Barcode to Search"})}),Object(p.jsx)(n.f,{variant:"ghost",color:"secondary",className:"mb-3 d-flex justify-content-start",onClick:()=>this.setState({facingMode:"environment"===i?"user":"environment"}),children:"environment"===i?"Rear":"Front"}),Object(p.jsx)(m,{className:"w-25",delay:500,facingMode:i,stopStream:s,torch:"true",onUpdate:(e,t)=>{t&&this.handleDecodeBarcode(t.text)}})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h4",{children:t}),t&&("inputBarcode"===r?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(n.f,{onClick:()=>{this.props.getDecodedBarcode(t,"inputBarcode"),this.setState({visible:!1})},color:"info",variant:"outline",className:"",children:Object(p.jsx)("span",{className:"ms-2",children:"Insert"})})}):Object(p.jsxs)(n.f,{onClick:()=>{this.props.getDecodedBarcode(t,"DECODEDBARCODE"),this.setState({visible:!1})},color:"info",variant:"outline",className:"",children:[Object(p.jsx)(l.v,{}),Object(p.jsx)("span",{className:"ms-2",children:"Search"})]}))]})]})}),Object(p.jsx)(n.R,{children:Object(p.jsx)(n.f,{color:"dark",variant:"ghost",onClick:this.handleOnClose,children:"Close"})})]})})}}t.a=Object(i.b)((e=>({modalVisible:e.modalVisibleResponse})),{setScanModal:d.n,getDecodedBarcode:c.a})(h)},730:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var a=s(1);const r=(e,t)=>async s=>{s({type:a.GET_DECODED_BARCODE,payload:{action:t,decoded:e}})}},845:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return l}));var a=s(1),r=s(16),n=s(152),i=s(62);var d=new class{getComments(e,t,s){return i.a.get("/comments",{params:{productId:e,page:t,limit:s}})}saveComment(e){return i.a.post("/comments",e,{headers:Object(n.a)()})}saveComments(e,t){return i.a.post("/comments/bulk/"+e,t,{headers:Object(n.a)()})}deleteComment(e){return i.a.delete("/comments/"+e,{headers:Object(n.a)()})}};const c=(e,t,s)=>async n=>d.getComments(e,t,s).then((e=>(n({type:a.GET_COMMENTS,payload:{status:200,action:"GET_COMMENT",data:e.data}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),s=e.response&&e.response.data&&e.response.data.code||e.toString();return n({type:r.g,payload:{status:s,data:{message:t}}}),Promise.reject()})),o=e=>async t=>d.saveComment(e).then((e=>(t({type:a.ADD_COMMENT,payload:{status:200,action:"ADD_COMMENT",data:e.data}}),t({type:r.g,payload:{status:200,data:{message:"Successfully submitted product comment",order:e.data}}}),Promise.resolve())),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),a=e.response&&e.response.data&&e.response.data.code||e.toString();return t({type:r.g,payload:{status:a,data:{message:s}}}),Promise.reject()})),l=(e,t)=>async s=>d.saveComments(e,t).then((e=>(s({type:a.ADD_COMMENT,payload:{status:200,action:"ADD_COMMENT",data:e.data}}),s({type:r.g,payload:{status:200,data:{message:"Successfully submitted order product review",order:e.data}}}),Promise.resolve())),(e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),a=e.response&&e.response.data&&e.response.data.code||e.toString();return s({type:r.g,payload:{status:a,data:{message:t}}}),Promise.reject()}))}}]);
//# sourceMappingURL=36.7648b419.chunk.js.map