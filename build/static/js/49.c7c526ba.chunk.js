(this["webpackJsonp@project/inventory-management-system"]=this["webpackJsonp@project/inventory-management-system"]||[]).push([[49],{822:function(e,t,s){"use strict";s.r(t),s.d(t,"CustomerAddressController",(function(){return j}));var a=s(0),i=s(568),n=s(15),r=s(659),o=s(573),d=s(569),c=s(823),l=s(629),h=s(48),g=s(570),p=s(592),m=s(26),b=s(7);class j extends a.Component{constructor(...e){super(...e),this.state={message:"",action:"",addresses:[],addressId:"",visible:!1,isCart:!1},this.retreiveAddressResponse=()=>{this.props.getAdress()},this.manageAddressResponse=(e,t)=>{if(e.addressResponse!==this.props.addressResponse){let{action:e,status:t,data:s}=this.props.addressResponse;"GET_ADDRESSES"===e&&200===t&&this.setState({addresses:s.addresses})}},this.manageModalVisible=(e,t)=>{if(e.modalVisible!==this.props.modalVisible){let{action:e}=this.props.modalVisible;"close"===e&&this.retreiveAddressResponse()}}}componentDidMount(){this.props.userResponse.isLoggedIn?this.retreiveAddressResponse():this.props.history.push(m.a.api.private.prefixFrontendUrl+"/login")}componentDidUpdate(e,t){this.manageAddressResponse(e,t),this.manageModalVisible(e,t)}render(){let{message:e,addresses:t,visible:s,isCart:a}=this.state;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(c.a,{}),Object(b.jsx)(l.a,{}),Object(b.jsxs)(i.f,{shape:"rounded-pill",color:"primary",variant:"ghost",className:"d-flex justify-content-center align-items-center mb-3",onClick:()=>this.props.setAddressModal(!s,"Add","",Object(b.jsx)(g.r,{size:20,className:"me-2"})),children:[Object(b.jsx)(g.r,{size:20}),Object(b.jsx)("span",{style:{marginLeft:"10px"},children:"Add Address"})]}),Object(b.jsxs)(i.bb,{children:[t.map(((e,t)=>{const{firstName:a,lastName:n,phoneNumber:r,street:o,barangay:d,province:c,region:l,city:h,postalCode:m,id:j}=e;return Object(b.jsx)(i.q,{md:12,className:"mb-3",children:Object(b.jsx)(i.i,{className:"border-envelope",children:Object(b.jsx)(i.j,{className:"p-3 ",children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"d-flex align-items-center justify-content-between ",children:[Object(b.jsx)(i.o,{children:a+" "+n}),Object(b.jsxs)("div",{className:" text-end",children:[Object(b.jsx)(i.f,{color:"info",variant:"ghost",size:"sm",onClick:()=>this.props.setAddressModal(!s,"Edit",e,Object(b.jsx)(g.r,{size:20,className:"me-2"})),children:Object(b.jsx)(g.g,{size:"20"})}),Object(b.jsx)(i.f,{color:"danger",variant:"ghost",size:"sm",onClick:()=>this.props.setAlertModal(!s,"DELETECUSTOMERADDRESS","ADDRESS",j),children:Object(b.jsx)(p.b,{size:"20"})})]})]}),Object(b.jsxs)("div",{className:"ps-2",children:["Mobile #: ",r]}),Object(b.jsxs)("div",{className:"ps-2",children:["Address:"," ",o+", "+d+", "+h+", "+c+", "+l]})]})})})},t)})),a&&Object(b.jsx)(i.q,{className:"m-3 text-center",style:{fontStyle:"italic"},children:Object(b.jsx)(i.a,{color:"warning",children:"To Proceed to the next step Select or Add your Address Information"})})]}),e&&Object(b.jsx)("div",{className:"form-group d-flex justify-content-center align-items-center",children:Object(b.jsx)("div",{className:"alert alert-danger",role:"alert",children:e})})]})}}t.default=Object(h.b)((e=>({addressResponse:e.addressResponse,userResponse:e.userResponse,messageResponse:e.messageResponse,modalVisible:e.modalVisibleResponse})),{getAdress:r.b,clearMessage:o.a,setAddressModal:d.f,setAlertModal:d.h})(Object(n.h)(j))},823:function(e,t,s){"use strict";var a=s(0),i=s(568),n=s(48),r=s(569),o=s(659),d=s(573),c=s(824),l=s(7);class h extends a.Component{constructor(...e){super(...e),this.state={visible:!1,icon:"",address:this.addressStates,loading:!1,action:"",regionsData:[],provincesData:[],citiesData:[],baranggaysData:[],baranggayId:"",cityId:"",provinceId:"",regionId:"",id:""},this.addressStates={firstName:"",lastName:"",phoneNumber:"",region:"",city:"",province:"",barangay:"",street:"",postalCode:""},this.manageModalVisible=(e,t)=>{if(e.modalVisible!==this.props.modalVisible){let{visible:e,action:t,address:s,icon:a}=this.props.modalVisible;"Add"===t?this.setState({visible:e,icon:a,action:t}):"Edit"===t?(this.setState({visible:e,icon:a,action:t,id:s.id}),this.handleOnEditSetState(s)):(this.setState({visible:e,icon:"",action:"",regionId:"",provinceId:"",cityId:"",baranggayId:""}),this.onResetValue())}},this.handleOnEditSetState=e=>{const{firstName:t,lastName:s,phoneNumber:a,region:i,city:n,province:r,barangay:o,street:d}=e,{regionsData:c}=this.state,l=c.findIndex((e=>e&&e.name===i));this.getProvince(c[l].code,r),this.setState({firstName:t,lastName:s,phoneNumber:a,region:i,city:n,province:r,barangay:o,street:d,regionId:l})},this.getProvince=(e,t)=>{Object(c.provinces)(e).then((e=>{let s=[];e.map(((e,t)=>{s[t]={name:e.province_name,code:e.province_code}}));let a=s.findIndex((e=>e&&e.name===t));this.setState({provinceId:a,provincesData:s}),this.getCity(s[a].code)}))},this.getCity=e=>{const{city:t}=this.state;Object(c.cities)(e).then((e=>{let s=[];e.map(((e,t)=>{s[t]={name:e.city_name,code:e.city_code}}));let a=s.findIndex((e=>e&&e.name===t));this.setState({citiesData:s,cityId:a}),this.getBarangay(s[a].code)}))},this.getBarangay=e=>{console.log(e);const{barangay:t}=this.state;Object(c.barangays)(e).then((e=>{let s=[];e.map(((e,t)=>{s[t]={name:e.brgy_name,code:e.brgy_code}}));let a=s.findIndex((e=>e&&e.name===t));this.setState({baranggaysData:s,baranggayId:a})}))},this.handleOnChange=e=>{this.setState({[e.target.name]:e.target.value})},this.handleOnSubmit=e=>{e.preventDefault();!1===e.currentTarget.checkValidity()&&e.stopPropagation(),this.setState({loading:!0});let{action:t,firstName:s,lastName:a,phoneNumber:i,region:n,city:r,province:o,barangay:d,street:c,postalCode:l,id:h}=this.state,g={firstName:s,lastName:a,phoneNumber:i,region:n,city:r,province:o,barangay:d,street:c,postalCode:l};"Add"===t?this.handleSaveAddress(g):"Edit"===t&&this.handleUpdateAddress(h,g)},this.onResetValue=()=>{this.setState((()=>this.addressStates))},this.handleSaveAddress=e=>{this.props.saveAddress(e).then((()=>{let{status:e}=this.props.messageResponse;200===e&&(this.setState({loading:!1,regionId:"",provinceId:"",cityId:"",baranggayId:""}),this.onResetValue(),this.props.setAddressModal(!1,"close","",""))})).catch((()=>{this.setState({loading:!1})}))},this.handleUpdateAddress=(e,t)=>{console.log(e),this.props.updateAddress(e,t).then((()=>{let{status:e}=this.props.messageResponse;200===e&&(this.setState({loading:!1,regionId:"",provinceId:"",cityId:"",baranggayId:""}),this.onResetValue(),this.props.setAddressModal(!1,"close","",""))})).catch((()=>{this.setState({loading:!1})}))},this.onRegionChanged=e=>{const t=this.state.regionsData;if(""==e.target.value)return;const s=t[e.target.value];this.setState({regionId:e.target.value,region:s.name}),Object(c.provinces)(s.code).then((e=>{let t=[];e.map(((e,s)=>{t[s]={name:e.province_name,code:e.province_code}})),this.setState({provincesData:t})}))},this.onProvinceChanged=e=>{const t=this.state.provincesData;if(""==e.target.value)return;const s=t[e.target.value];this.setState({provinceId:e.target.value,province:s.name}),Object(c.cities)(s.code).then((e=>{let t=[];e.map(((e,s)=>{t[s]={name:e.city_name,code:e.city_code}})),this.setState({citiesData:t})}))},this.onCityChanged=e=>{const t=this.state.citiesData;if(""==e.target.value)return;const s=t[e.target.value];this.setState({cityId:e.target.value,city:s.name}),Object(c.barangays)(s.code).then((e=>{let t=[];e.map(((e,s)=>{t[s]={name:e.brgy_name,code:e.brgy_code}})),this.setState({baranggaysData:t})}))},this.onBaranggayChanged=e=>{const t=this.state.baranggaysData;if(""==e.target.value)return;const s=t[e.target.value];this.setState({baranggayId:e.target.value,barangay:s.name})}}componentDidMount(){Object(c.regions)().then((e=>{let t=[];e.map((e=>{t[e.id]={name:e.region_name,code:e.region_code}})),this.setState({regionsData:t})}))}componentDidUpdate(e,t){this.manageModalVisible(e,t)}render(){let{visible:e,firstName:t,lastName:s,phoneNumber:a,street:n,loading:r,action:o,regionsData:d,provincesData:c,citiesData:h,baranggaysData:g,baranggayId:p,cityId:m,regionId:b,provinceId:j}=this.state;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(i.P,{size:"lg",visible:e,children:[Object(l.jsx)(i.S,{onDismiss:()=>this.props.setAddressModal(!1,"close","",""),children:Object(l.jsx)(i.T,{children:"Customer Address"})}),Object(l.jsx)(i.Q,{children:Object(l.jsxs)(i.B,{className:"row g-3 needs-validation",id:"address-form",onSubmit:this.handleOnSubmit,children:[Object(l.jsx)(i.q,{md:6,children:Object(l.jsxs)(i.F,{className:"mb-3",children:[Object(l.jsx)(i.D,{name:"firstName",type:"text",id:"floatingFirstName",placeholder:"First name",value:t,onChange:this.handleOnChange,required:!0}),Object(l.jsx)(i.G,{htmlFor:"floatingFirstName",children:"First name"})]})}),Object(l.jsx)(i.q,{md:6,children:Object(l.jsxs)(i.F,{children:[Object(l.jsx)(i.D,{name:"lastName",type:"text",id:"floatingLastName",placeholder:"Last name",value:s,onChange:this.handleOnChange,required:!0}),Object(l.jsx)(i.G,{htmlFor:"floatingLastName",children:"Last name"})]})}),Object(l.jsx)(i.q,{md:6,children:Object(l.jsxs)(i.F,{children:[Object(l.jsx)(i.D,{name:"phoneNumber",type:"tel",required:!0,pattern:"^(09|\\+639)\\d{9}$",id:"floatingPhoneNumber",placeholder:"Last name",value:a,onChange:this.handleOnChange}),Object(l.jsx)(i.G,{htmlFor:"floatingPhoneNumber",children:"Phone number"})]})}),Object(l.jsx)(i.q,{md:6}),Object(l.jsx)(i.q,{md:12,children:Object(l.jsxs)(i.F,{children:[Object(l.jsx)(i.D,{name:"street",type:"text",id:"floatingStreet",placeholder:"Street",value:n,onChange:this.handleOnChange,required:!0}),Object(l.jsx)(i.G,{htmlFor:"floatingStreet",children:"Street"})]})}),Object(l.jsx)(i.q,{md:6,children:Object(l.jsxs)(i.F,{className:"mb-3",children:[Object(l.jsxs)(i.H,{name:"region",type:"text",id:"floatingRegion",placeholder:"Region",value:b,onChange:this.onRegionChanged,required:!0,children:[Object(l.jsx)("option",{value:"",disabled:!0,children:"-- Choose Region --"}),d.map(((e,t)=>Object(l.jsx)("option",{value:t,children:e.name},t)))]}),Object(l.jsx)(i.G,{htmlFor:"floatingRegion",children:"Region"})]})}),Object(l.jsx)(i.q,{md:6,children:Object(l.jsxs)(i.F,{children:[Object(l.jsxs)(i.H,{name:"province",type:"text",id:"floatingProvince",placeholder:"Province",value:j,onChange:this.onProvinceChanged,required:!0,children:[Object(l.jsx)("option",{value:"",disabled:!0,children:"-- Choose Province --"}),c.map(((e,t)=>Object(l.jsx)("option",{value:t,children:e.name},e.name)))]}),Object(l.jsx)(i.G,{htmlFor:"floatingProvince",children:"Province"})]})}),Object(l.jsx)(i.q,{md:6,children:Object(l.jsxs)(i.F,{children:[Object(l.jsxs)(i.H,{name:"city",type:"text",id:"floatingCity",placeholder:"City",value:m,onChange:this.onCityChanged,required:!0,children:[Object(l.jsx)("option",{value:"",disabled:!0,children:"-- Choose City --"}),h.map(((e,t)=>Object(l.jsx)("option",{value:t,children:e.name},t)))]}),Object(l.jsx)(i.G,{htmlFor:"floatingCity",children:"City"})]})}),Object(l.jsx)(i.q,{md:6,children:Object(l.jsxs)(i.F,{children:[Object(l.jsxs)(i.H,{name:"barangay",type:"text",id:"floatingBarangay",placeholder:"Barangay",value:p,onChange:this.onBaranggayChanged,required:!0,children:[Object(l.jsx)("option",{value:"",disabled:!0,children:"-- Choose Barangay --"}),g.map(((e,t)=>Object(l.jsx)("option",{value:t,children:e.name},t)))]}),Object(l.jsx)(i.G,{htmlFor:"floatingBarangay",children:"Barangay"})]})})]})}),Object(l.jsxs)(i.R,{children:[Object(l.jsx)(i.f,{color:"dark",variant:"ghost",onClick:()=>{this.props.setAddressModal(!1,"close","","")},children:"Close"}),Object(l.jsxs)(i.f,{color:"info",disabled:r,type:"submit",form:"address-form",children:[r&&Object(l.jsx)(i.gb,{size:"sm",className:"ms-1"}),"Save ","Edit"===o?"Changes":"Address"]})]})]})})}}t.a=Object(n.b)((e=>({modalVisible:e.modalVisibleResponse,messageResponse:e.messageResponse})),{setAddressModal:r.f,saveAddress:o.c,clearMessage:d.a,updateAddress:o.d})(h)},824:function(e,t,s){const a=s(160);e.exports={regions:async()=>{try{return(await a.get("https://isaacdarcilla.github.io/philippine-addresses/region.json")).data.map((e=>({id:e.id,psgc_code:e.psgc_code,region_name:e.region_name,region_code:e.region_code})))}catch(e){return e.message}},provinces:async e=>{try{return(await a.get("https://isaacdarcilla.github.io/philippine-addresses/province.json")).data.filter((t=>t.region_code===e)).map((e=>({psgc_code:e.psgc_code,province_name:e.province_name,province_code:e.province_code,region_code:e.region_code})))}catch(t){return t.message}},cities:async e=>{try{return(await a.get("https://isaacdarcilla.github.io/philippine-addresses/city.json")).data.filter((t=>t.province_code===e)).map((e=>({city_name:e.city_name,city_code:e.city_code,province_code:e.province_code,region_desc:e.region_desc})))}catch(t){return t.message}},barangays:async e=>{try{return(await a.get("https://isaacdarcilla.github.io/philippine-addresses/barangay.json")).data.filter((t=>t.city_code===e)).map((e=>({brgy_name:e.brgy_name,brgy_code:e.brgy_code,province_code:e.province_code,region_code:e.region_code})))}catch(t){return t.message}}}}}]);
//# sourceMappingURL=49.c7c526ba.chunk.js.map