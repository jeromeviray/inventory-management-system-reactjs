(this["webpackJsonp@project/inventory-management-system"]=this["webpackJsonp@project/inventory-management-system"]||[]).push([[43],{1162:function(e,s,t){"use strict";t.r(s),t.d(s,"Login",(function(){return u}));var n=t(428),a=t(55),r=t(132),i=t(0),o=t(430),c=t(454),l=t(13),d=t(129),p=t(444),j=t(431),h=t(136),m=t(25),b=t(134),x=t(8);const g=Object(i.lazy)((()=>Promise.all([t.e(8),t.e(13),t.e(66)]).then(t.bind(null,491))));class u extends i.Component{constructor(e){super(e),this.state={type:"password",username:"",password:"",loading:!1,validation:!1,message:"",permission:"",isLoggedIn:!1,storeInfo:[]},this.handleOnChange=e=>{const s=e.target.name;this.setState({[s]:e.target.value})},this.handleShowPassword=e=>{const{type:s}=this.state;e.preventDefault(),this.setState({type:"password"===s?"text":"password"})},this.handleSubmit=e=>{const{username:s,password:t}=this.state;e.preventDefault(),this.setState({validation:!0,loading:!0}),0!==s.length&&0!==t.length?this.props.authenticateUser(s,t).then((()=>{window.location.reload()})).catch((()=>{let{data:e}=this.props.messageResponse;this.setState({loading:!1,message:e.message})})):this.setState({loading:!1})},this.componentDidUpdate=(e,s)=>{this.manageStoreInformationResponse(e,s)},this.manageStoreInformationResponse=(e,s)=>{if(e.storeInformationResponse!==this.props.storeInformationResponse){const{action:e,status:s,data:t}=this.props.storeInformationResponse;"GET_STORE_INFORMATION"===e&&200===s&&this.setState({storeInfo:t.storeInfo})}},p.a.listen((e=>{Object(j.a)()}))}componentDidMount(){this.redirectSuccessAuthentication(),this.props.getStoreInformation()}redirectSuccessAuthentication(){const e=this.props.userResponse.isLoggedIn;if(e){let s=this.props.userResponse.credentials.roles.roleName,t=s||this.props.userResponse.credentials.roles;this.setState({isLoggedIn:e,permission:t})}}render(){let{type:e,username:s,password:t,validation:a,loading:r,message:i,permission:p,isLoggedIn:j,storeInfo:b}=this.state;if(j)return p===h.a.SUPER_ADMIN||p===h.a.ADMIN?Object(x.jsx)(l.a,{to:m.a.api.private.prefixFrontendUrl+"/app"}):Object(x.jsx)(l.a,{to:m.a.api.private.prefixFrontendUrl+"/home"});const u={marginBottom:"12px"};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(n.I,{position:"sticky",children:Object(x.jsx)(n.s,{children:Object(x.jsx)(d.b,{className:"nav-link",to:m.a.api.private.prefixFrontendUrl+"/home",style:{cursor:"pointer"},children:Object(x.jsx)(d.b,{className:"nav-link",to:m.a.api.private.prefixFrontendUrl+"/home",style:{cursor:"pointer"},children:b.acronym?Object(x.jsx)("strong",{style:{...u},children:b.acronym}):b.storeName?Object(x.jsx)("strong",{style:{...u},children:b.storeName}):Object(x.jsx)("strong",{style:{...u},children:"IMSs"})})})})}),Object(x.jsx)("div",{className:"min-vh-100 d-flex flex-row align-items-center text-dark ",children:Object(x.jsx)(n.s,{children:Object(x.jsx)(n.bb,{className:"justify-content-center ",children:Object(x.jsx)(n.q,{md:"12",lg:"8",children:Object(x.jsxs)(n.l,{className:"shadow-lg ",children:[Object(x.jsx)(n.i,{className:"p-4 m-0 left-to-right form-container border-0",children:Object(x.jsx)(n.j,{children:Object(x.jsxs)(n.B,{noValidate:!0,validated:a,onSubmit:this.handleSubmit,children:[Object(x.jsx)(n.q,{sm:"12",md:"12",lg:"12",className:"d-flex justify-content-center p-3",children:Object(x.jsx)("h2",{className:"text-dark",children:"Login"})}),Object(x.jsx)(n.N,{children:Object(x.jsx)(n.q,{xs:"12",sm:"12",md:"12",lg:"12",children:Object(x.jsxs)(n.F,{className:"mb-3 text-dark ",children:[Object(x.jsx)(n.D,{name:"username",type:"text",autoCorrect:"false",id:"floatingInput",placeholder:"username",onChange:this.handleOnChange,value:s,required:!0,className:"rounded-pill  ps-4 pe-4"}),Object(x.jsxs)(n.G,{htmlFor:"floatingInput ",className:"ps-4 pe-4",children:[Object(x.jsx)(o.C,{size:18}),Object(x.jsx)("span",{className:"ps-2",children:"Username"})]}),Object(x.jsx)(n.E,{invalid:!0,children:"Please provide a valid username"})]})})}),Object(x.jsx)(n.N,{children:Object(x.jsx)(n.q,{xs:"12",sm:"12",md:"12",lg:"12",children:Object(x.jsxs)(n.F,{className:"text-dark position-relative",children:[Object(x.jsx)(n.D,{name:"password",type:e,id:"floatingPassword",autoCorrect:"false",placeholder:"Password",onChange:this.handleOnChange,value:t,required:!0,className:"rounded-pill ps-4 pe-4"}),Object(x.jsxs)(n.G,{htmlFor:"exampleFormControlTextarea1 ",className:"ps-4 pe-4",children:[Object(x.jsx)(o.n,{size:18}),Object(x.jsx)("span",{className:"ps-2",children:"Password"})]}),Object(x.jsx)("span",{onClick:this.handleShowPassword,className:"position-absolute top-50 end-0 translate-middle-y ps-4 pe-4",children:"password"===e?Object(x.jsx)(o.j,{size:20}):Object(x.jsx)(o.i,{size:20})}),Object(x.jsx)(n.E,{invalid:!0,children:"Please provide a valid password"})]})})}),Object(x.jsxs)(n.q,{sm:"12",md:"12",lg:"12",className:"d-flex flex-column justify-content-center",children:[Object(x.jsxs)(n.f,{type:"submit",color:"info",size:"lg",style:{margin:"20px auto",width:"50%"},className:"d-flex justify-content-center align-items-center position-relative overflow-hidden login-btn",disabled:r,children:[r?Object(x.jsx)(n.gb,{size:"sm"}):Object(x.jsx)("span",{className:"d-flex align-items-center login-icon me-2",children:Object(x.jsx)(c.a,{size:20})}),Object(x.jsx)("span",{className:"label-btn ",children:"Login"})]}),Object(x.jsx)(d.b,{to:m.a.api.private.prefixFrontendUrl+"/password/forgot",children:"Forgot Password"})]}),i&&Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:i})})]})})}),Object(x.jsx)(g,{button:"register"})]})})})})})]})}}s.default=Object(a.b)((e=>({userResponse:e.userResponse,messageResponse:e.messageResponse,storeInformationResponse:e.storeInformationResponse})),{getStoreInformation:b.a,authenticateUser:r.a,clearMessage:j.a})(u)},431:function(e,s,t){"use strict";t.d(s,"a",(function(){return a}));var n=t(14);const a=()=>async e=>{e({type:n.a,payload:{status:"",data:{message:""}}})}},444:function(e,s,t){"use strict";t.d(s,"a",(function(){return a}));var n=t(29);const a=Object(n.a)()}}]);
//# sourceMappingURL=43.a9586856.chunk.js.map