(this["webpackJsonp@project/inventory-management-system"]=this["webpackJsonp@project/inventory-management-system"]||[]).push([[37],{1150:function(e,t,a){"use strict";a.r(t),a.d(t,"ProductEditorModal",(function(){return N}));var r=a(0),s=a(55),n=a(428),i=a(451),o=a(479),c=a(685),l=a.n(c),d=a(462),u=a(683),p=a(433),h=a(429),m=a(431),g=a(505),f=a(542),b=a(449),v=a(773),j=a(774),y=a(8);class N extends r.Component{constructor(e){super(e),this.productDetail={productName:"",productPrice:0,productDescriptions:"",barcode:"",brandName:"",brandId:"",categoryName:"",categoryId:"",threshold:0,productId:""},this.onResetValue=()=>{this.setState((()=>this.productDetail))},this.getCategories=()=>{this.props.getCategories().catch((()=>{let{status:e,data:t}=this.props.messageResponse;this.setState({message:t.message})}))},this.getBrands=()=>{this.props.getBrands().catch((()=>{let e=this.props.messageResponse;this.setState({message:e.data.message})}))},this.componentDidUpdate=(e,t)=>{this.manageModalVisible(e,t),this.manageBrandsResponse(e,t),this.manageCategoryResponse(e,t),this.manageScannerResponse(e,t)},this.manageBrandsResponse=(e,t)=>{if(e.brandResponse!==this.props.brandResponse){let{status:e,action:t,data:a}=this.props.brandResponse;200===e&&"GETBRANDS"===t&&this.setState({brands:a.brands})}},this.manageCategoryResponse=(e,t)=>{if(e.categoryResponse!==this.props.categoryResponse){let{action:e,data:t,status:a}=this.props.categoryResponse;"GET_CATEGORIES"===e&&200===a&&this.setState({categories:t.categories})}},this.manageModalVisible=(e,t)=>{if(e.modalVisibleResponse!==this.props.modalVisibleResponse){let{action:e,visible:t,icon:a}=this.props.modalVisibleResponse;if(console.log(this.props.modalVisibleResponse),"Add"===e)this.setState({visible:t,action:e,icon:a});else if("Edit"===e){let{product:e,action:t,visible:a,icon:r}=this.props.modalVisibleResponse;console.log(e);let{productName:s,productDescription:n,barcode:i,productPrice:o,brand:c,category:l,fileImages:u,id:p}=e.product;const{threshold:h}=e.inventory;this.setState({visible:a,action:t,icon:r,productName:s,productPrice:o,barcode:i,brandName:c&&c.brand,categoryName:l&&l.name,productId:p,threshold:h,editorState:n?d.EditorState.createWithContent(Object(d.convertFromRaw)(JSON.parse(n))):d.EditorState.createEmpty()}),this.getImages(u)}else"close"===e&&(this.props.clearMessage(),this.setState({visible:this.props.modalVisibleResponse.visible,productName:"",productPrice:"",barcode:"",brandName:"",categoryName:"",editorState:d.EditorState.createEmpty(),productImage:[],removedImages:[],threshold:0}))}},this.loadImage=(e,t)=>{let{productImage:a}=this.state;if(!e)return;let r=new FileReader;r.onloadend=()=>{a.push({data_url:r.result,file:null,image_created:!0,filename:t}),this.setState({productImage:a})},e&&r.readAsDataURL(e)},this.handleVisibility=e=>{this.setState({visible:!1})},this.handleImageOnchange=(e,t)=>{this.setState({productImage:e})},this.onEditorStateChange=e=>{e.getCurrentContent();this.setState({editorState:e})},this.handleOnChange=e=>{let t=e.target.name;this.setState({[t]:e.target.value})},this.handleSubmit=e=>{e.preventDefault();let{action:t}=this.state;this.setState({loading:!0}),"Add"===t?this.saveProduct():"Edit"===t?this.editProduct():this.setState({visible:this.props.modalVisibleResponse.visible})},this.saveProduct=()=>{let{productName:e,productPrice:t,productImage:a,barcode:r,editorState:s,categoryName:n,brandName:i,threshold:o}=this.state,c=new FormData;const l=void 0===typeof o?0:o;if(this.setState({threshold:l}),a.length>0)for(let d=0;d<a.length;d++)a[d].file&&c.append("productImages[]",a[d].file);else c.append("productImages[]",a);c.append("barcode",r),c.append("productName",e),c.append("productPrice",t),c.append("brandName",i),c.append("categoryName",n),c.append("threshold",l),c.append("productDescription",JSON.stringify(Object(d.convertToRaw)(s.getCurrentContent()))),this.props.saveProduct(c).then((()=>{this.onResetValue();200===this.props.messageResponse.status?this.setState({loading:!1,successFully:!0,editorState:d.EditorState.createEmpty(),productImage:[]}):this.setState({loading:!1,productImage:[],successFully:!1,editorState:d.EditorState.createEmpty()}),this.props.setProductModal(!1,"close")})).catch((()=>{this.onResetValue(),this.setState({loading:!1,productImage:[],editorState:d.EditorState.createEmpty()})}))},this.editProduct=()=>{let{productName:e,productPrice:t,productImage:a,barcode:r,editorState:s,categoryName:n,brandName:i,productId:o,removedImages:c,threshold:l}=this.state,u=new FormData;const p=void 0===typeof l?0:l;if(this.setState({threshold:p}),a.length>0)for(let d=0;d<a.length;d++)a[d].file&&u.append("productImages[]",a[d].file);else u.append("productImages[]",a);u.append("removedImages[]",c),u.append("barcode",r),u.append("productName",e),u.append("productPrice",t),u.append("brandName",i),u.append("threshold",p),u.append("categoryName",n),u.append("productDescription",JSON.stringify(Object(d.convertToRaw)(s.getCurrentContent()))),this.props.updateProduct(o,u).then((()=>{const{status:e}=this.props.messageResponse;200===e?this.setState({loading:!1,successFully:!0}):this.setState({loading:!1,successFully:!1}),this.props.setProductModal(!1,"close")})).catch((()=>{let{status:e,data:t}=this.props.messageResponse;this.setState({loading:!1})}))},this.manageScannerResponse=(e,t)=>{if(e.scannerResponse!==this.props.scannerResponse){let{action:e,decoded:t}=this.props.scannerResponse;console.log(this.props.scannerResponse),"inputBarcode"===e&&this.setState({barcode:t})}},this.removeImage=this.removeImage.bind(this),this.state={visible:!1,alert:!0,loading:!1,successFully:!1,message:"",status:"",productDetails:this.productDetail,action:"",icon:"",images:[],productImage:[],removedImages:[],editorState:d.EditorState.createEmpty(),autoGenerateBarcode:!1,brands:[],categories:[]}}componentDidMount(){this.loadImage(),this.getBrands(),this.getCategories()}async getImages(e){for(let t=0;t<e.length;t++)b.a.getImage(e[t].path,e[t].fileName).then((a=>{this.loadImage(a.data,e[t].fileName)})).catch((e=>{const t=e.response&&e.response.data&&e.response.data.message||e.message||e.error_message||e.toString(),a=e.response&&e.response.data&&e.response.data.code||e.status||e.toString();this.setState({status:a,message:t})}))}removeImage(e){let{productImage:t,removedImages:a}=this.state;t[e].filename&&a.push(t[e].filename)}render(){let{visible:e,alert:t,productName:a,productPrice:r,productImage:s,barcode:c,editorState:d,loading:p,successFully:h,message:m,action:g,icon:f,categoryName:b,categoryId:j,brandName:N,brandId:x,threshold:O,autoGenerateBarcode:S,brands:I,categories:R}=this.state;const _={fontWeight:"600",fontSize:"16px"};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(v.a,{}),Object(y.jsxs)(n.P,{size:"xl",visible:e,fullscreen:"lg",scrollable:!0,children:[Object(y.jsx)(n.S,{onDismiss:()=>{this.props.setProductModal(!1,"close")},className:"modal-header",children:Object(y.jsxs)(n.T,{children:[g," Product"]})}),Object(y.jsx)(n.B,{onSubmit:this.handleSubmit,className:"modal-product-form",id:"a-form",children:Object(y.jsxs)(n.Q,{children:[m&&Object(y.jsx)("div",{className:"form-group",children:Object(y.jsx)("div",{className:h?"alert alert-success":"alert alert-danger",role:"alert",children:m})}),Object(y.jsx)(n.a,{color:"warning",dismissible:!0,visible:t,children:Object(y.jsx)("strong",{children:"Maximum 10 images"})}),Object(y.jsx)(l.a,{multiple:!0,value:s,onChange:this.handleImageOnchange,maxNumber:10,dataURLKey:"data_url",onError:()=>this.setState({toastVisible:!1}),acceptType:["jpg","gif","png"],children:({imageList:e,onImageUpload:t,onImageRemove:a,isDragging:r,dragProps:s})=>Object(y.jsxs)("div",{className:"upload__image-wrapper",children:[Object(y.jsx)(n.s,{className:"upload-container",children:Object(y.jsx)(n.f,{color:"secondary",className:"upload-btn",style:r?{backgroundColor:"#8E9293",border:"4px dashed #ffffff"}:void 0,onClick:t,...s,children:"Select Image or Drag Here"})}),Object(y.jsx)(n.bb,{className:" images-contianer shadow ",children:e.map(((e,t)=>Object(y.jsx)(n.q,{sm:"4",md:"2",lg:"3",children:Object(y.jsxs)("div",{className:"image-item d-flex ",children:[Object(y.jsx)("img",{src:e.data_url,alt:"",width:"100"}),Object(y.jsx)("div",{className:"image-item__btn-wrapper",children:Object(y.jsx)(i.b,{size:30,color:"#FF0000",onClick:()=>{this.removeImage(t),a(t)}})})]})},t)))})]})}),Object(y.jsxs)(n.bb,{className:"mt-5",children:[Object(y.jsx)(n.q,{sm:"12",md:"6",lg:!0,children:Object(y.jsxs)(n.F,{className:"mb-3",children:[Object(y.jsx)(n.D,{type:"text",id:"floatingInputProductName",placeholder:"Product Name",name:"productName",value:a,onChange:this.handleOnChange,required:!0}),Object(y.jsx)(n.G,{htmlFor:"floatingInputProductName",children:"Product Name"})]})}),Object(y.jsx)(n.q,{sm:"12",md:"6",lg:!0,children:Object(y.jsxs)(n.F,{className:"mb-3",children:[Object(y.jsx)(n.D,{type:"number",id:"floatingProductPrice",placeholder:"Product Price",name:"productPrice",value:r,onChange:this.handleOnChange,required:!0}),Object(y.jsx)(n.G,{htmlFor:"floatingInput",children:"Product Price"})]})}),Object(y.jsx)(n.q,{sm:"12",md:"6",lg:!0,children:Object(y.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(y.jsxs)(n.F,{className:"mb-3 w-100",children:[Object(y.jsx)(n.D,{type:"number",id:"floatingBarcode",placeholder:"Product Barcode",name:"barcode",value:c,onChange:this.handleOnChange,required:!0,disabled:"Edit"===g}),Object(y.jsx)(n.G,{htmlFor:"floatingBarcode",children:"Product Barcode"})]}),Object(y.jsx)("div",{children:Object(y.jsx)(n.f,{className:"pt-2 pb-2 ms-2",type:"button",color:"info",variant:"outline",id:"btn-scan-barcode",onClick:()=>this.props.setScanModal(!0,"inputBarcode"),children:Object(y.jsx)(o.a,{size:"24"})})})]})}),Object(y.jsx)(n.q,{sm:"12",md:"6",lg:!0,children:Object(y.jsxs)(n.F,{className:"mb-3",children:[Object(y.jsx)(n.D,{type:"number",id:"floatingThreshold",placeholder:"Product Threshold",name:"threshold",value:O,onChange:this.handleOnChange}),Object(y.jsx)(n.G,{htmlFor:"floatingThreshold",children:"Stock Threshold"})]})}),Object(y.jsx)(n.q,{sm:"12",md:"6",lg:!0,children:Object(y.jsxs)(n.F,{className:"mb-3",children:[Object(y.jsxs)(n.H,{value:N,onChange:this.handleOnChange,name:"brandName",id:"floatingSelectBrand","aria-label":"Brand Names",children:[Object(y.jsx)("option",{value:"",children:"Choose Brand"}),I.data&&I.data.map(((e,t)=>Object(y.jsx)("option",{value:e.brandName,style:{..._},children:e.brandName},t)))]}),Object(y.jsx)(n.G,{htmlFor:"floatingSelectBrand",children:"Brand"})]})}),Object(y.jsx)(n.q,{sm:"12",md:"6",lg:!0,children:Object(y.jsxs)(n.F,{className:"mb-3",children:[Object(y.jsxs)(n.H,{value:b,onChange:this.handleOnChange,name:"categoryName",id:"floatingSelectCategory","aria-label":"Categories",children:[Object(y.jsx)("option",{value:"",children:"Choose Category"}),R.data&&R.data.map(((e,t)=>Object(y.jsx)("option",{value:e.categoryName,style:{..._},children:e.categoryName},t)))]}),Object(y.jsx)(n.G,{htmlFor:"floatingSelectCategory",children:"Category"})]})}),Object(y.jsx)(n.q,{sm:"12",md:"12",lg:"12",children:Object(y.jsx)(u.Editor,{editorState:d,wrapperClassName:"editor-wrapper",editorClassName:"editor",onEditorStateChange:this.onEditorStateChange,placeholder:"Product Description",toolbar:{options:["inline","blockType","fontSize","fontFamily","list","textAlign","colorPicker","emoji","remove","history"]}})})]})]})}),Object(y.jsxs)(n.R,{className:"modal-footer",children:[Object(y.jsx)(n.f,{color:"secondary",variant:"ghost",onClick:()=>this.props.setProductModal(!e,"close"),className:"text-body",children:"Close"}),Object(y.jsxs)(n.f,{type:"submit",color:"info",form:"a-form",className:"d-flex justify-content-center align-items-center position-relative ",disabled:p,children:[p?Object(y.jsx)(n.gb,{size:"sm"}):Object(y.jsx)("span",{className:"d-flex align-items-center login-icon me-2",children:f}),"Edit"===g?"Update":"Create"," Product"]})]})]})]})}}t.default=Object(s.b)((e=>({modalVisibleResponse:e.modalVisibleResponse,messageResponse:e.messageResponse,credentials:e.userResponse.credentials,productResponse:e.productResponser,brandResponse:e.brandResponse,categoryResponse:e.categoryResponse,scannerResponse:e.scannerResponse})),{setProductModal:h.l,saveProduct:p.j,clearMessage:m.a,getImage:p.c,getCategories:g.b,getBrands:f.b,updateProduct:p.l,setScanModal:h.n,getDecodedBarcode:j.a})(N)},563:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getListFiles=t.getImage=t.getBase64=t.getAcceptTypeString=t.openFileDialog=void 0,t.openFileDialog=function(e){e.current&&e.current.click()},t.getAcceptTypeString=function(e){return e&&e.length>0?e.map((function(e){return"."+e})).join(", "):"image/*"},t.getBase64=function(e){var t=new FileReader;return new Promise((function(a){t.addEventListener("load",(function(){return a(String(t.result))})),t.readAsDataURL(e)}))},t.getImage=function(e){var t=new Image;return new Promise((function(a){t.addEventListener("load",(function(){return a(t)})),t.src=URL.createObjectURL(e)}))},t.getListFiles=function(e,a){for(var r=[],s=0;s<e.length;s+=1)r.push(t.getBase64(e[s]));return Promise.all(r).then((function(t){return t.map((function(t,r){var s;return(s={})[a]=t,s.file=e[r],s}))}))}},564:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_DATA_URL_KEY=t.INIT_MAX_NUMBER=t.DEFAULT_NULL_INDEX=void 0,t.DEFAULT_NULL_INDEX=-1,t.INIT_MAX_NUMBER=1e3,t.DEFAULT_DATA_URL_KEY="dataURL"},685:function(e,t,a){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)},s=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&s(t,e,a);return n(t,e),t},o=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(s,n){function i(e){try{c(r.next(e))}catch(t){n(t)}}function o(e){try{c(r.throw(e))}catch(t){n(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,o)}c((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var a,r,s,n,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(n){return function(o){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,r&&(s=2&n[0]?r.return:n[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,r=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){i=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){i.label=n[1];break}if(6===n[0]&&i.label<s[1]){i.label=s[1],s=n;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(n);break}s[2]&&i.ops.pop(),i.trys.pop();continue}n=t.call(e,i)}catch(o){n=[6,o],r=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}},l=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var r=Array(e),s=0;for(t=0;t<a;t++)for(var n=arguments[t],i=0,o=n.length;i<o;i++,s++)r[s]=n[i];return r};Object.defineProperty(t,"__esModule",{value:!0});var d=i(a(0)),u=a(563),p=a(686),h=a(564);t.default=function(e){var t=e.value,a=void 0===t?[]:t,s=e.onChange,n=e.onError,i=e.children,m=e.dataURLKey,g=void 0===m?h.DEFAULT_DATA_URL_KEY:m,f=e.multiple,b=void 0!==f&&f,v=e.maxNumber,j=void 0===v?h.INIT_MAX_NUMBER:v,y=e.acceptType,N=e.maxFileSize,x=e.resolutionWidth,O=e.resolutionHeight,S=e.resolutionType,I=e.inputProps,R=void 0===I?{}:I,_=a||[],E=d.useRef(null),D=d.useState(h.DEFAULT_NULL_INDEX),P=D[0],w=D[1],C=d.useState(null),F=C[0],L=C[1],T=d.useState(!1),U=T[0],A=T[1],V=d.useCallback((function(){return u.openFileDialog(E)}),[E]),M=d.useCallback((function(){w(h.DEFAULT_NULL_INDEX),V()}),[V]),B=d.useCallback((function(){null===s||void 0===s||s([])}),[s]),k=function(e){return o(void 0,void 0,void 0,(function(){var t;return c(this,(function(a){switch(a.label){case 0:return[4,p.getErrorValidation({fileList:e,maxFileSize:N,maxNumber:j,acceptType:y,keyUpdate:P,resolutionType:S,resolutionWidth:x,resolutionHeight:O,value:_})];case 1:return(t=a.sent())?(L(t),null===n||void 0===n||n(t,e),[2,!1]):(F&&L(null),[2,!0])}}))}))},z=function(e){return o(void 0,void 0,void 0,(function(){var t,a,r,n,i;return c(this,(function(o){switch(o.label){case 0:return e?[4,u.getListFiles(e,g)]:[2];case 1:return(t=o.sent()).length?[4,k(t)]:[2];case 2:if(!o.sent())return[2];if(r=[],P>h.DEFAULT_NULL_INDEX)n=t[0],(a=l(_))[P]=n,r.push(P);else if(b)for(a=l(_,t),i=_.length;i<a.length;i+=1)r.push(i);else a=[t[0]],r.push(0);return null===s||void 0===s||s(a,r),[2]}}))}))},G=d.useMemo((function(){return u.getAcceptTypeString(y)}),[y]);return d.default.createElement(d.default.Fragment,null,d.default.createElement("input",r({type:"file",accept:G,ref:E,multiple:b&&P===h.DEFAULT_NULL_INDEX,onChange:function(e){return o(void 0,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,z(e.target.files)];case 1:return t.sent(),P>h.DEFAULT_NULL_INDEX&&w(h.DEFAULT_NULL_INDEX),E.current&&(E.current.value=""),[2]}}))}))},style:{display:"none"}},R)),null===i||void 0===i?void 0:i({imageList:_,onImageUpload:M,onImageRemoveAll:B,onImageUpdate:function(e){w(e),V()},onImageRemove:function(e){var t=l(_);Array.isArray(e)?e.forEach((function(e){t.splice(e,1)})):t.splice(e,1),null===s||void 0===s||s(t)},errors:F,dragProps:{onDrop:function(e){e.preventDefault(),e.stopPropagation(),A(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&z(e.dataTransfer.files)},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.items&&e.dataTransfer.items.length>0&&A(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),A(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDragStart:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.clearData()}},isDragging:U}))}},686:function(e,t,a){"use strict";var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(s,n){function i(e){try{c(r.next(e))}catch(t){n(t)}}function o(e){try{c(r.throw(e))}catch(t){n(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,o)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var a,r,s,n,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(n){return function(o){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,r&&(s=2&n[0]?r.return:n[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,r=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){i=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){i.label=n[1];break}if(6===n[0]&&i.label<s[1]){i.label=s[1],s=n;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(n);break}s[2]&&i.ops.pop(),i.trys.pop();continue}n=t.call(e,i)}catch(o){n=[6,o],r=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorValidation=t.isMaxNumberValid=t.isAcceptTypeValid=t.isMaxFileSizeValid=t.isImageValid=t.isResolutionValid=void 0;var n=a(564),i=a(563);t.isResolutionValid=function(e,t,a,r){if(void 0===a&&(a=0),void 0===r&&(r=1),!a||!r||!e.width||!e.height)return!0;switch(t){case"absolute":if(e.width===a&&e.height===r)return!0;break;case"ratio":var s=a/r;if(e.width/e.height===s)return!0;break;case"less":if(e.width<=a&&e.height<=r)return!0;break;case"more":if(e.width>=a&&e.height>=r)return!0}return!1},t.isImageValid=function(e){return!!e.includes("image")},t.isMaxFileSizeValid=function(e,t){return!t||e<=t},t.isAcceptTypeValid=function(e,t){if(e&&e.length>0){var a=t.split(".").pop()||"";if(e.findIndex((function(e){return e.toLowerCase()===a.toLowerCase()}))<0)return!1}return!0},t.isMaxNumberValid=function(e,t,a){if(0!==t&&!t)return!0;if(a===n.DEFAULT_NULL_INDEX){if(e<=t)return!0}else if(e<=t+1)return!0;return!1},t.getErrorValidation=function(e){var a=e.fileList,n=e.value,o=e.maxNumber,c=e.keyUpdate,l=e.acceptType,d=e.maxFileSize,u=e.resolutionType,p=e.resolutionWidth,h=e.resolutionHeight;return r(void 0,void 0,void 0,(function(){var e,r,m,g;return s(this,(function(s){switch(s.label){case 0:return e={},t.isMaxNumberValid(a.length+n.length,o,c)?[3,1]:(e.maxNumber=!0,[3,5]);case 1:r=0,s.label=2;case 2:return r<a.length?(m=a[r].file)?t.isImageValid(m.type)&&t.isAcceptTypeValid(l,m.name)?t.isMaxFileSizeValid(m.size,d)?u?[4,i.getImage(m)]:[3,4]:(e.maxFileSize=!0,[3,5]):(e.acceptType=!0,[3,5]):[3,4]:[3,5];case 3:if(g=s.sent(),!t.isResolutionValid(g,u,p,h))return e.resolution=!0,[3,5];s.label=4;case 4:return r+=1,[3,2];case 5:return Object.values(e).find(Boolean)?[2,e]:[2,null]}}))}))}}}]);
//# sourceMappingURL=37.5f5e3a4f.chunk.js.map